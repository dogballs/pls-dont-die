/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/config.ts":
/*!***********************!*\
  !*** ./src/config.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"config\": () => (/* binding */ config)\n/* harmony export */ });\nconst config = {\n    IS_DEV: false,\n    VERSION: '0.1.3',\n    GITHUB_LINK: 'https://github.com/dogballs/pls-dont-die',\n    CANVAS_WIDTH: 1024,\n    CANVAS_HEIGHT: 768,\n    STORAGE_NAMESPACE: 'plsdontdie',\n    CREATURES: {\n        // Dummium + modifier\n        dummy: {\n            type: 'dummy',\n            name: 'Dummy',\n            description: 'Lab test dummy',\n            unknownName: 'Creature #1',\n            requiredResourceGroups: [\n                [\n                    { type: 'dummium', amount: 1 },\n                    { type: 'techium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'dummium', amount: 1 },\n                { type: 'techium', amount: 1 },\n                { type: 'liquium', amount: 1 },\n                { type: 'sandium', amount: 1 },\n            ],\n        },\n        dummyfish: {\n            type: 'dummyfish',\n            name: 'Dummyfish',\n            description: 'Jealous ocean waste',\n            unknownName: 'Creature #2',\n            requiredResourceGroups: [\n                [\n                    { type: 'dummium', amount: 1 },\n                    { type: 'liquium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'fishium', amount: 1 },\n                { type: 'liquium', amount: 1 },\n                { type: 'techium', amount: 1 },\n            ],\n        },\n        scorporate: {\n            type: 'scorporate',\n            name: 'Scorporate',\n            description: 'Toxic manager',\n            unknownName: 'Creature #3',\n            requiredResourceGroups: [\n                [\n                    { type: 'dummium', amount: 1 },\n                    { type: 'sandium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'arachium', amount: 1 },\n                { type: 'sandium', amount: 1 },\n                { type: 'techium', amount: 1 },\n            ],\n        },\n        drone: {\n            type: 'drone',\n            name: 'Dummycopter',\n            description: 'I see you',\n            unknownName: 'Creature #4',\n            requiredResourceGroups: [\n                [\n                    { type: 'dummium', amount: 1 },\n                    { type: 'windium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'dummium', amount: 1 },\n                { type: 'techium', amount: 1 },\n                { type: 'windium', amount: 1 },\n            ],\n        },\n        lighter: {\n            type: 'lighter',\n            name: \"Peter's lighter\",\n            description: 'From under the table',\n            unknownName: 'Creature #5',\n            requiredResourceGroups: [\n                [\n                    { type: 'dummium', amount: 1 },\n                    { type: 'flamium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'dummium', amount: 1 },\n                { type: 'techium', amount: 1 },\n                { type: 'flamium', amount: 1 },\n            ],\n        },\n        // arachium + modifier\n        snake: {\n            type: 'snake',\n            name: 'Snek',\n            description: 'ssssssssssssssssssssssss',\n            unknownName: 'Creature #6',\n            requiredResourceGroups: [\n                [\n                    { type: 'arachium', amount: 1 },\n                    { type: 'liquium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'reptilium', amount: 1 },\n                { type: 'sandium', amount: 1 },\n                { type: 'liquium', amount: 1 },\n            ],\n        },\n        wasp: {\n            type: 'wasp',\n            name: 'Wasper',\n            description: 'Get away from me',\n            unknownName: 'Creature #7',\n            requiredResourceGroups: [\n                [\n                    { type: 'arachium', amount: 1 },\n                    { type: 'sandium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'arachium', amount: 1 },\n                { type: 'sandium', amount: 1 },\n                { type: 'windium', amount: 1 },\n            ],\n        },\n        bat: {\n            type: 'bat',\n            name: 'Betty',\n            description: 'Not that bat',\n            unknownName: 'Creature #8',\n            requiredResourceGroups: [\n                [\n                    { type: 'arachium', amount: 1 },\n                    { type: 'windium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'arachium', amount: 1 },\n                { type: 'sandium', amount: 1 },\n                { type: 'windium', amount: 1 },\n            ],\n        },\n        firebug: {\n            type: 'firebug',\n            name: 'Firebug',\n            description: 'Bug in a fire',\n            unknownName: 'Creature #9',\n            requiredResourceGroups: [\n                [\n                    { type: 'arachium', amount: 1 },\n                    { type: 'flamium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'arachium', amount: 1 },\n                { type: 'flamium', amount: 1 },\n                { type: 'sandium', amount: 1 },\n            ],\n        },\n        // fishium + modifier\n        fishy: {\n            type: 'fishy',\n            name: 'Fishy',\n            description: 'Chonky water boy',\n            unknownName: 'Creature #10',\n            requiredResourceGroups: [\n                [\n                    { type: 'fishium', amount: 1 },\n                    { type: 'liquium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'fishium', amount: 1 },\n                { type: 'liquium', amount: 1 },\n            ],\n        },\n        dragon: {\n            type: 'dragon',\n            name: 'I am a dragon',\n            description: 'Not a wyvern',\n            unknownName: 'Creature #11',\n            requiredResourceGroups: [\n                [\n                    { type: 'fishium', amount: 1 },\n                    { type: 'sandium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'reptilium', amount: 1 },\n                { type: 'windium', amount: 1 },\n                { type: 'flamium', amount: 1 },\n            ],\n        },\n        eaglefish: {\n            type: 'eaglefish',\n            name: 'Fish & Chicks',\n            description: 'Born to fly',\n            unknownName: 'Creature #12',\n            requiredResourceGroups: [\n                [\n                    { type: 'fishium', amount: 1 },\n                    { type: 'windium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'fishium', amount: 1 },\n                { type: 'liquium', amount: 1 },\n                { type: 'windium', amount: 1 },\n            ],\n        },\n        fishsteak: {\n            type: 'fishsteak',\n            name: 'Fish steak',\n            description: 'Everything at stake',\n            unknownName: 'Creature #13',\n            requiredResourceGroups: [\n                [\n                    { type: 'fishium', amount: 1 },\n                    { type: 'flamium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'fishium', amount: 1 },\n                { type: 'sandium', amount: 1 },\n            ],\n        },\n        // reptilium + modifier\n        // TODO\n        dude: {\n            type: 'dude',\n            name: 'Dude',\n            description: 'Is it Wednesday, my dude?',\n            unknownName: 'Creature 14',\n            requiredResourceGroups: [\n                [\n                    { type: 'reptilium', amount: 1 },\n                    { type: 'liquium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'wendsdium', amount: 1 },\n                { type: 'liquium', amount: 1 },\n            ],\n        },\n        muaddib: {\n            type: 'muaddib',\n            name: \"Muad'dib\",\n            description: 'Fear is the mind-killer',\n            unknownName: 'Creature 15',\n            requiredResourceGroups: [\n                [\n                    { type: 'reptilium', amount: 1 },\n                    { type: 'sandium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'reptilium', amount: 1 },\n                { type: 'sandium', amount: 1 },\n            ],\n        },\n        turtle: {\n            type: 'turtle',\n            name: 'Heliturtle',\n            description: 'Out of shell',\n            unknownName: 'Creature #16',\n            requiredResourceGroups: [\n                [\n                    { type: 'reptilium', amount: 1 },\n                    { type: 'windium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'reptilium', amount: 1 },\n                { type: 'windium', amount: 1 },\n            ],\n        },\n        firesnail: {\n            type: 'firesnail',\n            name: 'Snail gotta bail',\n            description: 'My house is on fire',\n            unknownName: 'Creature #17',\n            requiredResourceGroups: [\n                [\n                    { type: 'reptilium', amount: 1 },\n                    { type: 'flamium', amount: 1 },\n                ],\n            ],\n            droppedResources: [\n                { type: 'reptilium', amount: 1 },\n                { type: 'flamium', amount: 1 },\n            ],\n        },\n        // soulium + modifier\n        spirit: {\n            type: 'spirit',\n            name: 'Spirit',\n            description: 'Tormented soul',\n            unknownName: 'Creature X',\n            requiredResourceGroups: [\n                [\n                    { type: 'fishium', amount: 1 },\n                    { type: 'techium', amount: 1 },\n                ],\n                [\n                    { type: 'arachium', amount: 1 },\n                    { type: 'techium', amount: 1 },\n                ],\n                [\n                    { type: 'reptilium', amount: 1 },\n                    { type: 'techium', amount: 1 },\n                ],\n                [\n                    { type: 'soulium', amount: 1 },\n                    { type: 'techium', amount: 1 },\n                ],\n                [\n                    { type: 'soulium', amount: 1 },\n                    { type: 'liquium', amount: 1 },\n                ],\n                [\n                    { type: 'soulium', amount: 1 },\n                    { type: 'sandium', amount: 1 },\n                ],\n                [\n                    { type: 'soulium', amount: 1 },\n                    { type: 'windium', amount: 1 },\n                ],\n                [\n                    { type: 'soulium', amount: 1 },\n                    { type: 'flamium', amount: 1 },\n                ],\n            ],\n            droppedResources: [{ type: 'soulium', amount: 1 }],\n        },\n    },\n    DEATH_REASONS: {\n        dehydration: 'Dehydration (not enough water)',\n        overheat: 'Overheat (too hot)',\n        hypothermia: 'Hypothermia (too cold)',\n        short_circuit: 'Short circuit (water in the system)',\n        stuck_mech: 'Mechanisms stuck (sand in the system)',\n        drowning: 'Drowning (can not exist in water)',\n        drought: 'Drought (too dry)',\n        discomfort: 'Discomfort (out of comfort zone)',\n        gravity: 'Gravity (fell down)',\n        boredom: 'Boredom (Nothing to do)',\n        thirst: 'Thirst (Would like a drink)',\n        curse: 'Curse (must be freed)',\n        confusion: 'Confusion (where am I)',\n        viceversa: 'Vice versa (the other way around)',\n        why: 'Why? (Who does that?)',\n        burned: 'Burned down (Put out the fire, fast!)',\n        ramsay: 'This fish is so raw (You donkey)',\n        stayaway: \"Don't let the dreams be dreams\",\n        notwednesday: \"It's not Wednesday (come back later)\",\n    },\n};\n\n\n//# sourceURL=webpack:///./src/config.ts?");

/***/ }),

/***/ "./src/core/Animation.ts":
/*!*******************************!*\
  !*** ./src/core/Animation.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Animation\": () => (/* binding */ Animation)\n/* harmony export */ });\nconst DEFAULT_OPTIONS = {\n    delay: 0,\n    // requestAnimationFrame is usually 60 fps\n    fps: 60,\n    loop: false,\n};\nclass Animation {\n    constructor(frames = [], options = {}) {\n        this.time = 0;\n        this.frames = frames;\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n        this.frameIndex = 0;\n        this.loopIndex = 0;\n    }\n    getCurrentFrame() {\n        return this.frames[this.frameIndex];\n    }\n    getCurrentFrameIndex() {\n        return this.frameIndex;\n    }\n    isComplete() {\n        // Looped animation can not end\n        if (this.isLoopInfinite()) {\n            return false;\n        }\n        // If loop is limited by number of times and it hasn't looped all times yet\n        // animation is not complete.\n        if (this.isLoopFinite() && !this.isLastLoop()) {\n            return false;\n        }\n        if (!this.isLastFrame()) {\n            return false;\n        }\n        // Make sure last frame is displayed on the screen for required amount\n        // of tics including delay. Only after that set animation as complete.\n        const isComplete = this.isCurrentFrameComplete();\n        return isComplete;\n    }\n    /**\n     * @param {number} deltaTime time passed since last frame in seconds\n     */\n    update(deltaTime) {\n        // Record when entire animation has started. First frame will be shown for\n        // at least one tick\n        if (this.time === 0) {\n            this.time = deltaTime;\n            return;\n        }\n        // If looping is disabled and last frame animation is complete - nothing else\n        // to animate\n        if (this.isLoopDisabled() &&\n            this.isLastFrame() &&\n            this.isCurrentFrameComplete()) {\n            return;\n        }\n        // If loop is limited to number and we are on the last loop and last frame\n        // animation is complete - nothing else to animate\n        if (this.isLoopFinite() &&\n            this.isLastLoop() &&\n            this.isLastFrame() &&\n            this.isCurrentFrameComplete()) {\n            return;\n        }\n        // Debounces animation to create a delay between frames.\n        // If enough time has not passed yet from the last animation - wait.\n        if (!this.isCurrentFrameComplete()) {\n            this.time += deltaTime;\n            return;\n        }\n        // Go to the next frame\n        this.frameIndex += 1;\n        if (this.frameIndex > this.frames.length - 1) {\n            this.frameIndex = 0;\n            // When frame is reset to the first one,\n            // consider one animation loop complete\n            this.loopIndex += 1;\n        }\n        this.time += deltaTime;\n    }\n    reset() {\n        this.frameIndex = 0;\n        this.loopIndex = 0;\n        this.time = 0;\n        return this;\n    }\n    resetWithFrames(frames) {\n        this.reset();\n        this.frames = frames;\n        return this;\n    }\n    isCurrentFrameComplete() {\n        // By default each frame will have 1 tick guaranteed\n        const minFrameTime = 1 / this.options.fps;\n        // Delay adds up to default min time\n        const singleFrameTime = minFrameTime + this.options.delay;\n        // Sum time for all frames including current in one cycle\n        const passedFramesTime = (this.loopIndex * this.frames.length + this.frameIndex + 1) *\n            singleFrameTime -\n            minFrameTime;\n        const isComplete = this.time > passedFramesTime;\n        return isComplete;\n    }\n    isLastFrame() {\n        return this.frameIndex === this.frames.length - 1;\n    }\n    isLoopInfinite() {\n        return this.options.loop === true;\n    }\n    isLoopFinite() {\n        return typeof this.options.loop === 'number';\n    }\n    isLoopDisabled() {\n        return this.options.loop === false;\n    }\n    isLastLoop() {\n        return this.loopIndex + 1 === this.options.loop;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/Animation.ts?");

/***/ }),

/***/ "./src/core/BoundingBox.ts":
/*!*********************************!*\
  !*** ./src/core/BoundingBox.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BoundingBox\": () => (/* binding */ BoundingBox)\n/* harmony export */ });\n/* harmony import */ var _Rect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Rect */ \"./src/core/Rect.ts\");\n/* harmony import */ var _Size__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Size */ \"./src/core/Size.ts\");\n/* harmony import */ var _Vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Vector */ \"./src/core/Vector.ts\");\n\n\n\n/**\n * Axis-aligned boudning box (AABB)\n */\nclass BoundingBox {\n    constructor(min = new _Vector__WEBPACK_IMPORTED_MODULE_2__.Vector(), max = new _Vector__WEBPACK_IMPORTED_MODULE_2__.Vector()) {\n        this.min = min;\n        this.max = max;\n    }\n    getCenter() {\n        return this.min.clone().add(this.max).divideScalar(2);\n    }\n    getSize() {\n        const width = this.max.x - this.min.x;\n        const height = this.max.y - this.min.y;\n        const size = new _Size__WEBPACK_IMPORTED_MODULE_1__.Size(width, height);\n        return size;\n    }\n    round() {\n        this.min.round();\n        this.max.round();\n        return this;\n    }\n    equals(other) {\n        return this.min.equals(other.min) && this.max.equals(other.max);\n    }\n    distanceCenterToCenter(other) {\n        return this.getCenter().distanceTo(other.getCenter());\n    }\n    minkowskiSum(other) {\n        const otherWidth = other.max.x - other.min.x;\n        const otherHeight = other.max.y - other.min.y;\n        const minX = this.min.x - otherWidth / 2;\n        const maxX = this.max.x + otherWidth / 2;\n        const minY = this.min.y - otherHeight / 2;\n        const maxY = this.max.y + otherHeight / 2;\n        this.min.set(minX, minY);\n        this.max.set(maxX, maxY);\n        return this;\n    }\n    intersectWith(other) {\n        const minX = Math.max(this.min.x, other.min.x);\n        const maxX = Math.min(this.max.x, other.max.x);\n        const minY = Math.max(this.min.y, other.min.y);\n        const maxY = Math.min(this.max.y, other.max.y);\n        this.min.set(minX, minY);\n        this.max.set(maxX, maxY);\n        return this;\n    }\n    unionWith(...others) {\n        const boxes = [this, ...others];\n        let minX = null;\n        let maxX = null;\n        let minY = null;\n        let maxY = null;\n        for (const box of boxes) {\n            if (minX === null || box.min.x < minX) {\n                minX = box.min.x;\n            }\n            if (maxX === null || box.max.x > maxX) {\n                maxX = box.max.x;\n            }\n            if (minY === null || box.min.y < minY) {\n                minY = box.min.y;\n            }\n            if (maxY === null || box.max.y > maxY) {\n                maxY = box.max.y;\n            }\n        }\n        this.min.set(minX, minY);\n        this.max.set(maxX, maxY);\n        return this;\n    }\n    intersectsBox(other) {\n        return (this.min.x < other.max.x &&\n            this.max.x > other.min.x &&\n            this.min.y < other.max.y &&\n            this.max.y > other.min.y);\n    }\n    containsPoint(p) {\n        const isOutside = this.max.x <= p.x ||\n            this.min.x >= p.x ||\n            this.max.y <= p.y ||\n            this.min.y >= p.y;\n        return !isOutside;\n    }\n    clone() {\n        return new BoundingBox(this.min.clone(), this.max.clone());\n    }\n    toRect() {\n        return new _Rect__WEBPACK_IMPORTED_MODULE_0__.Rect(this.min.x, this.min.y, this.max.x - this.min.x, this.max.y - this.min.y);\n    }\n    fromPoints(points) {\n        if (points.length === 0) {\n            return this;\n        }\n        this.min.copyFrom(points[0]);\n        this.max.copyFrom(points[0]);\n        for (const point of points) {\n            if (point.x < this.min.x) {\n                this.min.x = point.x;\n            }\n            if (point.x > this.max.x) {\n                this.max.x = point.x;\n            }\n            if (point.y < this.min.y) {\n                this.min.y = point.y;\n            }\n            if (point.y > this.max.y) {\n                this.max.y = point.y;\n            }\n        }\n        return this;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/BoundingBox.ts?");

/***/ }),

/***/ "./src/core/GameLoop.ts":
/*!******************************!*\
  !*** ./src/core/GameLoop.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameLoop\": () => (/* binding */ GameLoop)\n/* harmony export */ });\n/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Subject */ \"./src/core/Subject.ts\");\n\nconst DEFAULT_OPTIONS = {\n    deltaTimeLimit: 1,\n    // requestAnimationFrame is usually 60 fps; in seconds\n    fps: 60,\n};\nvar State;\n(function (State) {\n    State[State[\"Idle\"] = 0] = \"Idle\";\n    State[State[\"Working\"] = 1] = \"Working\";\n    State[State[\"StopRequested\"] = 2] = \"StopRequested\";\n})(State || (State = {}));\nclass GameLoop {\n    constructor(options = {}) {\n        this.tick = new _Subject__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.lastTimestamp = null;\n        this.requestedStop = false;\n        this.state = State.Idle;\n        this.loop = (timestamp = null) => {\n            if (this.state === State.Idle) {\n                return;\n            }\n            if (this.state === State.StopRequested) {\n                this.state = State.Idle;\n                return;\n            }\n            const idealDeltaTime = this.getIdealDeltaTime();\n            // For the very first run loop() is called from the code and timestamp is\n            // not known. On the second call loop() is called by requestAnimationFrame,\n            // which also provides a timestamp.\n            // Use ideal fixed delta value for the first run.\n            let deltaTime = idealDeltaTime;\n            if (timestamp !== null) {\n                // Timestamp is originally in milliseconds, convert to seconds\n                deltaTime = (timestamp - this.lastTimestamp) / 1000;\n                // If delta is too large, we must have resumed from stop() or breakpoint.\n                // Use ideal default delta only for this frame.\n                if (deltaTime > this.options.deltaTimeLimit) {\n                    deltaTime = idealDeltaTime;\n                }\n            }\n            this.lastTimestamp = timestamp;\n            this.tick.notify({ deltaTime });\n            window.requestAnimationFrame(this.loop);\n        };\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    }\n    start() {\n        if (this.state !== State.Idle) {\n            return;\n        }\n        this.state = State.Working;\n        this.loop();\n    }\n    // WARNING: a couple of already queued callbacks might still fire after stop\n    stop() {\n        if (this.state !== State.Working) {\n            return;\n        }\n        this.state = State.StopRequested;\n    }\n    // For manual stepping over frames when loop is paused\n    next(ticks = 1) {\n        for (let i = 0; i < ticks; i += 1) {\n            this.tick.notify({ deltaTime: this.getIdealDeltaTime() });\n        }\n    }\n    getIdealDeltaTime() {\n        return 1 / this.options.fps;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/GameLoop.ts?");

/***/ }),

/***/ "./src/core/GameObject.ts":
/*!********************************!*\
  !*** ./src/core/GameObject.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameObject\": () => (/* binding */ GameObject)\n/* harmony export */ });\n/* harmony import */ var _RenderObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RenderObject */ \"./src/core/RenderObject.ts\");\n\nclass GameObject extends _RenderObject__WEBPACK_IMPORTED_MODULE_0__.RenderObject {\n    constructor() {\n        super(...arguments);\n        this.tags = [];\n        this.needsSetup = true;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-explicit-any\n    invokeUpdate(...args) {\n        if (this.needsSetup === true) {\n            this.needsSetup = false;\n            this.setup(...args);\n            this.updateMatrix();\n            this.updateWorldVisible(true);\n            this.updateWorldZIndex(true);\n        }\n        this.update(...args);\n    }\n    hasBeenSetup() {\n        return !this.needsSetup;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-explicit-any\n    setup(...args) {\n        return undefined;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-explicit-any\n    update(...args) {\n        return undefined;\n    }\n    resetNeedsPaint() {\n        // Don't reset paint status until setup\n        if (this.needsSetup === true) {\n            return;\n        }\n        super.resetNeedsPaint();\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/GameObject.ts?");

/***/ }),

/***/ "./src/core/GameRenderer.ts":
/*!**********************************!*\
  !*** ./src/core/GameRenderer.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameRenderer\": () => (/* binding */ GameRenderer)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./render */ \"./src/core/render/index.ts\");\n/* harmony import */ var _Vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Vector */ \"./src/core/Vector.ts\");\n\n\nconst DEFAULT_OPTIONS = {\n    debug: false,\n    dirtyPassCount: 2,\n    height: 640,\n    width: 640,\n};\nclass GameRenderer {\n    constructor(options = {}) {\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n        this.canvas = document.createElement('canvas');\n        this.canvas.width = options.width;\n        this.canvas.height = options.height;\n        this.context = new _render__WEBPACK_IMPORTED_MODULE_0__.CanvasRenderContext(this.canvas);\n        this.context.init();\n    }\n    getDomElement() {\n        return this.canvas;\n    }\n    getScale() {\n        const targetSize = new _Vector__WEBPACK_IMPORTED_MODULE_1__.Vector(this.canvas.width, this.canvas.height);\n        const actualSize = new _Vector__WEBPACK_IMPORTED_MODULE_1__.Vector(this.canvas.clientWidth, this.canvas.clientHeight);\n        const scale = targetSize.clone().divide(actualSize);\n        return scale;\n    }\n    render(root) {\n        // Update all world matrixes for all objects in the tree.\n        root.updateWorldMatrix(false, true);\n        this.clearBox(root.getWorldBoundingBox());\n        const objects = root.flatten();\n        // Sort object by z-index before rendering they will be rendered in\n        // right order\n        const zSortedObjects = objects.sort((a, b) => {\n            return a.getWorldZIndex() - b.getWorldZIndex();\n        });\n        zSortedObjects.forEach((object) => {\n            this.renderObject(object);\n        });\n    }\n    smartRender(root) {\n        // Update all world matrixes for all objects in the tree.\n        // Note: only objects that actually need an update will recalculate their\n        // matrix, thanks to dirty flag.\n        root.updateWorldMatrix(false, true);\n        const objects = [];\n        // Move all objects into an array\n        root.traverse((object) => {\n            // Root is handled separately later on, because root is a scene root.\n            if (object === root) {\n                return;\n            }\n            objects.push(object);\n            // Some objects might have been removed. We need to re-render the area\n            // they were removed at.\n            // Each object stores a list of children that have been removed.\n            // Retrieve them and then clear the list for the next frame.\n            if (object.removedChildren.length > 0) {\n                objects.push(...object.removedChildren);\n                object.cleanupRemoved();\n            }\n        });\n        let wasRootCleared = false;\n        // If scene root needs to repaint, means that entire scene needs to repaint.\n        // In that case we simply clear the enitre screen.\n        if (root.doesNeedPaint()) {\n            this.clearBox(root.getWorldBoundingBox());\n            root.resetNeedsPaint();\n            wasRootCleared = true;\n            // In case some object have been marked as dirty, skip this info,\n            // because we are clearing entire screen anyway, so this info does not\n            // transition into next frame.\n            for (const object of objects) {\n                object.resetPrevDirtyBox();\n            }\n        }\n        // Objects that will be painted\n        const dirtyObjects = [];\n        // If entire scene was cleared - all objects must be rendered\n        if (wasRootCleared) {\n            dirtyObjects.push(...objects);\n        }\n        else {\n            // Otherwise, we need to find which objects need re-paint for any reason\n            // like animation, movement or visibility change.\n            // Bounding boxes that will be cleared\n            const dirtyBoxes = [];\n            for (const object of objects) {\n                const box = object.getWorldBoundingBox();\n                // In case object in renderable and wants to repaint\n                if (object.canRender() && object.doesNeedPaint()) {\n                    dirtyObjects.push(object);\n                    dirtyBoxes.push(box);\n                }\n                // In case object has marked his previous bounding box (his previous\n                // position) as dirty and he wants it to be cleared as well.\n                const prevBox = object.getPrevDirtyBox();\n                if (prevBox !== null) {\n                    dirtyBoxes.push(prevBox);\n                    object.resetPrevDirtyBox();\n                }\n            }\n            // At this moment we collected all objects who wanted to repaint and\n            // their current and previous boxes that need clearing.\n            // But these objects might overlap with other object who did not want\n            // to repaint, but because dirty object touch them, they need to be\n            // repaint as well.\n            // Each time we find new overlaped objects, they become dirty and need\n            // re-paint like the original ones. But new dirty objects might now touch\n            // other resting objects as well. So this becomes a cycle of multiple\n            // passes to ensure that all touching objects are marked as dirty.\n            // For now, during testing, the number of passes is hardcoded as it seem\n            // to cover all cases.\n            for (let i = 0; i < this.options.dirtyPassCount; i += 1) {\n                // Note: arrays will be populated by reference\n                this.findIntersectionBoxes(objects, dirtyBoxes, dirtyObjects);\n            }\n            // Clear all dirty boxes\n            for (const dirtyBox of dirtyBoxes) {\n                this.clearBox(dirtyBox);\n            }\n        }\n        // Sort object by z-index before rendering they will be rendered in\n        // right order\n        const zSortedObjects = dirtyObjects.sort((a, b) => {\n            return a.getWorldZIndex() - b.getWorldZIndex();\n        });\n        zSortedObjects.forEach((object) => {\n            this.renderObject(object);\n        });\n    }\n    renderObject(renderObject) {\n        if (this.options.debug) {\n            this.renderDebugBox(renderObject.getWorldBoundingBox());\n        }\n        if (!renderObject.canRender()) {\n            return;\n        }\n        if (renderObject.isRemoved) {\n            return;\n        }\n        renderObject.painter.paint(this.context, renderObject);\n        renderObject.resetNeedsPaint();\n    }\n    findIntersectionBoxes(objects, dirtyBoxes, dirtyObjects) {\n        // Walk over all available objects\n        for (const object of objects) {\n            // Only check the ones that are renderable\n            if (!object.canRender()) {\n                continue;\n            }\n            // Object is already marked\n            if (object.doesNeedPaint()) {\n                continue;\n            }\n            const box = object.getWorldBoundingBox();\n            // Check if object intersects any dirty box\n            for (const dirtyBox of dirtyBoxes) {\n                // Make sure object is not in the list already\n                if (box.intersectsBox(dirtyBox) && !dirtyObjects.includes(object)) {\n                    dirtyObjects.push(object);\n                    dirtyBoxes.push(box);\n                    break;\n                }\n            }\n        }\n    }\n    clearBox(box) {\n        this.context.clearRect(Math.round(box.min.x), Math.round(box.min.y), box.max.x - box.min.x, box.max.y - box.min.y);\n    }\n    renderDebugBox(box, color = '#fff') {\n        this.context.strokeRect(box.min.x, box.min.y, box.max.x - box.min.x, box.max.y - box.min.y, color);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/GameRenderer.ts?");

/***/ }),

/***/ "./src/core/Image.ts":
/*!***************************!*\
  !*** ./src/core/Image.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Image\": () => (/* binding */ Image)\n/* harmony export */ });\n/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Subject */ \"./src/core/Subject.ts\");\n\n/**\n * Image represents entire image file, which might also be a spritesheet.\n * In case with spritesheets - one image may be reused a number of times.\n * Should be used to create Sprites.\n */\nclass Image {\n    constructor(imageElement) {\n        this.loaded = new _Subject__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.error = new _Subject__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.handleLoaded = () => {\n            this.loaded.notify(null);\n            this.detachListeners();\n        };\n        this.handleError = () => {\n            this.error.notify(new Error(`ImageLoader: Failed to load ${this.imageElement.src}`));\n            this.detachListeners();\n        };\n        this.imageElement = imageElement;\n        this.attachListeners();\n    }\n    getElement() {\n        return this.imageElement;\n    }\n    getWidth() {\n        return this.imageElement.naturalWidth;\n    }\n    getHeight() {\n        return this.imageElement.naturalHeight;\n    }\n    isLoaded() {\n        return this.imageElement.complete;\n    }\n    attachListeners() {\n        this.imageElement.addEventListener('load', this.handleLoaded);\n        this.imageElement.addEventListener('error', this.handleError);\n    }\n    detachListeners() {\n        this.imageElement.removeEventListener('load', this.handleLoaded);\n        this.imageElement.removeEventListener('error', this.handleError);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/Image.ts?");

/***/ }),

/***/ "./src/core/LocalStorage.ts":
/*!**********************************!*\
  !*** ./src/core/LocalStorage.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LocalStorage\": () => (/* binding */ LocalStorage)\n/* harmony export */ });\nclass LocalStorage {\n    constructor(namespace) {\n        this.cache = {};\n        this.namespace = namespace;\n    }\n    set(key, value) {\n        this.cache[key] = value;\n    }\n    get(key) {\n        return this.cache[key];\n    }\n    load() {\n        // Returns null if key does no exist\n        const json = window.localStorage.getItem(this.namespace);\n        let data;\n        try {\n            data = JSON.parse(json);\n        }\n        catch (err) {\n            // Ignore error\n        }\n        // In case there is something else stored in that namespace\n        if (typeof data !== 'object' || data === null) {\n            data = {};\n        }\n        this.cache = data;\n    }\n    save() {\n        const json = JSON.stringify(this.cache);\n        window.localStorage.setItem(this.namespace, json);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/LocalStorage.ts?");

/***/ }),

/***/ "./src/core/Logger.ts":
/*!****************************!*\
  !*** ./src/core/Logger.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LogLevel\": () => (/* binding */ LogLevel),\n/* harmony export */   \"Logger\": () => (/* binding */ Logger)\n/* harmony export */ });\n/* eslint-disable @typescript-eslint/no-explicit-any */\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"Debug\"] = 1] = \"Debug\";\n    LogLevel[LogLevel[\"Info\"] = 2] = \"Info\";\n    LogLevel[LogLevel[\"Warn\"] = 3] = \"Warn\";\n    LogLevel[LogLevel[\"Error\"] = 4] = \"Error\";\n    LogLevel[LogLevel[\"None\"] = 5] = \"None\";\n})(LogLevel || (LogLevel = {}));\nclass Logger {\n    constructor(tag = '', level = LogLevel.Error) {\n        this.warn = (...args) => {\n            if (this.level > LogLevel.Warn) {\n                return;\n            }\n            console.warn(...this.composeArgs(...args));\n        };\n        this.error = (...args) => {\n            if (this.level > LogLevel.Error) {\n                return;\n            }\n            console.error(...this.composeArgs(...args));\n        };\n        this.time = (mark) => {\n            console.time(`${this.tag} ${mark}`);\n        };\n        this.timeEnd = (mark) => {\n            console.timeEnd(`${this.tag} ${mark}`);\n        };\n        this.tag = tag ? `[${tag}]` : '';\n        this.level = level;\n    }\n    setLevel(level) {\n        this.level = level;\n        return this;\n    }\n    debug(...args) {\n        // TODO: check for prod build\n        if (this.level > LogLevel.Debug) {\n            return;\n        }\n        console.log(...this.composeArgs(...args));\n    }\n    info(...args) {\n        if (this.level > LogLevel.Info) {\n            return;\n        }\n        console.log(...this.composeArgs(...args));\n    }\n    /**\n     * First argument to console.log-like methods supports formatting like %s.\n     * Check if it is a string and append custom tag to it.\n     */\n    composeArgs(message, ...optionalParams) {\n        const args = [];\n        if (typeof message === 'string') {\n            const taggedMessage = `${this.tag} ${message}`;\n            args.push(taggedMessage);\n        }\n        else {\n            args.push(this.tag, message);\n        }\n        args.push(...optionalParams);\n        return args;\n    }\n}\nLogger.Level = LogLevel;\n\n\n//# sourceURL=webpack:///./src/core/Logger.ts?");

/***/ }),

/***/ "./src/core/Matrix3.ts":
/*!*****************************!*\
  !*** ./src/core/Matrix3.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Matrix3\": () => (/* binding */ Matrix3)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/core/utils/index.ts\");\n\n// References:\n// https://github.com/mrdoob/three.js/blob/master/src/math/Matrix3.js\n// https://github.com/mrdoob/three.js/blob/master/src/math/Matrix4.js\nclass Matrix3 {\n    constructor() {\n        this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    }\n    set(e11, e12, e13, e21, e22, e23, e31, e32, e33) {\n        const e = this.elements;\n        e[0] = e11;\n        e[1] = e12;\n        e[2] = e13;\n        e[3] = e21;\n        e[4] = e22;\n        e[5] = e23;\n        e[6] = e31;\n        e[7] = e32;\n        e[8] = e33;\n        return this;\n    }\n    applyToVector(v) {\n        const x = v.x;\n        const y = v.y;\n        const z = 1;\n        const e = this.elements;\n        // Using row vector convention\n        v.x = x * e[0] + y * e[3] + z * e[6];\n        v.y = x * e[1] + y * e[4] + z * e[7];\n        return v;\n    }\n    premultiply(m) {\n        return this.multiplyMatrices(m, this);\n    }\n    multiply(m) {\n        return this.multiplyMatrices(this, m);\n    }\n    multiplyMatrices(a, b) {\n        const ae = a.elements;\n        const a11 = ae[0];\n        const a12 = ae[1];\n        const a13 = ae[2];\n        const a21 = ae[3];\n        const a22 = ae[4];\n        const a23 = ae[5];\n        const a31 = ae[6];\n        const a32 = ae[7];\n        const a33 = ae[8];\n        const be = b.elements;\n        const b11 = be[0];\n        const b12 = be[1];\n        const b13 = be[2];\n        const b21 = be[3];\n        const b22 = be[4];\n        const b23 = be[5];\n        const b31 = be[6];\n        const b32 = be[7];\n        const b33 = be[8];\n        const e = this.elements;\n        e[0] = a11 * b11 + a12 * b21 + a13 * b31;\n        e[1] = a11 * b12 + a12 * b22 + a13 * b32;\n        e[2] = a11 * b13 + a12 * b23 + a13 * b33;\n        e[3] = a21 * b11 + a22 * b21 + a23 * b31;\n        e[4] = a21 * b12 + a22 * b22 + a23 * b32;\n        e[5] = a21 * b13 + a22 * b23 + a23 * b33;\n        e[6] = a31 * b11 + a32 * b21 + a33 * b31;\n        e[7] = a31 * b12 + a32 * b22 + a33 * b32;\n        e[8] = a31 * b13 + a32 * b23 + a33 * b33;\n        return this;\n    }\n    multiplyScalar(s) {\n        const e = this.elements;\n        e[0] *= s;\n        e[1] *= s;\n        e[2] *= s;\n        e[3] *= s;\n        e[4] *= s;\n        e[5] *= s;\n        e[6] *= s;\n        e[7] *= s;\n        e[8] *= s;\n        return this;\n    }\n    invert() {\n        const d = this.getDeterminant();\n        if (d === 0) {\n            throw new Error('Determinant is 0, cant invert');\n        }\n        const i = this.getCofactors()\n            .transpose()\n            .multiplyScalar(1 / d);\n        this.copyFrom(i);\n        return this;\n    }\n    getMinors() {\n        const e = this.elements;\n        const e11 = e[0];\n        const e12 = e[1];\n        const e13 = e[2];\n        const e21 = e[3];\n        const e22 = e[4];\n        const e23 = e[5];\n        const e31 = e[6];\n        const e32 = e[7];\n        const e33 = e[8];\n        // Minors\n        const m11 = e22 * e33 - e23 * e32;\n        const m12 = e21 * e33 - e23 * e31;\n        const m13 = e21 * e32 - e22 * e31;\n        const m21 = e12 * e33 - e13 * e32;\n        const m22 = e11 * e33 - e13 * e31;\n        const m23 = e11 * e32 - e12 * e31;\n        const m31 = e12 * e23 - e13 * e22;\n        const m32 = e11 * e23 - e13 * e21;\n        const m33 = e11 * e22 - e12 * e21;\n        const m = new Matrix3().set(m11, m12, m13, m21, m22, m23, m31, m32, m33);\n        return m;\n    }\n    getCofactors() {\n        const m = this.getMinors();\n        const me = m.elements;\n        const c = new Matrix3().set(me[0], me[1] * -1, me[2], me[3] * -1, me[4], me[5] * -1, me[6], me[7] * -1, me[8]);\n        return c;\n    }\n    getDeterminant() {\n        const e = this.elements;\n        const e11 = e[0];\n        const e12 = e[1];\n        const e13 = e[2];\n        const e21 = e[3];\n        const e22 = e[4];\n        const e23 = e[5];\n        const e31 = e[6];\n        const e32 = e[7];\n        const e33 = e[8];\n        const d1 = e11 * (e22 * e33 - e23 * e32);\n        const d2 = e12 * (e21 * e33 - e23 * e31);\n        const d3 = e13 * (e21 * e32 - e22 * e31);\n        const d = d1 - d2 + d3;\n        return d;\n    }\n    transpose() {\n        const e = this.elements;\n        const a11 = e[0];\n        const a12 = e[1];\n        const a13 = e[2];\n        const a21 = e[3];\n        const a22 = e[4];\n        const a23 = e[5];\n        const a31 = e[6];\n        const a32 = e[7];\n        const a33 = e[8];\n        e[0] = a11;\n        e[1] = a21;\n        e[2] = a31;\n        e[3] = a12;\n        e[4] = a22;\n        e[5] = a32;\n        e[6] = a13;\n        e[7] = a23;\n        e[8] = a33;\n        return this;\n    }\n    copyFrom(m) {\n        this.fromArray(m.elements);\n        return this;\n    }\n    fromArray(array = []) {\n        for (let i = 0; i < 9; i += 1) {\n            this.elements[i] = array[i];\n        }\n        return this;\n    }\n    static createRotation(rotation) {\n        const cos = _utils__WEBPACK_IMPORTED_MODULE_0__.MathUtils.cosDegrees(rotation);\n        const sin = _utils__WEBPACK_IMPORTED_MODULE_0__.MathUtils.sinDegrees(rotation);\n        return new Matrix3().set(cos, sin, 0, -sin, cos, 0, 0, 0, 1);\n    }\n    clone() {\n        return new Matrix3().fromArray(this.elements);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/Matrix3.ts?");

/***/ }),

/***/ "./src/core/MouseInput.ts":
/*!********************************!*\
  !*** ./src/core/MouseInput.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MouseCode\": () => (/* binding */ MouseCode),\n/* harmony export */   \"MouseInput\": () => (/* binding */ MouseInput)\n/* harmony export */ });\nvar MouseCode;\n(function (MouseCode) {\n    MouseCode[MouseCode[\"LeftClick\"] = 0] = \"LeftClick\";\n})(MouseCode || (MouseCode = {}));\nclass MouseInput {\n    constructor() {\n        this.listenedDownCodes = [];\n        this.listenedDownPoints = [];\n        this.downCodes = [];\n        this.downPoints = [];\n        this.holdCodes = [];\n        this.listenedOverPoint = null;\n        this.overPoint = null;\n        this.handleWindowMouseDown = (ev) => {\n            const { button: code } = ev;\n            const rect = ev.target.getBoundingClientRect();\n            const x = ev.clientX - rect.left;\n            const y = ev.clientY - rect.top;\n            if (!this.listenedDownCodes.includes(code)) {\n                this.listenedDownCodes.push(code);\n                this.listenedDownPoints.push({ x, y });\n            }\n        };\n        this.handleWindowMouseUp = (ev) => {\n            const { button: code } = ev;\n            const index = this.listenedDownCodes.indexOf(code);\n            if (index !== -1) {\n                this.listenedDownCodes.splice(index, 1);\n                this.listenedDownPoints.splice(index, 1);\n            }\n        };\n        this.handleWindowMouseMove = (ev) => {\n            const rect = ev.target.getBoundingClientRect();\n            const x = ev.clientX - rect.left;\n            const y = ev.clientY - rect.top;\n            this.listenedOverPoint = { x, y };\n        };\n    }\n    listen(element) {\n        element.addEventListener('mousedown', this.handleWindowMouseDown);\n        element.addEventListener('mouseup', this.handleWindowMouseUp);\n        element.addEventListener('mousemove', this.handleWindowMouseMove);\n    }\n    update(scale) {\n        const codes = this.listenedDownCodes;\n        const points = this.listenedDownPoints;\n        const downCodes = [];\n        const downPoints = [];\n        const holdCodes = [];\n        for (const [index, code] of codes.entries()) {\n            const point = points[index];\n            // Newly pressed key, which was not previously down or hold\n            if (!this.downCodes.includes(code) && !this.holdCodes.includes(code)) {\n                downCodes.push(code);\n                downPoints.push({ x: point.x * scale.x, y: point.y * scale.y });\n            }\n            // Key that was down on previous frame is now considered hold, because\n            // it is still down on current frame.\n            // Hold key continues to be hold.\n            if (this.downCodes.includes(code) || this.holdCodes.includes(code)) {\n                holdCodes.push(code);\n            }\n        }\n        this.downCodes = downCodes;\n        this.downPoints = downPoints;\n        this.holdCodes = holdCodes;\n        if (this.listenedOverPoint) {\n            this.overPoint = {\n                x: this.listenedOverPoint.x * scale.x,\n                y: this.listenedOverPoint.y * scale.y,\n            };\n        }\n    }\n    isDown(code) {\n        return this.downCodes.includes(code);\n    }\n    getDownPoint(code) {\n        const index = this.downCodes.indexOf(code);\n        const point = this.downPoints[index];\n        return point;\n    }\n    getOverPoint() {\n        return this.overPoint;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/MouseInput.ts?");

/***/ }),

/***/ "./src/core/MouseIntersector.ts":
/*!**************************************!*\
  !*** ./src/core/MouseIntersector.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MouseIntersector\": () => (/* binding */ MouseIntersector)\n/* harmony export */ });\nclass MouseIntersector {\n    constructor(mouseInput) {\n        this.mouseInput = mouseInput;\n        this.enterListeners = new Map();\n        this.trapStack = [];\n    }\n    listenEnter(object) {\n        this.enterListeners.set(object, 'out');\n    }\n    resetListeners() {\n        this.enterListeners.clear();\n    }\n    update() {\n        const point = this.mouseInput.getOverPoint();\n        if (!point) {\n            return;\n        }\n        for (const [object, value] of this.enterListeners) {\n            const box = object.getWorldBoundingBox();\n            const isOver = box.containsPoint(point);\n            let nextValue = value;\n            if (value === 'out') {\n                if (isOver) {\n                    nextValue = 'enter';\n                }\n            }\n            else if (value === 'enter') {\n                if (isOver) {\n                    nextValue = 'in';\n                }\n                else {\n                    nextValue = 'out';\n                }\n            }\n            else if (value === 'in') {\n                if (!isOver) {\n                    nextValue = 'leave';\n                }\n            }\n            else if (value === 'leave') {\n                if (isOver) {\n                    nextValue = 'enter';\n                }\n                else {\n                    nextValue = 'out';\n                }\n            }\n            this.enterListeners.set(object, nextValue);\n        }\n    }\n    isDownAt(code, object) {\n        if (!this.mouseInput.isDown(code)) {\n            return false;\n        }\n        if (!this.canActInTrap(object)) {\n            return false;\n        }\n        const point = this.mouseInput.getDownPoint(code);\n        const box = object.getWorldBoundingBox();\n        return box.containsPoint(point);\n    }\n    isEnterAt(object) {\n        if (!this.canActInTrap(object)) {\n            return false;\n        }\n        return this.enterListeners.get(object) === 'enter';\n    }\n    isLeaveAt(object) {\n        return this.enterListeners.get(object) === 'leave';\n    }\n    isInAt(object) {\n        if (!this.canActInTrap(object)) {\n            return false;\n        }\n        return this.enterListeners.get(object) === 'in';\n    }\n    trap(object) {\n        this.trapStack.push(object);\n    }\n    untrap(object) {\n        if (this.trapStack[this.trapStack.length - 1] !== object) {\n            throw new Error('Untrapping something that is not at the end of the stack');\n        }\n        this.trapStack.pop();\n    }\n    canActInTrap(object) {\n        if (this.trapStack.length === 0) {\n            return true;\n        }\n        const lastTrapObject = this.trapStack[this.trapStack.length - 1];\n        return lastTrapObject === object || lastTrapObject.hasChild(object);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/MouseIntersector.ts?");

/***/ }),

/***/ "./src/core/Node.ts":
/*!**************************!*\
  !*** ./src/core/Node.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Node\": () => (/* binding */ Node)\n/* harmony export */ });\nclass Node {\n    constructor() {\n        this.children = [];\n        this.parent = null;\n        this.removedChildren = [];\n        this.isRemoved = false;\n    }\n    // TODO: figure out input type for a child\n    add(...childrenToAdd) {\n        for (const childToAdd of childrenToAdd) {\n            if (childToAdd.parent !== null) {\n                childToAdd.parent.remove(childToAdd, false);\n            }\n            childToAdd.parent = this;\n            this.children.push(childToAdd);\n        }\n        return this;\n    }\n    replaceSelf(replacement) {\n        if (this.parent === null) {\n            return this;\n        }\n        this.parent.remove(this);\n        this.parent.add(replacement);\n        return this;\n    }\n    remove(childToRemove, addToRemoved = true) {\n        const index = this.children.indexOf(childToRemove);\n        if (index === -1) {\n            return false;\n        }\n        if (addToRemoved) {\n            childToRemove.isRemoved = true;\n            this.removedChildren.push(childToRemove);\n        }\n        this.children.splice(index, 1);\n        return true;\n    }\n    removeSelf() {\n        if (this.parent === null) {\n            return this;\n        }\n        this.parent.remove(this);\n        return this;\n    }\n    removeAllChildren() {\n        this.children = [];\n        return this;\n    }\n    cleanupRemoved() {\n        this.removedChildren = [];\n    }\n    traverse(callback) {\n        callback(this);\n        for (const child of this.children) {\n            child.traverse(callback);\n        }\n        return this;\n    }\n    traverseDescedants(callback) {\n        for (const child of this.children) {\n            child.traverse(callback);\n        }\n        return this;\n    }\n    hasChild(childToFind) {\n        let childFound = null;\n        this.traverseDescedants((child) => {\n            if (childFound)\n                return;\n            if (child === childToFind) {\n                childFound = child;\n            }\n        });\n        return childFound !== null;\n    }\n    hasParent(parentToFind) {\n        let parent = this.parent;\n        while (parent !== null) {\n            if (parent === parentToFind) {\n                return true;\n            }\n            parent = parent.parent;\n        }\n        return false;\n    }\n    traverseParents(callback) {\n        const parent = this.parent;\n        if (parent !== null) {\n            callback(parent);\n            parent.traverseParents(callback);\n        }\n        return this;\n    }\n    flatten() {\n        const nodes = [];\n        this.traverse((node) => {\n            nodes.push(node);\n        });\n        return nodes;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/Node.ts?");

/***/ }),

/***/ "./src/core/Painter.ts":
/*!*****************************!*\
  !*** ./src/core/Painter.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Painter\": () => (/* binding */ Painter)\n/* harmony export */ });\nclass Painter {\n}\n\n\n//# sourceURL=webpack:///./src/core/Painter.ts?");

/***/ }),

/***/ "./src/core/Rect.ts":
/*!**************************!*\
  !*** ./src/core/Rect.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Rect\": () => (/* binding */ Rect)\n/* harmony export */ });\n/* harmony import */ var _Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector */ \"./src/core/Vector.ts\");\n\nclass Rect {\n    constructor(x = 0, y = 0, width = 0, height = 0) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    setWidth(width) {\n        this.width = width;\n        return this;\n    }\n    setHeight(height) {\n        this.height = height;\n        return this;\n    }\n    getCenter() {\n        return new _Vector__WEBPACK_IMPORTED_MODULE_0__.Vector(this.x + this.width / 2, this.y + this.height / 2);\n    }\n    intersectsRect(other) {\n        return (this.x < other.x + other.width &&\n            this.x + this.width > other.x &&\n            this.y < other.y + other.height &&\n            this.y + this.height > other.y);\n    }\n    clone() {\n        return new Rect(this.x, this.y, this.width, this.height);\n    }\n    toString() {\n        return `[x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height}]`;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/Rect.ts?");

/***/ }),

/***/ "./src/core/RenderObject.ts":
/*!**********************************!*\
  !*** ./src/core/RenderObject.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RenderObject\": () => (/* binding */ RenderObject)\n/* harmony export */ });\n/* harmony import */ var _Transform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Transform */ \"./src/core/Transform.ts\");\n\nclass RenderObject extends _Transform__WEBPACK_IMPORTED_MODULE_0__.Transform {\n    constructor() {\n        super(...arguments);\n        // TODO: circular reference\n        this.painter = null;\n        // 0 by default\n        // If null - will inherit from parent\n        this.zIndex = null;\n        // Computed, don't change\n        this.worldZIndex = null;\n        // Visible by default\n        // If null - will inherit from parent\n        this.visible = null;\n        // Computed, don't change\n        this.worldVisible = null;\n        this.prevDirtyBox = null;\n        this.needsPaint = true;\n    }\n    canRender() {\n        if (this.painter === null) {\n            return false;\n        }\n        if (this.getWorldVisible() === false) {\n            return false;\n        }\n        return true;\n    }\n    // Visibility\n    setVisible(visible) {\n        this.visible = visible;\n        this.updateWorldVisible(true);\n    }\n    getVisible() {\n        return this.visible;\n    }\n    getWorldVisible() {\n        return this.worldVisible;\n    }\n    updateWorldVisible(updateParents = false) {\n        var _a, _b;\n        if (this.parent !== null && updateParents === true) {\n            this.parent.updateWorldVisible(true);\n        }\n        if (this.parent === null) {\n            this.worldVisible = (_a = this.visible) !== null && _a !== void 0 ? _a : true;\n        }\n        else {\n            this.worldVisible = (_b = this.visible) !== null && _b !== void 0 ? _b : this.parent.worldVisible;\n        }\n        for (const child of this.children) {\n            child.updateWorldVisible();\n        }\n    }\n    // Z-index\n    setZIndex(zIndex) {\n        this.zIndex = zIndex;\n        this.updateWorldZIndex(true);\n    }\n    getZIndex() {\n        return this.zIndex;\n    }\n    getWorldZIndex() {\n        return this.worldZIndex;\n    }\n    updateWorldZIndex(updateParents = false) {\n        var _a, _b;\n        if (this.parent !== null && updateParents === true) {\n            this.parent.updateWorldZIndex(true);\n        }\n        if (this.parent === null) {\n            this.worldZIndex = (_a = this.zIndex) !== null && _a !== void 0 ? _a : 0;\n        }\n        else {\n            this.worldZIndex = (_b = this.zIndex) !== null && _b !== void 0 ? _b : this.parent.worldZIndex;\n        }\n        for (const child of this.children) {\n            child.updateWorldZIndex();\n        }\n    }\n    // Dirty box\n    dirtyPaintBox() {\n        this.prevDirtyBox = this.getWorldBoundingBox().clone();\n        this.needsPaint = true;\n        for (const child of this.children) {\n            child.dirtyPaintBox();\n        }\n    }\n    getPrevDirtyBox() {\n        return this.prevDirtyBox;\n    }\n    resetPrevDirtyBox() {\n        this.prevDirtyBox = null;\n    }\n    // Paint flag\n    setNeedsPaint() {\n        this.needsPaint = true;\n        for (const child of this.children) {\n            child.setNeedsPaint();\n        }\n    }\n    doesNeedPaint() {\n        return this.needsPaint;\n    }\n    resetNeedsPaint() {\n        this.needsPaint = false;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/RenderObject.ts?");

/***/ }),

/***/ "./src/core/Size.ts":
/*!**************************!*\
  !*** ./src/core/Size.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Size\": () => (/* binding */ Size)\n/* harmony export */ });\n/* harmony import */ var _Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector */ \"./src/core/Vector.ts\");\n\nclass Size {\n    constructor(width = 0, height = 0) {\n        this.width = width;\n        this.height = height;\n    }\n    set(width, height) {\n        this.width = width;\n        this.height = height;\n        return this;\n    }\n    setWidth(width) {\n        this.width = width;\n        return this;\n    }\n    setHeight(height) {\n        this.height = height;\n        return this;\n    }\n    copyFrom(size) {\n        this.width = size.width;\n        this.height = size.height;\n        return this;\n    }\n    flip() {\n        const tmp = this.width;\n        this.width = this.height;\n        this.height = tmp;\n        return this;\n    }\n    clone() {\n        return new Size(this.width, this.height);\n    }\n    toVector() {\n        return new _Vector__WEBPACK_IMPORTED_MODULE_0__.Vector(this.width, this.height);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/Size.ts?");

/***/ }),

/***/ "./src/core/Sprite.ts":
/*!****************************!*\
  !*** ./src/core/Sprite.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Sprite\": () => (/* binding */ Sprite)\n/* harmony export */ });\n/* harmony import */ var _Rect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Rect */ \"./src/core/Rect.ts\");\n\n/**\n * Represents a specific fragment of an image by the coordinates.\n * The coordinates will be used by renderer to render the fragment.\n */\nclass Sprite {\n    constructor(image, sourceRect = new _Rect__WEBPACK_IMPORTED_MODULE_0__.Rect(), destinationRect = new _Rect__WEBPACK_IMPORTED_MODULE_0__.Rect()) {\n        this.image = image;\n        this.sourceRect = sourceRect;\n        this.destinationRect = destinationRect;\n    }\n    isImageLoaded() {\n        return this.image.isLoaded();\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/Sprite.ts?");

/***/ }),

/***/ "./src/core/Subject.ts":
/*!*****************************!*\
  !*** ./src/core/Subject.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Subject\": () => (/* binding */ Subject)\n/* harmony export */ });\n/* eslint-disable @typescript-eslint/no-explicit-any */\nclass Subject {\n    constructor() {\n        this.listeners = [];\n        this.notify = (event) => {\n            this.listeners.forEach((listener) => {\n                // TODO: handle errors\n                listener(event);\n            });\n            return this;\n        };\n    }\n    addListener(listenerToAdd) {\n        this.listeners.push(listenerToAdd);\n        const unsubscribe = () => {\n            this.removeListener(listenerToAdd);\n        };\n        return unsubscribe;\n    }\n    addListenerOnce(listenerToAdd) {\n        const wrappedListener = (event) => {\n            this.removeListener(wrappedListener);\n            listenerToAdd(event);\n        };\n        const unsubscribe = this.addListener(wrappedListener);\n        return unsubscribe;\n    }\n    removeListener(listenerToRemove) {\n        this.listeners = this.listeners.filter((listener) => {\n            return listener !== listenerToRemove;\n        });\n        return this;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/Subject.ts?");

/***/ }),

/***/ "./src/core/Timer.ts":
/*!***************************!*\
  !*** ./src/core/Timer.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Timer\": () => (/* binding */ Timer)\n/* harmony export */ });\n/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Subject */ \"./src/core/Subject.ts\");\n\nclass Timer {\n    constructor(timeLeft = null) {\n        this.done = new _Subject__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.timeLeft = null;\n        this.timeLeft = timeLeft;\n    }\n    reset(timeLeft) {\n        this.timeLeft = timeLeft;\n        return this;\n    }\n    stop() {\n        this.timeLeft = null;\n        return this;\n    }\n    update(deltaTime) {\n        if (!this.isActive()) {\n            return;\n        }\n        this.timeLeft -= deltaTime;\n        if (this.timeLeft < 0) {\n            this.timeLeft = null;\n            this.done.notify(null);\n        }\n    }\n    isActive() {\n        return this.timeLeft !== null;\n    }\n    isDone() {\n        return this.timeLeft === null;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/Timer.ts?");

/***/ }),

/***/ "./src/core/Transform.ts":
/*!*******************************!*\
  !*** ./src/core/Transform.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Transform\": () => (/* binding */ Transform)\n/* harmony export */ });\n/* harmony import */ var _BoundingBox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BoundingBox */ \"./src/core/BoundingBox.ts\");\n/* harmony import */ var _Matrix3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Matrix3 */ \"./src/core/Matrix3.ts\");\n/* harmony import */ var _Node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Node */ \"./src/core/Node.ts\");\n/* harmony import */ var _Size__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Size */ \"./src/core/Size.ts\");\n/* harmony import */ var _Vector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Vector */ \"./src/core/Vector.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils */ \"./src/core/utils/index.ts\");\n\n\n\n\n\n\n// Refenreces:\n// https://docs.unity3d.com/ScriptReference/RectTransform.html\n// https://github.com/mrdoob/three.js/blob/dev/src/core/Object3D.js\n// https://github.com/SFML/SFML/blob/master/src/SFML/Graphics/Transformable.cpp\n// http://gameprogrammingpatterns.com/dirty-flag.html\n// https://en.wikipedia.org/wiki/Transformation_matrix\n// https://en.wikipedia.org/wiki/Affine_transformation\n// https://medium.com/swlh/understanding-3d-matrix-transforms-with-pixijs-c76da3f8bd8\n// -1 is because coordinate system start is at top left\nconst X_AXIS = new _Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(1, 0);\nconst Y_AXIS = new _Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(0, -1);\nclass Transform extends _Node__WEBPACK_IMPORTED_MODULE_2__.Node {\n    constructor(width = 0, height = 0) {\n        super();\n        this.size = new _Size__WEBPACK_IMPORTED_MODULE_3__.Size();\n        this.position = new _Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(0, 0);\n        // Values in range [0,1] based on size.\n        this.origin = new _Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(0, 0);\n        // Degrees; clockwise\n        this.rotation = 0;\n        // Pivot for rotation. Values in range [0,1] based on size.\n        this.pivot = new _Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(0, 0);\n        this.matrix = new _Matrix3__WEBPACK_IMPORTED_MODULE_1__.Matrix3();\n        this.worldMatrix = new _Matrix3__WEBPACK_IMPORTED_MODULE_1__.Matrix3();\n        this.boundingBox = new _BoundingBox__WEBPACK_IMPORTED_MODULE_0__.BoundingBox();\n        this.worldBoundingBox = new _BoundingBox__WEBPACK_IMPORTED_MODULE_0__.BoundingBox();\n        this.matrixAutoUpdate = false;\n        this.worldMatrixNeedsUpdate = false;\n        this.size = new _Size__WEBPACK_IMPORTED_MODULE_3__.Size(width, height);\n    }\n    rotate(rotation) {\n        this.rotation = rotation;\n    }\n    // Add child while keeping it's world position.\n    // Modifies attachable object local matrix, position and rotation.\n    attach(target) {\n        // Make sure self tree is up-to-date, because we need a correct world matrix\n        this.updateWorldMatrix(true);\n        // Self object will become a parent for a target object\n        const invSelfWorldTransformMatrix = this.worldMatrix.clone().invert();\n        if (target.parent !== null) {\n            target.parent.updateWorldMatrix(true);\n            invSelfWorldTransformMatrix.premultiply(target.parent.worldMatrix);\n        }\n        // Revert all world transformations of self (new parent) from the target,\n        // so target's local matrix will now be relative to a new parent.\n        target.updateMatrix();\n        target.applyMatrix3(invSelfWorldTransformMatrix);\n        this.add(target);\n        return this;\n    }\n    applyMatrix3(transformMatrix) {\n        if (this.matrixAutoUpdate) {\n            this.updateMatrix();\n        }\n        this.matrix.multiply(transformMatrix);\n        const { rotation, position } = this.decomposeTransformMatrix(this.matrix, this.getPivotOffset(), this.getOriginOffset());\n        this.rotation = rotation;\n        this.position = position;\n    }\n    translateX(distance) {\n        this.translateOnAxis(X_AXIS, distance);\n        return this;\n    }\n    translateY(distance) {\n        this.translateOnAxis(Y_AXIS, distance);\n        return this;\n    }\n    translateOnAxis(axis, distance) {\n        const d = _Matrix3__WEBPACK_IMPORTED_MODULE_1__.Matrix3.createRotation(this.rotation)\n            .applyToVector(axis.clone())\n            .multScalar(distance);\n        this.position.add(d);\n        return this;\n    }\n    getWorldPosition() {\n        const { position: worldPosition } = this.decomposeTransformMatrix(this.worldMatrix, this.getPivotOffset(), this.getOriginOffset());\n        return worldPosition;\n    }\n    getWorldRotation() {\n        const { rotation: worldRotation } = this.decomposeTransformMatrix(this.worldMatrix, this.getPivotOffset(), this.getOriginOffset());\n        return worldRotation;\n    }\n    getCenter() {\n        return this.getBoundingBox().getCenter();\n    }\n    setCenter(v) {\n        const size = this.getBoundingBox().getSize();\n        this.position.set(v.x - size.width / 2, v.y - size.height / 2);\n    }\n    setCenterX(x) {\n        const size = this.getBoundingBox().getSize();\n        this.position.setX(x - size.width / 2);\n    }\n    setCenterY(y) {\n        const size = this.getBoundingBox().getSize();\n        this.position.setY(y - size.height / 2);\n    }\n    getSelfCenter() {\n        return this.size.toVector().divideScalar(2);\n    }\n    getBoundingBox() {\n        if (this.matrixAutoUpdate) {\n            this.updateMatrix();\n        }\n        return this.boundingBox;\n    }\n    getWorldBoundingBox() {\n        this.updateWorldMatrix(true);\n        return this.worldBoundingBox;\n    }\n    getSelfPoints() {\n        const { width, height } = this.size;\n        const points = [\n            new _Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(0, 0),\n            new _Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(width, 0),\n            new _Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(width, height),\n            new _Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(0, height),\n        ];\n        return points;\n    }\n    getPoints() {\n        const selfPoints = this.getSelfPoints();\n        const points = selfPoints.map((point) => {\n            return this.matrix.applyToVector(point);\n        });\n        return points;\n    }\n    getWorldPoints() {\n        const selfPoints = this.getSelfPoints();\n        const points = selfPoints.map((point) => {\n            return this.worldMatrix.applyToVector(point);\n        });\n        return points;\n    }\n    updateMatrix(childrenNeedUpdate = false) {\n        const transformMatrix = this.composeTransformMatrix(this.getPivotOffset(), this.getOriginOffset(), this.rotation, this.position);\n        this.matrix.copyFrom(transformMatrix);\n        this.boundingBox.fromPoints(this.getPoints());\n        this.setWorldMatrixNeedsUpdate(childrenNeedUpdate);\n    }\n    setWorldMatrixNeedsUpdate(updateChildren = false) {\n        this.worldMatrixNeedsUpdate = true;\n        if (updateChildren) {\n            for (const child of this.children) {\n                child.setWorldMatrixNeedsUpdate(updateChildren);\n            }\n        }\n    }\n    updateWorldMatrix(updateParents = false, updateChildren = false) {\n        // Goes up the tree to all parents and updates their local and world matrix.\n        // Note, that it will update all parents starting from the root, before it\n        // continues updating current object.\n        if (updateParents === true && this.parent !== null) {\n            this.parent.updateWorldMatrix(true, false);\n        }\n        // Update current node local matrix\n        if (this.matrixAutoUpdate) {\n            this.updateMatrix();\n        }\n        if (this.worldMatrixNeedsUpdate) {\n            // Update current node world matrix\n            if (this.parent === null) {\n                this.worldMatrix.copyFrom(this.matrix);\n            }\n            else {\n                this.worldMatrix.multiplyMatrices(this.matrix, this.parent.worldMatrix);\n            }\n            this.worldBoundingBox.fromPoints(this.getWorldPoints());\n            this.worldMatrixNeedsUpdate = false;\n        }\n        // Goes down the tree and updates all children local and world matrix\n        if (updateChildren === true) {\n            for (const child of this.children) {\n                child.updateWorldMatrix(false, true);\n            }\n        }\n    }\n    getPivotOffset() {\n        const pivotOffset = new _Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(-this.pivot.x * this.size.width, -this.pivot.y * this.size.height);\n        return pivotOffset;\n    }\n    getOriginOffset() {\n        const originOffset = new _Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(-this.origin.x * this.size.width, -this.origin.y * this.size.height);\n        return originOffset;\n    }\n    /**\n     * P (Pivot offset for rotation around it)\n     *   [1  0  0]\n     *   [0  1  0]\n     *   [px py 1]\n  \n     * R (Rotation)\n     *   [cos -sin 0]\n     *   [sin  cos 0]\n     *   [ 0    0  1]\n     *\n     * -P (Pivot offset cancellation)\n     *   [1    0  0]\n     *   [0    1  0]\n     *   [-px -py 1]\n     *\n     * O (Origin offset for translation around it)\n     *   [1  0  0]\n     *   [0  1  0]\n     *   [ox oy 1]\n     *\n     * T (Translation):\n     *   [1  0  0]\n     *   [0  1  0]\n     *   [tx ty 1]\n     *\n     * All combined into a single transform matrix\n     *\n     *   TM = P * R * (-P) * O * T\n     *\n     * which can be applied to a vector V to transform it:\n     *\n     *   V' = V * TM\n     */\n    composeTransformMatrix(pivotOffset, originOffset, rotation, position) {\n        const pivX = pivotOffset.x;\n        const pivY = pivotOffset.y;\n        const orgX = originOffset.x;\n        const orgY = originOffset.y;\n        const posX = position.x;\n        const posY = position.y;\n        const cos = _utils__WEBPACK_IMPORTED_MODULE_5__.MathUtils.cosDegrees(rotation);\n        const sin = _utils__WEBPACK_IMPORTED_MODULE_5__.MathUtils.sinDegrees(rotation);\n        const tx = pivX * cos - pivY * sin - pivX + orgX + posX;\n        const ty = pivX * sin + pivY * cos - pivY + orgY + posY;\n        const transformMatrix = new _Matrix3__WEBPACK_IMPORTED_MODULE_1__.Matrix3().set(cos, sin, 0, -sin, cos, 0, tx, ty, 1);\n        return transformMatrix;\n    }\n    decomposeTransformMatrix(transformMatrix, pivotOffset, originOffset) {\n        const pivX = pivotOffset.x;\n        const pivY = pivotOffset.y;\n        const orgX = originOffset.x;\n        const orgY = originOffset.y;\n        const cos = transformMatrix.elements[0];\n        const sin = transformMatrix.elements[1];\n        const tx = transformMatrix.elements[6];\n        const ty = transformMatrix.elements[7];\n        let rotation = _utils__WEBPACK_IMPORTED_MODULE_5__.MathUtils.atan2Degrees(sin, cos);\n        if (rotation < 0) {\n            rotation += 360;\n        }\n        const posX = tx - (pivX * cos - pivY * sin - pivX + orgX);\n        const posY = ty - (pivX * sin + pivY * cos - pivY + orgY);\n        const position = new _Vector__WEBPACK_IMPORTED_MODULE_4__.Vector(posX, posY);\n        return {\n            rotation,\n            position,\n        };\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/Transform.ts?");

/***/ }),

/***/ "./src/core/Vector.ts":
/*!****************************!*\
  !*** ./src/core/Vector.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Vector\": () => (/* binding */ Vector)\n/* harmony export */ });\nclass Vector {\n    constructor(x = 0, y = 0) {\n        this.x = x;\n        this.y = y;\n    }\n    set(x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    }\n    setX(x) {\n        this.x = x;\n        return this;\n    }\n    setY(y) {\n        this.y = y;\n        return this;\n    }\n    add(v) {\n        this.x += v.x;\n        this.y += v.y;\n        return this;\n    }\n    addX(x) {\n        this.x += x;\n        return this;\n    }\n    addY(y) {\n        this.y += y;\n        return this;\n    }\n    addScalar(s) {\n        this.x += s;\n        this.y += s;\n        return this;\n    }\n    sub(v) {\n        this.x -= v.x;\n        this.y -= v.y;\n        return this;\n    }\n    subX(x) {\n        this.x -= x;\n        return this;\n    }\n    subY(y) {\n        this.y -= y;\n        return this;\n    }\n    divide(v) {\n        this.x /= v.x;\n        this.y /= v.y;\n        return this;\n    }\n    divideScalar(s) {\n        this.x /= s;\n        this.y /= s;\n        return this;\n    }\n    mult(v) {\n        this.x *= v.x;\n        this.y *= v.y;\n        return this;\n    }\n    multScalar(s) {\n        this.x *= s;\n        this.y *= s;\n        return this;\n    }\n    round() {\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        return this;\n    }\n    length() {\n        return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\n    }\n    normalize() {\n        const length = this.length() || 1; // In case length is zero\n        this.divideScalar(length);\n        return this;\n    }\n    distanceTo(v) {\n        const dx = this.x - v.x;\n        const dy = this.y - v.y;\n        const distance = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n        return distance;\n    }\n    negate() {\n        this.x = -this.x;\n        this.y = -this.y;\n        return this;\n    }\n    copyFrom(v) {\n        this.x = v.x;\n        this.y = v.y;\n        return this;\n    }\n    snapX(step = 1) {\n        this.x = Math.round(this.x / step) * step;\n        return this;\n    }\n    snapY(step = 1) {\n        this.y = Math.round(this.y / step) * step;\n        return this;\n    }\n    dot(v) {\n        return this.x * v.x + this.y * v.y;\n    }\n    cross(v) {\n        return this.x * v.y - this.y * v.x;\n    }\n    equals(v) {\n        return this.x === v.x && this.y === v.y;\n    }\n    clone() {\n        return new Vector(this.x, this.y);\n    }\n    static fromArray(array) {\n        return new Vector(array[0], array[1]);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/Vector.ts?");

/***/ }),

/***/ "./src/core/index.ts":
/*!***************************!*\
  !*** ./src/core/index.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ImageLoader\": () => (/* reexport safe */ _loaders__WEBPACK_IMPORTED_MODULE_0__.ImageLoader),\n/* harmony export */   \"SpriteLoader\": () => (/* reexport safe */ _loaders__WEBPACK_IMPORTED_MODULE_0__.SpriteLoader),\n/* harmony export */   \"RectPainter\": () => (/* reexport safe */ _painters__WEBPACK_IMPORTED_MODULE_1__.RectPainter),\n/* harmony export */   \"SpriteAlignment\": () => (/* reexport safe */ _painters__WEBPACK_IMPORTED_MODULE_1__.SpriteAlignment),\n/* harmony export */   \"SpritePainter\": () => (/* reexport safe */ _painters__WEBPACK_IMPORTED_MODULE_1__.SpritePainter),\n/* harmony export */   \"TextAlignment\": () => (/* reexport safe */ _painters__WEBPACK_IMPORTED_MODULE_1__.TextAlignment),\n/* harmony export */   \"TextPainter\": () => (/* reexport safe */ _painters__WEBPACK_IMPORTED_MODULE_1__.TextPainter),\n/* harmony export */   \"Scene\": () => (/* reexport safe */ _scene__WEBPACK_IMPORTED_MODULE_2__.Scene),\n/* harmony export */   \"SceneRouter\": () => (/* reexport safe */ _scene__WEBPACK_IMPORTED_MODULE_2__.SceneRouter),\n/* harmony export */   \"Animation\": () => (/* reexport safe */ _Animation__WEBPACK_IMPORTED_MODULE_3__.Animation),\n/* harmony export */   \"GameLoop\": () => (/* reexport safe */ _GameLoop__WEBPACK_IMPORTED_MODULE_4__.GameLoop),\n/* harmony export */   \"GameRenderer\": () => (/* reexport safe */ _GameRenderer__WEBPACK_IMPORTED_MODULE_5__.GameRenderer),\n/* harmony export */   \"GameObject\": () => (/* reexport safe */ _GameObject__WEBPACK_IMPORTED_MODULE_6__.GameObject),\n/* harmony export */   \"LocalStorage\": () => (/* reexport safe */ _LocalStorage__WEBPACK_IMPORTED_MODULE_7__.LocalStorage),\n/* harmony export */   \"LogLevel\": () => (/* reexport safe */ _Logger__WEBPACK_IMPORTED_MODULE_8__.LogLevel),\n/* harmony export */   \"Logger\": () => (/* reexport safe */ _Logger__WEBPACK_IMPORTED_MODULE_8__.Logger),\n/* harmony export */   \"MouseCode\": () => (/* reexport safe */ _MouseInput__WEBPACK_IMPORTED_MODULE_9__.MouseCode),\n/* harmony export */   \"MouseInput\": () => (/* reexport safe */ _MouseInput__WEBPACK_IMPORTED_MODULE_9__.MouseInput),\n/* harmony export */   \"MouseIntersector\": () => (/* reexport safe */ _MouseIntersector__WEBPACK_IMPORTED_MODULE_10__.MouseIntersector),\n/* harmony export */   \"Rect\": () => (/* reexport safe */ _Rect__WEBPACK_IMPORTED_MODULE_11__.Rect),\n/* harmony export */   \"Sprite\": () => (/* reexport safe */ _Sprite__WEBPACK_IMPORTED_MODULE_12__.Sprite),\n/* harmony export */   \"Subject\": () => (/* reexport safe */ _Subject__WEBPACK_IMPORTED_MODULE_13__.Subject),\n/* harmony export */   \"Timer\": () => (/* reexport safe */ _Timer__WEBPACK_IMPORTED_MODULE_14__.Timer)\n/* harmony export */ });\n/* harmony import */ var _loaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loaders */ \"./src/core/loaders/index.ts\");\n/* harmony import */ var _painters__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./painters */ \"./src/core/painters/index.ts\");\n/* harmony import */ var _scene__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scene */ \"./src/core/scene/index.ts\");\n/* harmony import */ var _Animation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Animation */ \"./src/core/Animation.ts\");\n/* harmony import */ var _GameLoop__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./GameLoop */ \"./src/core/GameLoop.ts\");\n/* harmony import */ var _GameRenderer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./GameRenderer */ \"./src/core/GameRenderer.ts\");\n/* harmony import */ var _GameObject__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./GameObject */ \"./src/core/GameObject.ts\");\n/* harmony import */ var _LocalStorage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./LocalStorage */ \"./src/core/LocalStorage.ts\");\n/* harmony import */ var _Logger__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Logger */ \"./src/core/Logger.ts\");\n/* harmony import */ var _MouseInput__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./MouseInput */ \"./src/core/MouseInput.ts\");\n/* harmony import */ var _MouseIntersector__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./MouseIntersector */ \"./src/core/MouseIntersector.ts\");\n/* harmony import */ var _Rect__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Rect */ \"./src/core/Rect.ts\");\n/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Sprite */ \"./src/core/Sprite.ts\");\n/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./Subject */ \"./src/core/Subject.ts\");\n/* harmony import */ var _Timer__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./Timer */ \"./src/core/Timer.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack:///./src/core/index.ts?");

/***/ }),

/***/ "./src/core/loaders/ImageLoader.ts":
/*!*****************************************!*\
  !*** ./src/core/loaders/ImageLoader.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ImageLoader\": () => (/* binding */ ImageLoader)\n/* harmony export */ });\n/* harmony import */ var _Image__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Image */ \"./src/core/Image.ts\");\n/* harmony import */ var _Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Logger */ \"./src/core/Logger.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\nclass ImageLoader {\n    constructor() {\n        this.log = new _Logger__WEBPACK_IMPORTED_MODULE_1__.Logger(ImageLoader.name, _Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Level.None);\n        this.images = new Map();\n    }\n    load(filePath) {\n        if (this.images.has(filePath)) {\n            return this.images.get(filePath);\n        }\n        const imageElement = new window.Image();\n        const image = new _Image__WEBPACK_IMPORTED_MODULE_0__.Image(imageElement);\n        image.loaded.addListenerOnce(() => {\n            this.log.debug('Loaded \"%s\"', filePath);\n        });\n        image.error.addListenerOnce(() => {\n            this.log.error('Failed to load \"%s\"', filePath);\n        });\n        imageElement.src = filePath;\n        this.images.set(filePath, image);\n        return image;\n    }\n    loadAsync(path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve) => {\n                const image = this.load(path);\n                if (image.isLoaded()) {\n                    resolve(image);\n                }\n                else {\n                    image.loaded.addListenerOnce(() => {\n                        resolve(image);\n                    });\n                }\n            });\n        });\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/loaders/ImageLoader.ts?");

/***/ }),

/***/ "./src/core/loaders/SpriteLoader.ts":
/*!******************************************!*\
  !*** ./src/core/loaders/SpriteLoader.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SpriteLoader\": () => (/* binding */ SpriteLoader)\n/* harmony export */ });\n/* harmony import */ var _Rect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Rect */ \"./src/core/Rect.ts\");\n/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Sprite */ \"./src/core/Sprite.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\nconst DEFAULT_OPTIONS = {\n    scale: 1,\n};\nclass SpriteLoader {\n    constructor(imageLoader, manifest, options = {}) {\n        this.imageLoader = imageLoader;\n        this.manifest = manifest;\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    }\n    load(id, argDestinationRect) {\n        const item = this.manifest[id];\n        if (item === undefined) {\n            throw new Error(`Invalid sprite id = \"${id}\"`);\n        }\n        const { file: filePath, rect: sourceRectValues } = item;\n        const image = this.imageLoader.load(filePath);\n        const sourceRect = new _Rect__WEBPACK_IMPORTED_MODULE_0__.Rect(...sourceRectValues);\n        const defaultDestinationRect = new _Rect__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, sourceRect.width * this.options.scale, sourceRect.height * this.options.scale);\n        const destinationRect = argDestinationRect !== null && argDestinationRect !== void 0 ? argDestinationRect : defaultDestinationRect;\n        const sprite = new _Sprite__WEBPACK_IMPORTED_MODULE_1__.Sprite(image, sourceRect, destinationRect);\n        return sprite;\n    }\n    loadAsync(id, destinationRect = new _Rect__WEBPACK_IMPORTED_MODULE_0__.Rect()) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve, reject) => {\n                const sprite = this.load(id, destinationRect);\n                if (sprite.image.isLoaded()) {\n                    resolve(sprite);\n                }\n                else {\n                    sprite.image.loaded.addListenerOnce(() => {\n                        resolve(sprite);\n                    });\n                    sprite.image.error.addListenerOnce((err) => {\n                        reject(err);\n                    });\n                }\n            });\n        });\n    }\n    loadList(ids, argDestinationRect) {\n        const sprites = ids.map((id) => {\n            const sprite = this.load(id, argDestinationRect);\n            return sprite;\n        });\n        return sprites;\n    }\n    preloadAll() {\n        Object.keys(this.manifest).forEach((id) => {\n            this.load(id);\n        });\n    }\n    preloadAllAsync() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield Promise.all(Object.keys(this.manifest).map((id) => {\n                return this.loadAsync(id);\n            }));\n        });\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/loaders/SpriteLoader.ts?");

/***/ }),

/***/ "./src/core/loaders/index.ts":
/*!***********************************!*\
  !*** ./src/core/loaders/index.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ImageLoader\": () => (/* reexport safe */ _ImageLoader__WEBPACK_IMPORTED_MODULE_0__.ImageLoader),\n/* harmony export */   \"SpriteLoader\": () => (/* reexport safe */ _SpriteLoader__WEBPACK_IMPORTED_MODULE_1__.SpriteLoader)\n/* harmony export */ });\n/* harmony import */ var _ImageLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ImageLoader */ \"./src/core/loaders/ImageLoader.ts\");\n/* harmony import */ var _SpriteLoader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SpriteLoader */ \"./src/core/loaders/SpriteLoader.ts\");\n\n\n\n\n//# sourceURL=webpack:///./src/core/loaders/index.ts?");

/***/ }),

/***/ "./src/core/painters/RectPainter.ts":
/*!******************************************!*\
  !*** ./src/core/painters/RectPainter.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RectPainter\": () => (/* binding */ RectPainter)\n/* harmony export */ });\n/* harmony import */ var _Painter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Painter */ \"./src/core/Painter.ts\");\n\nconst DEFAULT_OPTIONS = {\n    fillColor: null,\n    borderColor: null,\n    borderWidth: 1,\n};\nclass RectPainter extends _Painter__WEBPACK_IMPORTED_MODULE_0__.Painter {\n    constructor(options = {}) {\n        super();\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    }\n    paint(context, renderObject) {\n        const box = renderObject.getWorldBoundingBox();\n        const rect = box.toRect();\n        const { fillColor, borderColor, borderWidth } = this.options;\n        // Originally canvas draws border outside the rectangle.\n        // Recalculate coordinates of the border to be inside rect - it will\n        // simplify clearing rect during rendering.\n        const x = rect.x + borderWidth;\n        const y = rect.y + borderWidth;\n        const width = rect.width - borderWidth * 2;\n        const height = rect.height - borderWidth * 2;\n        if (fillColor !== null) {\n            context.fillRect(x, y, width, height, fillColor);\n        }\n        if (borderColor !== null && borderWidth !== 0) {\n            context.strokeRect(x, y, width, height, borderColor, borderWidth);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/painters/RectPainter.ts?");

/***/ }),

/***/ "./src/core/painters/SpritePainter.ts":
/*!********************************************!*\
  !*** ./src/core/painters/SpritePainter.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SpriteAlignment\": () => (/* binding */ SpriteAlignment),\n/* harmony export */   \"SpritePainter\": () => (/* binding */ SpritePainter)\n/* harmony export */ });\n/* harmony import */ var _Painter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Painter */ \"./src/core/Painter.ts\");\n/* harmony import */ var _Rect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Rect */ \"./src/core/Rect.ts\");\n\n\nvar SpriteAlignment;\n(function (SpriteAlignment) {\n    SpriteAlignment[SpriteAlignment[\"Stretch\"] = 0] = \"Stretch\";\n    SpriteAlignment[SpriteAlignment[\"MiddleCenter\"] = 1] = \"MiddleCenter\";\n    SpriteAlignment[SpriteAlignment[\"MiddleLeft\"] = 2] = \"MiddleLeft\";\n    SpriteAlignment[SpriteAlignment[\"TopLeft\"] = 3] = \"TopLeft\";\n})(SpriteAlignment || (SpriteAlignment = {}));\nclass SpritePainter extends _Painter__WEBPACK_IMPORTED_MODULE_0__.Painter {\n    constructor(sprite = null, alignment = SpriteAlignment.MiddleCenter) {\n        super();\n        this.sprite = null;\n        this.opacity = 1;\n        this.contrast = undefined;\n        this.sprite = sprite;\n        this.alignment = alignment;\n    }\n    paint(context, renderObject) {\n        // Simply no sprite object provided\n        if (this.sprite === null) {\n            return;\n        }\n        // Image is not yet available\n        if (!this.sprite.isImageLoaded()) {\n            return;\n        }\n        const objectRect = renderObject.getWorldBoundingBox().toRect();\n        let destinationRect = objectRect;\n        if (this.alignment === SpriteAlignment.Stretch) {\n            destinationRect = objectRect;\n        }\n        else if (this.alignment === SpriteAlignment.TopLeft) {\n            destinationRect = new _Rect__WEBPACK_IMPORTED_MODULE_1__.Rect(objectRect.x, objectRect.y, this.sprite.destinationRect.width, this.sprite.destinationRect.height);\n        }\n        else if (this.alignment === SpriteAlignment.MiddleCenter) {\n            destinationRect = new _Rect__WEBPACK_IMPORTED_MODULE_1__.Rect(objectRect.x +\n                objectRect.width / 2 -\n                this.sprite.destinationRect.width / 2, objectRect.y +\n                objectRect.height / 2 -\n                this.sprite.destinationRect.height / 2, this.sprite.destinationRect.width, this.sprite.destinationRect.height);\n        }\n        const tmpGlobalAlpha = context.getGlobalAlpha();\n        if (this.opacity !== 1) {\n            context.setGlobalAlpha(this.opacity);\n        }\n        let prevFilter;\n        if (this.contrast !== undefined) {\n            prevFilter = context.getFilter();\n            context.setFilter(`contrast(${this.contrast})`);\n        }\n        context.drawImage(this.sprite.image, this.sprite.sourceRect, destinationRect);\n        if (this.opacity !== 1) {\n            context.setGlobalAlpha(tmpGlobalAlpha);\n        }\n        if (prevFilter) {\n            context.setFilter(prevFilter);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/painters/SpritePainter.ts?");

/***/ }),

/***/ "./src/core/painters/TextPainter.ts":
/*!******************************************!*\
  !*** ./src/core/painters/TextPainter.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TextAlignment\": () => (/* binding */ TextAlignment),\n/* harmony export */   \"TextPainter\": () => (/* binding */ TextPainter)\n/* harmony export */ });\n/* harmony import */ var _Painter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Painter */ \"./src/core/Painter.ts\");\n/* harmony import */ var _Rect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Rect */ \"./src/core/Rect.ts\");\n\n\nvar TextAlignment;\n(function (TextAlignment) {\n    TextAlignment[TextAlignment[\"TopLeft\"] = 0] = \"TopLeft\";\n    TextAlignment[TextAlignment[\"MiddleLeft\"] = 1] = \"MiddleLeft\";\n    TextAlignment[TextAlignment[\"MiddleRight\"] = 2] = \"MiddleRight\";\n    TextAlignment[TextAlignment[\"MiddleCenter\"] = 3] = \"MiddleCenter\";\n})(TextAlignment || (TextAlignment = {}));\nconst DEFAULT_OPTIONS = {\n    text: '? no text ?',\n    color: 'red',\n    size: 18,\n    alignment: TextAlignment.TopLeft,\n};\nclass TextPainter extends _Painter__WEBPACK_IMPORTED_MODULE_0__.Painter {\n    constructor(options = {}) {\n        super();\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    }\n    setOptions(options = {}) {\n        Object.assign(this.options, options);\n    }\n    paint(context, renderObject) {\n        const objectRect = renderObject.getWorldBoundingBox().toRect();\n        const objectCenter = objectRect.getCenter();\n        let vertAlign;\n        let horizAlign;\n        let destRect = objectRect;\n        switch (this.options.alignment) {\n            case TextAlignment.MiddleCenter:\n                vertAlign = 'middle';\n                horizAlign = 'center';\n                destRect = new _Rect__WEBPACK_IMPORTED_MODULE_1__.Rect(objectCenter.x, objectCenter.y, objectRect.width, objectRect.height);\n                break;\n            case TextAlignment.MiddleLeft:\n                vertAlign = 'middle';\n                horizAlign = 'left';\n                destRect = new _Rect__WEBPACK_IMPORTED_MODULE_1__.Rect(objectRect.x, objectCenter.y, objectRect.width, objectRect.height);\n                break;\n            case TextAlignment.MiddleRight:\n                vertAlign = 'middle';\n                horizAlign = 'right';\n                destRect = new _Rect__WEBPACK_IMPORTED_MODULE_1__.Rect(objectRect.x + objectRect.width, objectCenter.y, objectRect.width, objectRect.height);\n                break;\n            case TextAlignment.TopLeft:\n            default:\n                vertAlign = 'top';\n                horizAlign = 'left';\n        }\n        context.fillText(this.options.text, destRect.x, destRect.y, this.options.color, this.options.size, vertAlign, horizAlign);\n    }\n}\nTextPainter.Alignment = TextAlignment;\n\n\n//# sourceURL=webpack:///./src/core/painters/TextPainter.ts?");

/***/ }),

/***/ "./src/core/painters/index.ts":
/*!************************************!*\
  !*** ./src/core/painters/index.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RectPainter\": () => (/* reexport safe */ _RectPainter__WEBPACK_IMPORTED_MODULE_0__.RectPainter),\n/* harmony export */   \"SpriteAlignment\": () => (/* reexport safe */ _SpritePainter__WEBPACK_IMPORTED_MODULE_1__.SpriteAlignment),\n/* harmony export */   \"SpritePainter\": () => (/* reexport safe */ _SpritePainter__WEBPACK_IMPORTED_MODULE_1__.SpritePainter),\n/* harmony export */   \"TextAlignment\": () => (/* reexport safe */ _TextPainter__WEBPACK_IMPORTED_MODULE_2__.TextAlignment),\n/* harmony export */   \"TextPainter\": () => (/* reexport safe */ _TextPainter__WEBPACK_IMPORTED_MODULE_2__.TextPainter)\n/* harmony export */ });\n/* harmony import */ var _RectPainter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RectPainter */ \"./src/core/painters/RectPainter.ts\");\n/* harmony import */ var _SpritePainter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SpritePainter */ \"./src/core/painters/SpritePainter.ts\");\n/* harmony import */ var _TextPainter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TextPainter */ \"./src/core/painters/TextPainter.ts\");\n\n\n\n\n\n//# sourceURL=webpack:///./src/core/painters/index.ts?");

/***/ }),

/***/ "./src/core/render/CanvasRenderContext.ts":
/*!************************************************!*\
  !*** ./src/core/render/CanvasRenderContext.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CanvasRenderContext\": () => (/* binding */ CanvasRenderContext)\n/* harmony export */ });\n/* harmony import */ var _RenderContext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RenderContext */ \"./src/core/render/RenderContext.ts\");\n\nconst DEFAULT_OPTIONS = {\n    fontFace: 'sans-serif',\n    imageSmoothing: false,\n};\nclass CanvasRenderContext extends _RenderContext__WEBPACK_IMPORTED_MODULE_0__.RenderContext {\n    constructor(canvas, options = {}) {\n        super(canvas);\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    }\n    init() {\n        this.context = this.canvas.getContext('2d');\n        this.context.imageSmoothingEnabled = this.options.imageSmoothing;\n    }\n    drawImage(imageSource, sourceRect, destinationRect) {\n        this.context.drawImage(imageSource.getElement(), sourceRect.x, sourceRect.y, sourceRect.width, sourceRect.height, Math.round(destinationRect.x), Math.round(destinationRect.y), destinationRect.width, destinationRect.height);\n    }\n    clear() {\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n    clearRect(x, y, width, height) {\n        this.context.clearRect(x, y, width, height);\n    }\n    fillRect(x, y, width, height, color = '#000') {\n        this.context.fillStyle = color;\n        this.context.fillRect(x, y, width, height);\n    }\n    getGlobalAlpha() {\n        return this.context.globalAlpha;\n    }\n    setGlobalAlpha(alpha) {\n        this.context.globalAlpha = alpha;\n    }\n    resetAlpha() {\n        this.context.globalAlpha = 1;\n    }\n    setFilter(filter) {\n        this.context.filter = filter;\n    }\n    getFilter() {\n        return this.context.filter;\n    }\n    strokePath(positions, color = '#000') {\n        if (positions.length < 1) {\n            return;\n        }\n        const [firstPosition, ...restPositions] = positions;\n        this.context.beginPath();\n        this.context.moveTo(firstPosition.x, firstPosition.y);\n        for (const position of restPositions) {\n            this.context.lineTo(position.x, position.y);\n        }\n        this.context.closePath();\n        this.context.strokeStyle = color;\n        this.context.stroke();\n    }\n    strokeRect(x, y, width, height, color = '#000', lineWidth = 1) {\n        this.context.strokeStyle = color;\n        this.context.lineWidth = lineWidth;\n        this.context.strokeRect(x, y, width, height);\n    }\n    fillText(text, x, y, color, size, vertAlign = 'top', horizAlign = 'left') {\n        this.context.textAlign = horizAlign;\n        this.context.textBaseline = vertAlign;\n        this.context.font = `${size}px ${this.options.fontFace}`;\n        this.context.fillStyle = color;\n        this.context.fillText(text, x, y);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/render/CanvasRenderContext.ts?");

/***/ }),

/***/ "./src/core/render/RenderContext.ts":
/*!******************************************!*\
  !*** ./src/core/render/RenderContext.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RenderContext\": () => (/* binding */ RenderContext)\n/* harmony export */ });\nclass RenderContext {\n    constructor(canvas) {\n        this.canvas = canvas;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/render/RenderContext.ts?");

/***/ }),

/***/ "./src/core/render/index.ts":
/*!**********************************!*\
  !*** ./src/core/render/index.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CanvasRenderContext\": () => (/* reexport safe */ _CanvasRenderContext__WEBPACK_IMPORTED_MODULE_0__.CanvasRenderContext),\n/* harmony export */   \"RenderContext\": () => (/* reexport safe */ _RenderContext__WEBPACK_IMPORTED_MODULE_1__.RenderContext)\n/* harmony export */ });\n/* harmony import */ var _CanvasRenderContext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CanvasRenderContext */ \"./src/core/render/CanvasRenderContext.ts\");\n/* harmony import */ var _RenderContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RenderContext */ \"./src/core/render/RenderContext.ts\");\n\n\n\n\n//# sourceURL=webpack:///./src/core/render/index.ts?");

/***/ }),

/***/ "./src/core/scene/Scene.ts":
/*!*********************************!*\
  !*** ./src/core/scene/Scene.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Scene\": () => (/* binding */ Scene)\n/* harmony export */ });\nclass Scene {\n    constructor(navigator, params) {\n        this.navigator = navigator;\n        this.params = params;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/scene/Scene.ts?");

/***/ }),

/***/ "./src/core/scene/SceneNavigator.ts":
/*!******************************************!*\
  !*** ./src/core/scene/SceneNavigator.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack:///./src/core/scene/SceneNavigator.ts?");

/***/ }),

/***/ "./src/core/scene/SceneRouter.ts":
/*!***************************************!*\
  !*** ./src/core/scene/SceneRouter.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SceneRouter\": () => (/* binding */ SceneRouter)\n/* harmony export */ });\n/* harmony import */ var _Subject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Subject */ \"./src/core/Subject.ts\");\n\nclass SceneRouter {\n    constructor() {\n        this.transitionStarted = new _Subject__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.routes = new Map();\n        this.scene = null;\n        this.stack = [];\n    }\n    register(type, Scene) {\n        this.routes.set(type, Scene);\n    }\n    start(type, params) {\n        this.assertRegistered(type);\n        this.push(type, params);\n    }\n    getCurrentScene() {\n        return this.scene;\n    }\n    push(type, params) {\n        this.assertRegistered(type);\n        const location = this.transition(type, params);\n        this.stack.push(location);\n    }\n    replace(type, params) {\n        this.assertRegistered(type);\n        this.stack.pop();\n        const location = this.transition(type, params);\n        this.stack.push(location);\n    }\n    back() {\n        // Can't back if only one scene left in stack\n        if (this.stack.length === 1) {\n            return;\n        }\n        this.stack.pop();\n        const lastLocation = this.stack[this.stack.length - 1];\n        this.transition(lastLocation.type, lastLocation.params);\n    }\n    clearAndPush(type, params) {\n        this.assertRegistered(type);\n        this.stack = [];\n        this.push(type, params);\n    }\n    transition(type, params = {}) {\n        this.assertRegistered(type);\n        this.transitionStarted.notify(null);\n        const NextSceneClass = this.routes.get(type);\n        const nextScene = new NextSceneClass(this, params);\n        this.scene = nextScene;\n        const nextLocation = {\n            type,\n            params,\n        };\n        this.location = nextLocation;\n        return this.location;\n    }\n    assertRegistered(type) {\n        if (!this.routes.has(type)) {\n            throw new Error(`Scene \"${type}\" not registered`);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/scene/SceneRouter.ts?");

/***/ }),

/***/ "./src/core/scene/SceneType.ts":
/*!*************************************!*\
  !*** ./src/core/scene/SceneType.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack:///./src/core/scene/SceneType.ts?");

/***/ }),

/***/ "./src/core/scene/index.ts":
/*!*********************************!*\
  !*** ./src/core/scene/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Scene\": () => (/* reexport safe */ _Scene__WEBPACK_IMPORTED_MODULE_0__.Scene),\n/* harmony export */   \"SceneRouter\": () => (/* reexport safe */ _SceneRouter__WEBPACK_IMPORTED_MODULE_2__.SceneRouter)\n/* harmony export */ });\n/* harmony import */ var _Scene__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Scene */ \"./src/core/scene/Scene.ts\");\n/* harmony import */ var _SceneNavigator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SceneNavigator */ \"./src/core/scene/SceneNavigator.ts\");\n/* harmony import */ var _SceneRouter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SceneRouter */ \"./src/core/scene/SceneRouter.ts\");\n/* harmony import */ var _SceneType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SceneType */ \"./src/core/scene/SceneType.ts\");\n\n\n\n\n\n\n//# sourceURL=webpack:///./src/core/scene/index.ts?");

/***/ }),

/***/ "./src/core/utils/MathUtils.ts":
/*!*************************************!*\
  !*** ./src/core/utils/MathUtils.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MathUtils\": () => (/* binding */ MathUtils)\n/* harmony export */ });\nclass MathUtils {\n    // Note: floatinig point errors can be inroduced when calculating.\n    // For example:\n    //\n    //   Math.sin(180 * Math.PI / 180) = 1.2246467991473532e-16\n    //\n    // which is supposed to be a zero and is very close to zero, but is not\n    // exactly a zero. Later on when changing a sign, for zero it would not matter\n    // but for this value - it carries on the sign and can influence the\n    // calculations when multiplying by this number.\n    // Use this method to round possible floating-point errors on the early stages\n    // so this errors don't propagate to higher-level code.\n    static round(value, precisionExp = 10) {\n        const precision = 10 * precisionExp;\n        return Math.round(value * precision) / precision;\n    }\n    static degreesToRadians(degrees) {\n        return (degrees * Math.PI) / 180;\n    }\n    static radiansToDegrees(radians) {\n        return (radians * 180) / Math.PI;\n    }\n    static cosDegrees(degrees) {\n        const radians = this.degreesToRadians(degrees);\n        const cos = Math.cos(radians);\n        const rounded = this.round(cos);\n        return rounded;\n    }\n    static sinDegrees(degrees) {\n        const radians = this.degreesToRadians(degrees);\n        const sin = Math.sin(radians);\n        const rounded = this.round(sin);\n        return rounded;\n    }\n    static atan2Degrees(sin, cos) {\n        const radians = Math.atan2(sin, cos);\n        const degrees = this.radiansToDegrees(radians);\n        return degrees;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/core/utils/MathUtils.ts?");

/***/ }),

/***/ "./src/core/utils/index.ts":
/*!*********************************!*\
  !*** ./src/core/utils/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MathUtils\": () => (/* reexport safe */ _MathUtils__WEBPACK_IMPORTED_MODULE_0__.MathUtils)\n/* harmony export */ });\n/* harmony import */ var _MathUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MathUtils */ \"./src/core/utils/MathUtils.ts\");\n\n\n\n//# sourceURL=webpack:///./src/core/utils/index.ts?");

/***/ }),

/***/ "./src/game/GameState.ts":
/*!*******************************!*\
  !*** ./src/game/GameState.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameState\": () => (/* binding */ GameState)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n\nclass GameState {\n    constructor() {\n        this.databaseCreatureChanged = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.creatureChanged = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.essenceChanged = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.modifierChanged = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.tempChanged = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.envChanged = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n    }\n    setDatabaseCreature(value) {\n        this.databaseCreature = value;\n        this.databaseCreatureChanged.notify(value);\n    }\n    setCreature(value) {\n        this.creature = value;\n        this.creatureChanged.notify(value);\n    }\n    setEssence(value) {\n        this.essence = value;\n        this.essenceChanged.notify(value);\n    }\n    setModifier(value) {\n        this.modifier = value;\n        this.modifierChanged.notify(value);\n    }\n    setTemp(value) {\n        this.temp = value;\n        this.tempChanged.notify(value);\n    }\n    setEnv(value) {\n        this.env = value;\n        this.envChanged.notify(value);\n    }\n    resetSelection() {\n        this.creature = undefined;\n        this.temp = undefined;\n        this.env = undefined;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/GameState.ts?");

/***/ }),

/***/ "./src/game/GameStore.ts":
/*!*******************************!*\
  !*** ./src/game/GameStore.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameStore\": () => (/* binding */ GameStore)\n/* harmony export */ });\n/* harmony import */ var _GameTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GameTypes */ \"./src/game/GameTypes.ts\");\n\nconst DEFAULT_STATE = {\n    hasSavedGame: false,\n    storyStep: 'intro',\n    resources: [],\n    knownCreatureTypes: [],\n    knownCreatureResourceDrops: [],\n    knownCreatureResourceReqs: [],\n    knownResources: [],\n    lastActiveCreature: undefined,\n    lastActiveEssence: undefined,\n    lastActiveModifier: undefined,\n};\nconst PRESETS = {\n    after_tutorial: {\n        hasSavedGame: true,\n        storyStep: 'spirit_first_encounter',\n        resources: [],\n        knownCreatureTypes: [],\n        knownCreatureResourceDrops: [],\n        knownCreatureResourceReqs: [],\n        knownResources: [],\n        lastActiveCreature: undefined,\n        lastActiveEssence: undefined,\n        lastActiveModifier: undefined,\n    },\n    all_resources: {\n        hasSavedGame: true,\n        storyStep: 'spirit_first_encounter',\n        resources: [],\n        knownCreatureTypes: [],\n        knownCreatureResourceDrops: [],\n        knownCreatureResourceReqs: [],\n        knownResources: [\n            'dummium',\n            'fishium',\n            'arachium',\n            'reptilium',\n            'soulium',\n            'techium',\n            'liquium',\n            'sandium',\n            'windium',\n            'flamium',\n        ],\n        lastActiveCreature: undefined,\n        lastActiveEssence: undefined,\n        lastActiveModifier: undefined,\n    },\n};\nclass GameStore {\n    constructor(storage) {\n        this.storage = storage;\n        this.state = DEFAULT_STATE;\n    }\n    resetStateToPreset(kind) {\n        this.state = PRESETS[kind];\n        this.save();\n    }\n    setHasSavedGame() {\n        this.state.hasSavedGame = true;\n    }\n    hasSavedGame() {\n        return this.state.hasSavedGame;\n    }\n    addResources(resourcesToAdd) {\n        for (const resourceToAdd of resourcesToAdd) {\n            const index = this.state.resources.findIndex((resource) => {\n                return resource.type === resourceToAdd.type;\n            });\n            if (index >= 0) {\n                this.state.resources[index] = new _GameTypes__WEBPACK_IMPORTED_MODULE_0__.Resource({\n                    type: resourceToAdd.type,\n                    amount: this.state.resources[index].amount + resourceToAdd.amount,\n                });\n            }\n            else {\n                this.state.resources.push(resourceToAdd);\n            }\n        }\n    }\n    removeResources(resourcesToRemove) {\n        const typesToRemove = [];\n        for (const resourceToRemove of resourcesToRemove) {\n            // const index = this.state.resources.findIndex((resource) => {\n            //   return resource.type === resourceToRemove.type;\n            // });\n            // if (index >= 0) {\n            //   this.state.resources[index] = new Resource({\n            //     type: resourceToRemove.type,\n            //     amount: this.state.resources[index].amount - resourceToRemove.amount,\n            //   });\n            // } else {\n            //   throw new Error('Can not remove a resource that does not exist');\n            // }\n            // if (this.state.resources[index].amount < 0) {\n            //   throw new Error('Can not be negative');\n            // }\n            // if (this.state.resources[index].amount === 0) {\n            //   typesToRemove.push(resourceToRemove.type);\n            // }\n        }\n        // this.state.resources = this.state.resources.filter((resource) => {\n        //   return !typesToRemove.includes(resource.type);\n        // });\n    }\n    hasResource(resourceType) {\n        return this.state.resources.some((resource) => {\n            return resource.type === resourceType;\n        });\n    }\n    isKnownDropForCreature(creatureType, resourceType) {\n        return this.state.knownCreatureResourceDrops.some((item) => {\n            return item[0] === creatureType && item[1] === resourceType;\n        });\n    }\n    addKnownDropsForCreature(creatureType, resources) {\n        for (const resource of resources) {\n            if (this.isKnownDropForCreature(creatureType, resource.type)) {\n                continue;\n            }\n            this.state.knownCreatureResourceDrops.push([creatureType, resource.type]);\n        }\n    }\n    isKnownReqPairForCreature(creatureType, resourceType1, resourceType2) {\n        return this.state.knownCreatureResourceReqs.some((item) => {\n            if (item[0] !== creatureType) {\n                return false;\n            }\n            if (item[1] === resourceType1 && item[2] === resourceType2) {\n                return true;\n            }\n            if (item[1] === resourceType2 && item[2] === resourceType1) {\n                return true;\n            }\n            return false;\n        });\n    }\n    addKnownReqPairForCreature(creatureType, resourceType1, resourceType2) {\n        if (this.isKnownReqPairForCreature(creatureType, resourceType1, resourceType2)) {\n            return;\n        }\n        this.state.knownCreatureResourceReqs.push([\n            creatureType,\n            resourceType1,\n            resourceType2,\n        ]);\n    }\n    getResourceAmount(type) {\n        const resource = this.state.resources.find((resource) => resource.type === type);\n        if (resource === undefined) {\n            return 0;\n        }\n        return resource.amount;\n    }\n    getResources() {\n        return this.state.resources;\n    }\n    setCreatureKnown(creatureType) {\n        if (this.state.knownCreatureTypes.includes(creatureType)) {\n            return;\n        }\n        this.state.knownCreatureTypes.push(creatureType);\n    }\n    isKnownCreature(creatureType) {\n        return this.state.knownCreatureTypes.includes(creatureType);\n    }\n    setStoryStep(storyStep) {\n        this.state.storyStep = storyStep;\n    }\n    getStoryStep() {\n        return this.state.storyStep || 'intro';\n    }\n    setLastActiveCreature(creatureType) {\n        this.state.lastActiveCreature = creatureType;\n    }\n    getLastActiveCreature() {\n        return this.state.lastActiveCreature;\n    }\n    setLastActiveEssence(essence) {\n        this.state.lastActiveEssence = essence;\n    }\n    getLastActiveEssence() {\n        return this.state.lastActiveEssence;\n    }\n    setLastActiveModifier(modifier) {\n        this.state.lastActiveModifier = modifier;\n    }\n    getLastActiveModifier() {\n        return this.state.lastActiveModifier;\n    }\n    isKnownResource(resourceType) {\n        return this.state.knownResources.includes(resourceType);\n    }\n    addKnownResources(resources) {\n        for (const resource of resources) {\n            if (this.isKnownResource(resource.type)) {\n                continue;\n            }\n            this.state.knownResources.push(resource.type);\n        }\n    }\n    reset() {\n        this.state = DEFAULT_STATE;\n    }\n    load() {\n        var _a;\n        this.storage.load();\n        this.state = (_a = this.storage.get('game')) !== null && _a !== void 0 ? _a : DEFAULT_STATE;\n    }\n    save() {\n        this.state.hasSavedGame = true;\n        this.storage.set('game', this.state);\n        this.storage.save();\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/GameStore.ts?");

/***/ }),

/***/ "./src/game/GameTypes.ts":
/*!*******************************!*\
  !*** ./src/game/GameTypes.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"StoryCheck\": () => (/* binding */ StoryCheck),\n/* harmony export */   \"Resource\": () => (/* binding */ Resource),\n/* harmony export */   \"Creature\": () => (/* binding */ Creature),\n/* harmony export */   \"Selection\": () => (/* binding */ Selection),\n/* harmony export */   \"Outcome\": () => (/* binding */ Outcome)\n/* harmony export */ });\nclass StoryCheck {\n    static isAfterTutorial(storyStep) {\n        return [\n            'spirit_first_encounter',\n            'spirit_second_encounter',\n            'spirit_third_encounter',\n            'spirit_fourth_encounter',\n        ].includes(storyStep);\n    }\n}\nclass Resource {\n    constructor(params) {\n        this.type = params.type;\n        this.amount = params.amount;\n    }\n    static createUnknown() {\n        return new Resource({ type: 'unknown', amount: 0 });\n    }\n}\nclass Creature {\n    constructor(params) {\n        Object.assign(this, {\n            description: '',\n            requiredResourceGroups: [],\n            droppedResources: [],\n        }, params);\n    }\n    // getRequiredAmountFor(resourceType: ResourceType) {\n    //   const resource = this.requiredResources.find(\n    //     (resource) => resource.type === resourceType,\n    //   );\n    //   if (!resource) {\n    //     return 0;\n    //   }\n    //   return resource.amount;\n    // }\n    static fromConfig(creatureConfig) {\n        const requiredResourceGroups = creatureConfig.requiredResourceGroups.map((groupConfig) => {\n            return groupConfig.map((resourceConfig) => {\n                return new Resource(resourceConfig);\n            });\n        });\n        const droppedResources = creatureConfig.droppedResources.map((resourceConfig) => {\n            return new Resource(resourceConfig);\n        });\n        const creature = new Creature({\n            type: creatureConfig.type,\n            name: creatureConfig.name,\n            unknownName: creatureConfig.unknownName,\n            description: creatureConfig.description,\n            requiredResourceGroups,\n            droppedResources,\n        });\n        return creature;\n    }\n}\nclass Selection {\n    constructor(params) {\n        Object.assign(this, params);\n    }\n    static createFake() {\n        return new Selection({\n            creature: 'dummy',\n            env: 'desert',\n            temp: 10,\n        });\n    }\n    isDefault() {\n        return (this.env === Selection.DEFAULT_ENV && this.temp === Selection.DEFAULT_TEMP);\n    }\n}\nSelection.DEFAULT_TEMP = 0;\nSelection.DEFAULT_ENV = 'none';\nclass Outcome {\n    constructor(status, deathType, selection, resources = []) {\n        this.status = status;\n        this.deathType = deathType;\n        this.selection = selection;\n        this.resources = resources;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/GameTypes.ts?");

/***/ }),

/***/ "./src/game/GameUpdateArgs.ts":
/*!************************************!*\
  !*** ./src/game/GameUpdateArgs.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack:///./src/game/GameUpdateArgs.ts?");

/***/ }),

/***/ "./src/game/SimDecider.ts":
/*!********************************!*\
  !*** ./src/game/SimDecider.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SimDecider\": () => (/* binding */ SimDecider)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n/* harmony import */ var _GameTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GameTypes */ \"./src/game/GameTypes.ts\");\n\n\nclass SimDecider {\n    static decide(selection) {\n        let conditions;\n        switch (selection.creature) {\n            case 'dummy':\n                conditions = this.decideDummy(selection);\n                break;\n            case 'dummyfish':\n                conditions = this.decideDummyfish(selection);\n                break;\n            case 'scorporate':\n                conditions = this.decideScorporate(selection);\n                break;\n            case 'fishy':\n                conditions = this.decideFishy(selection);\n                break;\n            case 'wasp':\n                conditions = this.decideWasp(selection);\n                break;\n            case 'drone':\n                conditions = this.decideDrone(selection);\n                break;\n            case 'bat':\n                conditions = this.decideBat(selection);\n                break;\n            case 'eaglefish':\n                conditions = this.decideEaglefish(selection);\n                break;\n            case 'dragon':\n                conditions = this.decideDragon(selection);\n                break;\n            case 'spirit':\n                conditions = this.decideSpirit();\n                break;\n            case 'fishsteak':\n                conditions = this.decideFishsteak(selection);\n                break;\n            case 'lighter':\n                conditions = this.decideLighter(selection);\n                break;\n            case 'firebug':\n                conditions = this.decideFirebug(selection);\n                break;\n            case 'snake':\n                conditions = this.decideSnake(selection);\n                break;\n            case 'firesnail':\n                conditions = this.decideFiresnail(selection);\n                break;\n            case 'turtle':\n                conditions = this.decideTurtle(selection);\n                break;\n            case 'dude':\n                conditions = this.decideDude();\n                break;\n            case 'muaddib':\n                conditions = this.decideMuaddib(selection);\n                break;\n            default:\n                throw new Error(`Unknown creature ${selection.creature}`);\n        }\n        let outcome;\n        // Can be multiple truthy?\n        for (const [truthy, deathType, resourceType] of conditions) {\n            if (truthy) {\n                outcome = new _GameTypes__WEBPACK_IMPORTED_MODULE_1__.Outcome(deathType === 'none' ? 'alive' : 'death', deathType, selection, [new _GameTypes__WEBPACK_IMPORTED_MODULE_1__.Resource({ type: resourceType, amount: 1 })]);\n                break;\n            }\n        }\n        if (!outcome) {\n            throw new Error(`No outcome for \"${selection.creature}\"`);\n        }\n        for (const resource of outcome.resources) {\n            const creatureConfig = _config__WEBPACK_IMPORTED_MODULE_0__.config.CREATURES[selection.creature];\n            const isDroppable = creatureConfig.droppedResources.some((dropRes) => {\n                return resource.type === dropRes.type;\n            });\n            if (!isDroppable) {\n                throw new Error(`Resource \"${resource.type}\" not droppable for \"${selection.creature}\"`);\n            }\n        }\n        return outcome;\n    }\n    static decideDummy({ env, temp }) {\n        // TODO: do I drop only one modifier here? or all 3?\n        // liquim is realistic - water from mechs\n        return [\n            [temp > 0, 'overheat', 'techium'],\n            [temp < 0, 'hypothermia', 'techium'],\n            [env === 'underwater', 'short_circuit', 'liquium'],\n            [env === 'desert', 'stuck_mech', 'sandium'],\n            [env === 'air', 'gravity', 'techium'],\n            [true, 'none', 'dummium'],\n        ];\n    }\n    static decideDummyfish({ env, temp }) {\n        return [\n            [env !== 'underwater', 'dehydration', 'techium'],\n            [temp > -20, 'overheat', 'liquium'],\n            [true, 'none', 'fishium'],\n        ];\n    }\n    static decideScorporate({ env, temp }) {\n        return [\n            [env === 'none', 'discomfort', 'sandium'],\n            [env === 'underwater', 'drowning', 'techium'],\n            [env === 'air', 'gravity', 'techium'],\n            [temp < 20, 'hypothermia', 'sandium'],\n            [true, 'none', 'arachium'],\n        ];\n    }\n    static decideFishy({ env, temp }) {\n        return [\n            [env !== 'underwater', 'dehydration', 'liquium'],\n            [temp > -20, 'overheat', 'liquium'],\n            [true, 'none', 'fishium'],\n        ];\n    }\n    static decideWasp({ env, temp }) {\n        return [\n            [env === 'none', 'discomfort', 'sandium'],\n            [env === 'underwater', 'drowning', 'sandium'],\n            [env === 'desert', 'drought', 'sandium'],\n            [temp > 20, 'overheat', 'windium'],\n            [temp < 0, 'hypothermia', 'windium'],\n            [true, 'none', 'arachium'],\n        ];\n    }\n    static decideDrone({ env, temp }) {\n        return [\n            [env === 'underwater', 'short_circuit', 'techium'],\n            [env === 'desert', 'stuck_mech', 'techium'],\n            [env === 'none', 'boredom', 'techium'],\n            [temp > 10, 'overheat', 'windium'],\n            [temp < -10, 'hypothermia', 'windium'],\n            [true, 'none', 'dummium'],\n        ];\n    }\n    static decideBat({ env }) {\n        return [\n            [env === 'underwater', 'drowning', 'sandium'],\n            [env === 'desert', 'drought', 'sandium'],\n            [env === 'none', 'thirst', 'windium'],\n            [true, 'none', 'arachium'],\n        ];\n    }\n    static decideEaglefish({ env }) {\n        return [\n            [env === 'none', 'confusion', 'windium'],\n            [env === 'underwater', 'viceversa', 'liquium'],\n            [env === 'desert', 'drought', 'windium'],\n            [true, 'none', 'fishium'],\n        ];\n    }\n    static decideFishsteak({ env, temp }) {\n        return [\n            [env !== 'none', 'why', 'sandium'],\n            [temp < 20, 'ramsay', 'sandium'],\n            [true, 'none', 'fishium'],\n        ];\n    }\n    static decideDragon({ env, temp }) {\n        return [\n            [env === 'none', 'discomfort', 'windium'],\n            [env === 'underwater', 'drowning', 'windium'],\n            [temp < 20, 'hypothermia', 'flamium'],\n            [true, 'none', 'reptilium'],\n        ];\n    }\n    static decideLighter({ env, temp }) {\n        return [\n            [env === 'underwater', 'short_circuit', 'techium'],\n            [env === 'desert', 'stuck_mech', 'techium'],\n            [env === 'air', 'gravity', 'techium'],\n            [temp > 10, 'overheat', 'flamium'],\n            [temp < -10, 'hypothermia', 'flamium'],\n            [true, 'none', 'dummium'],\n        ];\n    }\n    static decideFirebug({ env, temp }) {\n        return [\n            [env === 'underwater', 'drowning', 'sandium'],\n            [env === 'air', 'gravity', 'flamium'],\n            [env === 'none', 'discomfort', 'flamium'],\n            [temp < -10, 'hypothermia', 'sandium'],\n            [true, 'none', 'arachium'],\n        ];\n    }\n    static decideSnake({ env, temp }) {\n        return [\n            [env === 'air', 'gravity', 'sandium'],\n            [env === 'none', 'discomfort', 'sandium'],\n            [temp < 10, 'hypothermia', 'liquium'],\n            [true, 'none', 'reptilium'],\n        ];\n    }\n    static decideFiresnail({ env, temp }) {\n        return [\n            [env !== 'underwater', 'burned', 'flamium'],\n            [temp > -20, 'burned', 'flamium'],\n            [true, 'none', 'reptilium'],\n        ];\n    }\n    static decideTurtle({ env }) {\n        return [\n            [env !== 'air', 'stayaway', 'windium'],\n            [true, 'none', 'reptilium'],\n        ];\n    }\n    static decideDude() {\n        const dayIndex = new Date().getDay();\n        const isWed = dayIndex === 3;\n        return [\n            [!isWed, 'notwednesday', 'liquium'],\n            [true, 'none', 'wendsdium'],\n        ];\n    }\n    static decideMuaddib({ env, temp }) {\n        return [\n            [env !== 'desert', 'discomfort', 'sandium'],\n            [temp > 0, 'overheat', 'sandium'],\n            [true, 'none', 'reptilium'],\n        ];\n    }\n    static decideSpirit() {\n        // TODO: ok when all collected?\n        return [[true, 'curse', 'soulium']];\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/SimDecider.ts?");

/***/ }),

/***/ "./src/game/SummonHelper.ts":
/*!**********************************!*\
  !*** ./src/game/SummonHelper.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SummonHelper\": () => (/* binding */ SummonHelper)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n/* harmony import */ var _GameTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GameTypes */ \"./src/game/GameTypes.ts\");\n\n\nclass SummonHelper {\n    static decideCreature(essence, modifier) {\n        for (const creatureType of Object.keys(_config__WEBPACK_IMPORTED_MODULE_0__.config.CREATURES)) {\n            const creatureConfig = _config__WEBPACK_IMPORTED_MODULE_0__.config.CREATURES[creatureType];\n            const creature = _GameTypes__WEBPACK_IMPORTED_MODULE_1__.Creature.fromConfig(creatureConfig);\n            for (const reqs of creature.requiredResourceGroups) {\n                if (reqs.length !== 2) {\n                    throw new Error(`Creature \"${creatureType}\" has non 2 required res`);\n                }\n                if ((reqs[0].type === essence && reqs[1].type === modifier) ||\n                    (reqs[0].type === modifier && reqs[1].type === essence)) {\n                    return creature.type;\n                }\n            }\n        }\n        throw new Error(`Unknown combination: es = ${essence}, mod = ${modifier}`);\n    }\n    static getSpiritLeft(gameStore) {\n        const creature = _GameTypes__WEBPACK_IMPORTED_MODULE_1__.Creature.fromConfig(_config__WEBPACK_IMPORTED_MODULE_0__.config.CREATURES.spirit);\n        const resources = creature.requiredResourceGroups\n            .filter((group) => {\n            return group.some((res) => {\n                return res.type === 'soulium';\n            });\n        })\n            .map((group) => {\n            return group.find((res) => {\n                return res.type !== 'soulium';\n            });\n        })\n            .filter((resource) => {\n            return gameStore.isKnownReqPairForCreature(creature.type, 'soulium', resource.type);\n        });\n        return 5 - resources.length;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/SummonHelper.ts?");

/***/ }),

/***/ "./src/game/TalkLines.ts":
/*!*******************************!*\
  !*** ./src/game/TalkLines.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TalkLines\": () => (/* binding */ TalkLines)\n/* harmony export */ });\nclass TalkLines {\n    static spiritFirst() {\n        const messages = [];\n        messages.push(['.......................']);\n        messages.push(['Hom many times do we have to ask you...']);\n        messages.push(['You are abducting and killing us!']);\n        messages.push(['It has to stop!']);\n        return messages;\n    }\n    static spiritSecond() {\n        const messages = [];\n        messages.push(['......']);\n        messages.push([\"I don't recognize you, you must be new.\"]);\n        messages.push([\"Don't listen to what they have told you.\"]);\n        messages.push(['This device of yours is actually killing us.']);\n        messages.push(['You have to help us!']);\n        return messages;\n    }\n    static spiritThird() {\n        const messages = [];\n        messages.push(['...']);\n        messages.push([\n            'You must extract my soul and combine',\n            'it with all of the spirit elements',\n        ]);\n        messages.push([\n            'It will destroy the harvesting device',\n            'and free our world from the terror',\n        ]);\n        messages.push(['Help us!']);\n        return messages;\n    }\n    static spiritFourth(resLeft) {\n        const messages = [];\n        messages.push([\n            'You must combine my soul with the spirit elements!',\n            `We need ${resLeft} more!`,\n        ]);\n        return messages;\n    }\n    static spiritEnd() {\n        const messages = [];\n        messages.push(['.......']);\n        messages.push(['You did it!']);\n        messages.push(['Thank you........ <3']);\n        messages.push(['I can finally...']);\n        messages.push(['...I can now destroy you world ;-)']);\n        return messages;\n    }\n    static dummySummonToLive() {\n        const messages = [];\n        messages.push(['Here is the device assigned to you.']);\n        messages.push([\n            'To summon a creature you need to create a',\n            'reaction between two elements.',\n        ]);\n        messages.push([\"Let's run our reactor using stock elements!\"]);\n        return messages;\n    }\n    static dummySimulateToLive() {\n        const messages = [];\n        messages.push(['Voila! Our dummy test subject!']);\n        messages.push(['On the right you can see the control panel.']);\n        messages.push([\n            'It is used to configure the environment for our',\n            'test subject.',\n        ]);\n        messages.push([\n            \"Let's run a simulation for our dummy with default\",\n            'parameters!',\n        ]);\n        return messages;\n    }\n    static dummyLivedAndSummonToDie() {\n        const messages = [];\n        messages.push([\n            'Perfect! When the conditions perfectly suit the',\n            'creature, we are able to harvest unique elements.',\n        ]);\n        messages.push([\n            \"The nuance is that we don't know these perfect\",\n            'conditions beforehand.',\n        ]);\n        messages.push([\n            'And it is up to you to figure them out by fine',\n            'fine tuning the controls.',\n        ]);\n        messages.push([\n            \"Let's try summon the dummy again, but this time\",\n            'selecting non-default parameters for simulation.',\n        ]);\n        return messages;\n    }\n    static dummyDied() {\n        const messages = [];\n        messages.push([\n            'Sweet! If the conditions are not perfect',\n            'the simulation is considered failed ...',\n        ]);\n        messages.push([\n            '... but we are still able to extract different kinds',\n            'of elements in the event of death.',\n        ]);\n        messages.push([\n            \"But don't worry, they ... don't actualy die.\",\n            \"It's just a simulation ... ahem ...\",\n        ]);\n        messages.push(['... Well, the onboarding is pretty much done.']);\n        messages.push(['You can use new elements to summon new creatues!']);\n        messages.push([\n            \"And don't forget to occasionaly check the\",\n            'database to track you progress.',\n        ]);\n        messages.push(['Good luck!']);\n        return messages;\n    }\n    static dummyShouldNotDefault() {\n        const messages = [];\n        messages.push([\"This time let's try selecting non-default parameters.\"]);\n        return messages;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/TalkLines.ts?");

/***/ }),

/***/ "./src/game/index.ts":
/*!***************************!*\
  !*** ./src/game/index.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameState\": () => (/* reexport safe */ _GameState__WEBPACK_IMPORTED_MODULE_0__.GameState),\n/* harmony export */   \"GameStore\": () => (/* reexport safe */ _GameStore__WEBPACK_IMPORTED_MODULE_1__.GameStore),\n/* harmony export */   \"Creature\": () => (/* reexport safe */ _GameTypes__WEBPACK_IMPORTED_MODULE_2__.Creature),\n/* harmony export */   \"Outcome\": () => (/* reexport safe */ _GameTypes__WEBPACK_IMPORTED_MODULE_2__.Outcome),\n/* harmony export */   \"Resource\": () => (/* reexport safe */ _GameTypes__WEBPACK_IMPORTED_MODULE_2__.Resource),\n/* harmony export */   \"Selection\": () => (/* reexport safe */ _GameTypes__WEBPACK_IMPORTED_MODULE_2__.Selection),\n/* harmony export */   \"StoryCheck\": () => (/* reexport safe */ _GameTypes__WEBPACK_IMPORTED_MODULE_2__.StoryCheck),\n/* harmony export */   \"SimDecider\": () => (/* reexport safe */ _SimDecider__WEBPACK_IMPORTED_MODULE_4__.SimDecider),\n/* harmony export */   \"SummonHelper\": () => (/* reexport safe */ _SummonHelper__WEBPACK_IMPORTED_MODULE_5__.SummonHelper),\n/* harmony export */   \"TalkLines\": () => (/* reexport safe */ _TalkLines__WEBPACK_IMPORTED_MODULE_6__.TalkLines)\n/* harmony export */ });\n/* harmony import */ var _GameState__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GameState */ \"./src/game/GameState.ts\");\n/* harmony import */ var _GameStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GameStore */ \"./src/game/GameStore.ts\");\n/* harmony import */ var _GameTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GameTypes */ \"./src/game/GameTypes.ts\");\n/* harmony import */ var _GameUpdateArgs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./GameUpdateArgs */ \"./src/game/GameUpdateArgs.ts\");\n/* harmony import */ var _SimDecider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SimDecider */ \"./src/game/SimDecider.ts\");\n/* harmony import */ var _SummonHelper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SummonHelper */ \"./src/game/SummonHelper.ts\");\n/* harmony import */ var _TalkLines__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./TalkLines */ \"./src/game/TalkLines.ts\");\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack:///./src/game/index.ts?");

/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core */ \"./src/core/index.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./game */ \"./src/game/index.ts\");\n/* harmony import */ var _scenes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scenes */ \"./src/scenes/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./config */ \"./src/config.ts\");\n/* harmony import */ var _data_sprite_manifest_json__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../data/sprite.manifest.json */ \"./data/sprite.manifest.json\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\n\n\nconst loadingElement = document.querySelector('[data-loading]');\nconst crashElement = document.querySelector('[data-crash]');\nconst log = new _core__WEBPACK_IMPORTED_MODULE_0__.Logger('main', _core__WEBPACK_IMPORTED_MODULE_0__.Logger.Level.Debug);\nconst imageLoader = new _core__WEBPACK_IMPORTED_MODULE_0__.ImageLoader();\nconst spriteLoader = new _core__WEBPACK_IMPORTED_MODULE_0__.SpriteLoader(imageLoader, _data_sprite_manifest_json__WEBPACK_IMPORTED_MODULE_4__);\nconst mouseInput = new _core__WEBPACK_IMPORTED_MODULE_0__.MouseInput();\nconst mouseIntersector = new _core__WEBPACK_IMPORTED_MODULE_0__.MouseIntersector(mouseInput);\nconst gameRenderer = new _core__WEBPACK_IMPORTED_MODULE_0__.GameRenderer({\n    width: _config__WEBPACK_IMPORTED_MODULE_3__.config.CANVAS_WIDTH,\n    height: _config__WEBPACK_IMPORTED_MODULE_3__.config.CANVAS_HEIGHT,\n    // debug: true,\n});\nconst storage = new _core__WEBPACK_IMPORTED_MODULE_0__.LocalStorage(_config__WEBPACK_IMPORTED_MODULE_3__.config.STORAGE_NAMESPACE);\nconst gameStore = new _game__WEBPACK_IMPORTED_MODULE_1__.GameStore(storage);\nconst gameState = new _game__WEBPACK_IMPORTED_MODULE_1__.GameState();\nconst updateArgs = {\n    deltaTime: 0,\n    gameState,\n    gameStore,\n    mouseIntersector,\n    spriteLoader,\n};\nconst sceneRouter = new _scenes__WEBPACK_IMPORTED_MODULE_2__.GameSceneRouter();\nif (_config__WEBPACK_IMPORTED_MODULE_3__.config.IS_DEV) {\n    sceneRouter.start(_scenes__WEBPACK_IMPORTED_MODULE_2__.GameSceneType.About);\n    // sceneRouter.start(GameSceneType.Intro);\n    // sceneRouter.start(GameSceneType.MainMenu);\n    // sceneRouter.start(GameSceneType.Level);\n    // sceneRouter.start(GameSceneType.Final);\n}\nelse {\n    sceneRouter.start(_scenes__WEBPACK_IMPORTED_MODULE_2__.GameSceneType.MainMenu);\n}\nconst gameLoop = new _core__WEBPACK_IMPORTED_MODULE_0__.GameLoop();\nsceneRouter.transitionStarted.addListener(() => {\n    mouseIntersector.resetListeners();\n});\ngameLoop.tick.addListener((event) => {\n    try {\n        mouseInput.update(gameRenderer.getScale());\n        mouseIntersector.update();\n        updateArgs.deltaTime = event.deltaTime;\n        const scene = sceneRouter.getCurrentScene();\n        scene.invokeUpdate(updateArgs);\n        gameRenderer.render(scene.getRoot());\n    }\n    catch (err) {\n        log.error('Crashed', err);\n        crash();\n    }\n});\nfunction main() {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            log.time('Sprites preload');\n            loadingElement.textContent = 'Loading sprites...';\n            yield spriteLoader.preloadAllAsync();\n            log.timeEnd('Sprites preload');\n            log.time('Storage preload');\n            loadingElement.textContent = 'Loading store...';\n            yield gameStore.load();\n            log.timeEnd('Storage preload');\n            document.body.appendChild(gameRenderer.getDomElement());\n            mouseInput.listen(gameRenderer.getDomElement());\n            gameLoop.start();\n            // gameLoop.next();\n        }\n        catch (err) {\n            crash();\n            log.error(err);\n        }\n        finally {\n            loadingElement.style.display = 'none';\n        }\n    });\n}\nfunction crash() {\n    gameLoop.stop();\n    try {\n        document.body.removeChild(gameRenderer.getDomElement());\n    }\n    catch (err) { }\n    crashElement.style.display = 'flex';\n}\nmain();\nwindow.gameLoop = gameLoop;\nwindow.gameStore = gameStore;\n\n\n//# sourceURL=webpack:///./src/main.ts?");

/***/ }),

/***/ "./src/objects/AliveModal.ts":
/*!***********************************!*\
  !*** ./src/objects/AliveModal.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AliveModal\": () => (/* binding */ AliveModal)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game */ \"./src/game/index.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n\n\n\nclass AliveModal extends _ui__WEBPACK_IMPORTED_MODULE_2__.Modal {\n    constructor(outcome) {\n        super({\n            title: 'Simulation succeeded',\n            titleBackground: '#16b348',\n            showAcceptButton: false,\n        });\n        this.outcome = outcome;\n        this.retried = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.backed = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n    }\n    setup(updateArgs) {\n        super.setup(updateArgs);\n        const { gameStore } = updateArgs;\n        const explanation = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(400, 32);\n        explanation.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text: 'Note: successful simulation extracts the essence from the creature',\n            color: '#777',\n            size: 14,\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextAlignment.MiddleCenter,\n        });\n        explanation.position.set(64, 60);\n        this.add(explanation);\n        const resourcesTitle = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(70, 32);\n        resourcesTitle.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text: 'Extracted elements:',\n            color: '#000',\n            size: 14,\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextAlignment.MiddleCenter,\n        });\n        resourcesTitle.position.set(64, 160);\n        this.add(resourcesTitle);\n        const resourceList = new _ui__WEBPACK_IMPORTED_MODULE_2__.ResourceList(this.outcome.resources, {\n            defaultColor: '#000',\n            checkNew: true,\n            showAmount: false,\n        });\n        resourceList.position.set(194, 160);\n        this.add(resourceList);\n        const storyStep = gameStore.getStoryStep();\n        if (_game__WEBPACK_IMPORTED_MODULE_1__.StoryCheck.isAfterTutorial(storyStep)) {\n            const backButton = new _ui__WEBPACK_IMPORTED_MODULE_2__.IconTextButton({\n                iconType: 'arrow.left',\n                iconPosition: 'left',\n                text: 'Reactor',\n            });\n            backButton.position.set(56, 310);\n            backButton.clicked.addListener(() => {\n                this.backed.notify(null);\n                this.close();\n            });\n            this.add(backButton);\n            const retryButton = new _ui__WEBPACK_IMPORTED_MODULE_2__.IconTextButton({\n                iconType: 'reload',\n                iconPosition: 'right',\n                text: 'Retry',\n            });\n            retryButton.position.set(350, 310);\n            retryButton.clicked.addListener(() => {\n                this.retried.notify(null);\n                this.close();\n            });\n            this.add(retryButton);\n        }\n        else {\n            const acceptButton = new _ui__WEBPACK_IMPORTED_MODULE_2__.Button('Continue');\n            acceptButton.updateMatrix();\n            acceptButton.setCenter(this.getSelfCenter());\n            acceptButton.position.setY(this.size.height - 80);\n            acceptButton.clicked.addListener(() => {\n                this.accepted.notify(null);\n                this.close();\n            });\n            this.add(acceptButton);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/AliveModal.ts?");

/***/ }),

/***/ "./src/objects/Cage.ts":
/*!*****************************!*\
  !*** ./src/objects/Cage.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Cage\": () => (/* binding */ Cage)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _CageEnv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CageEnv */ \"./src/objects/CageEnv.ts\");\n/* harmony import */ var _CageTemp__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CageTemp */ \"./src/objects/CageTemp.ts\");\n\n\n\nclass Cage extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor() {\n        super(512, 512);\n        this.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter();\n    }\n    setup({ spriteLoader }) {\n        this.painter.sprite = spriteLoader.load('cage', new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 512, 512));\n        const env = new _CageEnv__WEBPACK_IMPORTED_MODULE_1__.CageEnv();\n        this.add(env);\n        const temp = new _CageTemp__WEBPACK_IMPORTED_MODULE_2__.CageTemp();\n        this.add(temp);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/Cage.ts?");

/***/ }),

/***/ "./src/objects/CageEnv.ts":
/*!********************************!*\
  !*** ./src/objects/CageEnv.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CageEnv\": () => (/* binding */ CageEnv)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n\nconst configs = [\n    { value: 'desert', spriteId: 'env.desert' },\n    { value: 'underwater', spriteId: 'env.underwater' },\n    { value: 'air', spriteId: 'env.air' },\n];\nclass CageEnv extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor() {\n        super(512, 512);\n        this.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter();\n        this.zIndex = 2;\n        this.currentEnv = null;\n        this.spriteMap = new Map();\n        this.handleEnvChanged = (env) => {\n            this.currentEnv = env;\n        };\n    }\n    setup({ gameState, spriteLoader }) {\n        this.currentEnv = gameState.env;\n        for (const { value, spriteId } of configs) {\n            this.spriteMap.set(value, spriteLoader.load(spriteId, new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 512, 512)));\n        }\n        gameState.envChanged.addListener(this.handleEnvChanged);\n        this.painter.opacity = 0.3;\n    }\n    update() {\n        const currentSprite = this.spriteMap.get(this.currentEnv);\n        if (!currentSprite) {\n            this.painter.sprite = null;\n            return;\n        }\n        this.painter.sprite = currentSprite;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/CageEnv.ts?");

/***/ }),

/***/ "./src/objects/CageTemp.ts":
/*!*********************************!*\
  !*** ./src/objects/CageTemp.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CageTemp\": () => (/* binding */ CageTemp)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n\nconst animationConfigs = [\n    { value: -5, type: 'cold.low', delay: 0.64 },\n    { value: -10, type: 'cold.low', delay: 0.32 },\n    { value: -15, type: 'cold.medium', delay: 0.64 },\n    { value: -20, type: 'cold.medium', delay: 0.32 },\n    { value: -25, type: 'cold.high', delay: 0.64 },\n    { value: -30, type: 'cold.high', delay: 0.32 },\n    { value: 5, type: 'heat.low', delay: 0.64 },\n    { value: 10, type: 'heat.low', delay: 0.32 },\n    { value: 15, type: 'heat.medium', delay: 0.64 },\n    { value: 20, type: 'heat.medium', delay: 0.32 },\n    { value: 25, type: 'heat.high', delay: 0.64 },\n    { value: 30, type: 'heat.high', delay: 0.32 },\n];\nclass CageTemp extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor() {\n        super(512, 512);\n        this.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter();\n        this.zIndex = 5;\n        this.currentTemp = null;\n        this.animationMap = new Map();\n        this.handleTempChanged = (temp) => {\n            this.currentTemp = temp;\n        };\n    }\n    setup({ gameState, spriteLoader }) {\n        this.currentTemp = gameState.temp;\n        for (const { value, type, delay } of animationConfigs) {\n            this.animationMap.set(value, new _core__WEBPACK_IMPORTED_MODULE_0__.Animation([\n                spriteLoader.load(`${type}.1`, new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 512, 512)),\n                spriteLoader.load(`${type}.2`, new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 512, 512)),\n            ], { loop: true, delay }));\n        }\n        gameState.tempChanged.addListener(this.handleTempChanged);\n    }\n    update(updateArgs) {\n        const currentAnimation = this.animationMap.get(this.currentTemp);\n        if (!currentAnimation) {\n            this.painter.sprite = null;\n            return;\n        }\n        currentAnimation.update(updateArgs.deltaTime);\n        this.painter.sprite = currentAnimation.getCurrentFrame();\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/CageTemp.ts?");

/***/ }),

/***/ "./src/objects/ControlPanel.ts":
/*!*************************************!*\
  !*** ./src/objects/ControlPanel.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ControlPanel\": () => (/* binding */ ControlPanel)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _EnvSelector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EnvSelector */ \"./src/objects/EnvSelector.ts\");\n/* harmony import */ var _SimulateButton__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SimulateButton */ \"./src/objects/SimulateButton.ts\");\n/* harmony import */ var _TempSelector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TempSelector */ \"./src/objects/TempSelector.ts\");\n\n\n// import { LightSelector } from './LightSelector';\n\n\nclass ControlPanel extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor() {\n        super(266, 256);\n        this.simulated = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n    }\n    setDisabled(disabled) {\n        this.simulateButton.setDisabled(disabled);\n        this.envSelector.setDisabled(disabled);\n        this.tempSelector.setDisabled(disabled);\n    }\n    setup({ gameState, gameStore }) {\n        const storyStep = gameStore.getStoryStep();\n        const isSelectionLocked = storyStep === 'dummy_summon_live';\n        // const creatureSelector = new CreatureSelector({\n        //   mode: 'view',\n        //   preselectedCreature: gameState.creature,\n        // });\n        // this.add(creatureSelector);\n        this.envSelector = new _EnvSelector__WEBPACK_IMPORTED_MODULE_1__.EnvSelector(isSelectionLocked);\n        this.envSelector.position.set(0, 96);\n        this.envSelector.changed.addListener((value) => {\n            gameState.setEnv(value);\n        });\n        this.add(this.envSelector);\n        this.tempSelector = new _TempSelector__WEBPACK_IMPORTED_MODULE_3__.TempSelector(isSelectionLocked);\n        this.tempSelector.position.set(0, 168);\n        this.tempSelector.changed.addListener((value) => {\n            gameState.setTemp(value);\n        });\n        this.add(this.tempSelector);\n        this.simulateButton = new _SimulateButton__WEBPACK_IMPORTED_MODULE_2__.SimulateButton();\n        this.simulateButton.position.set(0, 320);\n        this.simulateButton.clicked.addListener(() => {\n            this.simulated.notify(null);\n        });\n        this.add(this.simulateButton);\n        // const lightSelector = new LightSelector();\n        // lightSelector.position.set(0, 194);\n        // this.add(lightSelector);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/ControlPanel.ts?");

/***/ }),

/***/ "./src/objects/CreatureDropList.ts":
/*!*****************************************!*\
  !*** ./src/objects/CreatureDropList.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CreatureDropList\": () => (/* binding */ CreatureDropList)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game */ \"./src/game/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n\n\n\n\nclass CreatureDropList extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor() {\n        super(256, 128);\n    }\n    setup({ gameState, gameStore }) {\n        const section = new _ui__WEBPACK_IMPORTED_MODULE_3__.Section({\n            title: 'Drops elements',\n            height: 128,\n            bodyBorderWidth: 0,\n            headerBorderWidth: 0,\n        });\n        this.add(section);\n        gameState.databaseCreatureChanged.addListener((creatureType) => {\n            this.updateResources(creatureType, gameStore);\n        });\n        this.updateResources(gameState.databaseCreature, gameStore);\n    }\n    update({ gameState, gameStore }) {\n        this.updateResources(gameState.databaseCreature, gameStore);\n    }\n    updateResources(creatureType, gameStore) {\n        const resources = this.getResources(creatureType, gameStore);\n        this.remove(this.list);\n        this.list = new _ui__WEBPACK_IMPORTED_MODULE_3__.ResourceList(resources, {\n            showAmount: false,\n        });\n        this.list.position.set(18, 44);\n        this.add(this.list);\n    }\n    getResources(creatureType, gameStore) {\n        const creatureConfig = _config__WEBPACK_IMPORTED_MODULE_2__.config.CREATURES[creatureType];\n        const creature = _game__WEBPACK_IMPORTED_MODULE_1__.Creature.fromConfig(creatureConfig);\n        const resources = creature.droppedResources.map((resource) => {\n            return new _game__WEBPACK_IMPORTED_MODULE_1__.Resource({\n                type: gameStore.isKnownDropForCreature(creatureType, resource.type)\n                    ? resource.type\n                    : 'unknown',\n                amount: 1,\n            });\n        });\n        return resources;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/CreatureDropList.ts?");

/***/ }),

/***/ "./src/objects/CreaturePanel.ts":
/*!**************************************!*\
  !*** ./src/objects/CreaturePanel.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CreaturePanel\": () => (/* binding */ CreaturePanel)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game */ \"./src/game/index.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n/* harmony import */ var _CreatureSelector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CreatureSelector */ \"./src/objects/CreatureSelector.ts\");\n/* harmony import */ var _CreatureDropList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CreatureDropList */ \"./src/objects/CreatureDropList.ts\");\n/* harmony import */ var _CreatureRequireList__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./CreatureRequireList */ \"./src/objects/CreatureRequireList.ts\");\n\n\n\n\n\n\nclass CreaturePanel extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(preselectedCreature) {\n        super(266, 590);\n        this.preselectedCreature = preselectedCreature;\n    }\n    setup({ gameState, gameStore }) {\n        const storyStep = gameStore.getStoryStep();\n        const isSelectionDummy = storyStep === 'dummy_summon_live' || storyStep === 'dummy_lived';\n        const section = new _ui__WEBPACK_IMPORTED_MODULE_2__.Section({\n            height: this.size.height,\n            width: this.size.width,\n            title: 'Database',\n            titleHeight: 48,\n            titleTextSize: 22,\n        });\n        this.add(section);\n        const creatureSelector = new _CreatureSelector__WEBPACK_IMPORTED_MODULE_3__.CreatureSelector({\n            preselectedCreature: this.preselectedCreature,\n            mode: isSelectionDummy ? 'locked' : 'select',\n        });\n        creatureSelector.position.set(5, 20);\n        creatureSelector.changed.addListener((value) => {\n            gameState.setDatabaseCreature(value);\n        });\n        this.add(creatureSelector);\n        gameState.creatureChanged.addListener((creatureType) => {\n            creatureSelector.select(creatureType);\n        });\n        const handleReactorChange = () => {\n            if (!gameState.essence || !gameState.modifier) {\n                return;\n            }\n            const creatureType = _game__WEBPACK_IMPORTED_MODULE_1__.SummonHelper.decideCreature(gameState.essence, gameState.modifier);\n            gameState.setDatabaseCreature(creatureType);\n            creatureSelector.select(creatureType);\n        };\n        gameState.essenceChanged.addListener(handleReactorChange);\n        gameState.modifierChanged.addListener(handleReactorChange);\n        const dropList = new _CreatureDropList__WEBPACK_IMPORTED_MODULE_4__.CreatureDropList();\n        dropList.position.set(5, 132);\n        this.add(dropList);\n        const requireList = new _CreatureRequireList__WEBPACK_IMPORTED_MODULE_5__.CreatureRequireList();\n        requireList.position.set(5, 340);\n        this.add(requireList);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/CreaturePanel.ts?");

/***/ }),

/***/ "./src/objects/CreatureRequireList.ts":
/*!********************************************!*\
  !*** ./src/objects/CreatureRequireList.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CreatureRequireList\": () => (/* binding */ CreatureRequireList)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game */ \"./src/game/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n\n\n\n\nclass CreatureRequireList extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor() {\n        super(256, 180);\n        this.pairs = [];\n    }\n    setup() {\n        const section = new _ui__WEBPACK_IMPORTED_MODULE_3__.Section({\n            title: 'Required for summon',\n            height: this.size.height,\n            bodyBorderWidth: 0,\n            headerBorderWidth: 0,\n        });\n        this.add(section);\n        // gameState.creatureChanged.addListener((creatureType) => {\n        //   this.updateResources(creatureType, gameStore);\n        // });\n    }\n    update({ gameState, gameStore }) {\n        this.updateResources(gameState.databaseCreature, gameStore);\n    }\n    updateResources(creatureType, gameStore) {\n        const resourceGroups = this.getResourceGroups(creatureType, gameStore);\n        for (const pair of this.pairs) {\n            this.remove(pair);\n        }\n        this.pairs = [];\n        for (const [index, resources] of resourceGroups.entries()) {\n            const rowIndex = Math.floor(index / 2);\n            const colIndex = index % 2;\n            const pair = new _ui__WEBPACK_IMPORTED_MODULE_3__.ResourceIconPair(resources[0].type, resources[1].type);\n            pair.position.set(20 + 120 * colIndex, 50 + rowIndex * 50);\n            this.pairs.push(pair);\n            this.add(pair);\n        }\n        // this.remove(this.list);\n        // this.list = new ResourceList(resources, {\n        //   showAmount: false,\n        // });\n        // this.list.position.set(16, 44);\n        // this.add(this.list);\n    }\n    getResourceGroups(creatureType, gameStore) {\n        const creatureConfig = _config__WEBPACK_IMPORTED_MODULE_2__.config.CREATURES[creatureType];\n        const creature = _game__WEBPACK_IMPORTED_MODULE_1__.Creature.fromConfig(creatureConfig);\n        const resources = creature.requiredResourceGroups.map((resources) => {\n            if (resources.length !== 2) {\n                throw new Error(`Should be pairs for \"${creatureType}\"`);\n            }\n            if (!gameStore.isKnownReqPairForCreature(creatureType, resources[0].type, resources[1].type)) {\n                return [_game__WEBPACK_IMPORTED_MODULE_1__.Resource.createUnknown(), _game__WEBPACK_IMPORTED_MODULE_1__.Resource.createUnknown()];\n            }\n            return resources;\n            // return new Resource({\n            //   type: resource.type,\n            //   amount: resource.amount,\n            //   // amount: gameStore.getResourceAmount(resource.type),\n            // });\n        });\n        return resources;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/CreatureRequireList.ts?");

/***/ }),

/***/ "./src/objects/CreatureSelector.ts":
/*!*****************************************!*\
  !*** ./src/objects/CreatureSelector.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CreatureSelector\": () => (/* binding */ CreatureSelector)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game */ \"./src/game/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n\n\n\n\nconst DEFAULT_OPTIONS = {\n    mode: 'select',\n    preselectedCreature: 'dummy',\n};\nclass CreatureSelector extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(options = {}) {\n        super(256, 64);\n        this.changed = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.handleSelected = (creatureType) => {\n            this.updateDescription();\n            this.changed.notify(creatureType);\n        };\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n        if (!this.options.preselectedCreature) {\n            this.options.preselectedCreature = DEFAULT_OPTIONS.preselectedCreature;\n        }\n        if (this.options.mode === 'select' || this.options.mode === 'locked') {\n            this.size.setHeight(100);\n        }\n    }\n    select(creatureType) {\n        this.selector.select(creatureType);\n    }\n    setup({ gameState, gameStore }) {\n        this.gameStore = gameStore;\n        if (this.options.mode === 'select' || this.options.mode === 'locked') {\n            // const shouldBlinkNext = !gameStore.isKnownCreature('fish');\n            this.selector = new _ui__WEBPACK_IMPORTED_MODULE_3__.Selector(this.getChoices(), {\n                defaultValue: this.options.preselectedCreature,\n                locked: this.options.mode === 'locked',\n                // blinkNext: shouldBlinkNext,\n            });\n            this.selector.position.set(0, 36);\n            this.selector.changed.addListener(this.handleSelected);\n            this.add(this.selector);\n            this.description = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(256, 24);\n            this.description.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n                text: 'Undiscovered creature',\n                color: '#aaa',\n                size: 14,\n                alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter.Alignment.MiddleCenter,\n            });\n            this.description.position.set(0, 70);\n            this.add(this.description);\n        }\n        else {\n            const section = new _ui__WEBPACK_IMPORTED_MODULE_3__.Section({\n                width: this.size.width,\n                height: this.size.height,\n                title: 'Creature',\n            });\n            this.add(section);\n            const creatureConfig = _config__WEBPACK_IMPORTED_MODULE_2__.config.CREATURES[gameState.creature];\n            const creature = _game__WEBPACK_IMPORTED_MODULE_1__.Creature.fromConfig(creatureConfig);\n            const title = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(256, 28);\n            title.position.set(0, 32);\n            title.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n                text: creature.name,\n                color: '#fff',\n                size: 24,\n                alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter.Alignment.MiddleCenter,\n            });\n            this.add(title);\n        }\n    }\n    update() {\n        if (this.options.mode === 'select' || this.options.mode === 'locked') {\n            this.selector.setChoices(this.getChoices());\n            this.updateDescription();\n        }\n    }\n    getChoices() {\n        const choices = Object.keys(_config__WEBPACK_IMPORTED_MODULE_2__.config.CREATURES).map((creatureType) => {\n            const creatureConfig = _config__WEBPACK_IMPORTED_MODULE_2__.config.CREATURES[creatureType];\n            const creature = _game__WEBPACK_IMPORTED_MODULE_1__.Creature.fromConfig(creatureConfig);\n            const name = this.gameStore.isKnownCreature(creature.type)\n                ? creature.name\n                : creature.unknownName;\n            return {\n                label: name,\n                value: creature.type,\n            };\n        });\n        return choices;\n    }\n    updateDescription() {\n        const creatureType = this.selector.getValue();\n        if (!creatureType)\n            return;\n        const creatureConfig = _config__WEBPACK_IMPORTED_MODULE_2__.config.CREATURES[creatureType];\n        const creature = _game__WEBPACK_IMPORTED_MODULE_1__.Creature.fromConfig(creatureConfig);\n        this.description.painter.setOptions({\n            text: this.gameStore.isKnownCreature(creature.type)\n                ? creature.description\n                : 'Undiscovered creature',\n        });\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/CreatureSelector.ts?");

/***/ }),

/***/ "./src/objects/DeathModal.ts":
/*!***********************************!*\
  !*** ./src/objects/DeathModal.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DeathModal\": () => (/* binding */ DeathModal)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game */ \"./src/game/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n\n\n\n\nclass DeathModal extends _ui__WEBPACK_IMPORTED_MODULE_3__.Modal {\n    constructor(outcome) {\n        super({\n            title: 'Simulation failed',\n            titleBackground: '#f25555',\n            showAcceptButton: false,\n        });\n        this.outcome = outcome;\n        this.retried = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.backed = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n    }\n    setup(updateArgs) {\n        super.setup(updateArgs);\n        const { gameStore } = updateArgs;\n        const explanation = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(400, 32);\n        explanation.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text: 'Note: failed simulation results in dropped modifiers',\n            color: '#777',\n            size: 14,\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextAlignment.MiddleCenter,\n        });\n        explanation.position.set(64, 60);\n        this.add(explanation);\n        const deathTitle = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(78, 32);\n        deathTitle.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text: 'Death reason:',\n            color: '#000',\n            size: 14,\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextAlignment.MiddleCenter,\n        });\n        deathTitle.position.set(84, 120);\n        this.add(deathTitle);\n        const reasonText = _config__WEBPACK_IMPORTED_MODULE_2__.config.DEATH_REASONS[this.outcome.deathType];\n        if (!reasonText) {\n            throw new Error(`No death description in config for \"${this.outcome.deathType}\"`);\n        }\n        const deathDescription = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(78, 32);\n        deathDescription.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text: reasonText,\n            color: '#000',\n            size: 18,\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextAlignment.MiddleLeft,\n        });\n        deathDescription.position.set(194, 120);\n        this.add(deathDescription);\n        const resourcesTitle = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(78, 32);\n        resourcesTitle.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text: 'Extracted elements:',\n            color: '#000',\n            size: 14,\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextAlignment.MiddleCenter,\n        });\n        resourcesTitle.position.set(64, 180);\n        this.add(resourcesTitle);\n        const resourceList = new _ui__WEBPACK_IMPORTED_MODULE_3__.ResourceList(this.outcome.resources, {\n            defaultColor: '#000',\n            checkNew: true,\n            showAmount: false,\n        });\n        resourceList.position.set(194, 180);\n        this.add(resourceList);\n        const storyStep = gameStore.getStoryStep();\n        if (_game__WEBPACK_IMPORTED_MODULE_1__.StoryCheck.isAfterTutorial(storyStep)) {\n            const backButton = new _ui__WEBPACK_IMPORTED_MODULE_3__.IconTextButton({\n                iconType: 'arrow.left',\n                iconPosition: 'left',\n                text: 'Reactor',\n            });\n            backButton.position.set(56, 310);\n            backButton.clicked.addListener(() => {\n                this.backed.notify(null);\n                this.close();\n            });\n            this.add(backButton);\n            const retryButton = new _ui__WEBPACK_IMPORTED_MODULE_3__.IconTextButton({\n                iconType: 'reload',\n                iconPosition: 'right',\n                text: 'Retry',\n            });\n            retryButton.position.set(350, 310);\n            retryButton.clicked.addListener(() => {\n                this.retried.notify(null);\n                this.close();\n            });\n            this.add(retryButton);\n        }\n        else {\n            const acceptButton = new _ui__WEBPACK_IMPORTED_MODULE_3__.Button('Continue');\n            acceptButton.updateMatrix();\n            acceptButton.setCenter(this.getSelfCenter());\n            acceptButton.position.setY(this.size.height - 80);\n            acceptButton.clicked.addListener(() => {\n                this.accepted.notify(null);\n                this.close();\n            });\n            this.add(acceptButton);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/DeathModal.ts?");

/***/ }),

/***/ "./src/objects/EnvSelector.ts":
/*!************************************!*\
  !*** ./src/objects/EnvSelector.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EnvSelector\": () => (/* binding */ EnvSelector)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game */ \"./src/game/index.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n\n\n\nconst choices = [\n    { value: 'none', label: 'none' },\n    { value: 'underwater', label: 'underwater' },\n    { value: 'desert', label: 'desert' },\n    { value: 'air', label: 'air' },\n];\nclass EnvSelector extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(locked = false) {\n        super(256, 78);\n        this.locked = locked;\n        this.changed = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n    }\n    setDisabled(disabled) {\n        this.selector.setDisabled(disabled);\n    }\n    setup() {\n        const section = new _ui__WEBPACK_IMPORTED_MODULE_2__.Section({\n            width: this.size.width,\n            height: this.size.height,\n            title: 'Environment',\n        });\n        this.add(section);\n        this.selector = new _ui__WEBPACK_IMPORTED_MODULE_2__.Selector(choices, {\n            locked: this.locked,\n            defaultValue: _game__WEBPACK_IMPORTED_MODULE_1__.Selection.DEFAULT_ENV,\n        });\n        this.selector.position.set(0, 36);\n        this.selector.changed.addListener((env) => {\n            this.changed.notify(env);\n        });\n        this.add(this.selector);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/EnvSelector.ts?");

/***/ }),

/***/ "./src/objects/EssenceSelector.ts":
/*!****************************************!*\
  !*** ./src/objects/EssenceSelector.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EssenceSelector\": () => (/* binding */ EssenceSelector)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game */ \"./src/game/index.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n\n\n\nconst ESSENCE_LIST = [\n    'dummium',\n    'fishium',\n    'arachium',\n    'reptilium',\n    'soulium',\n];\nclass EssenceSelector extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(defaultValue = undefined) {\n        super(256, 78);\n        this.defaultValue = defaultValue;\n    }\n    setup({ gameState, gameStore }) {\n        const section = new _ui__WEBPACK_IMPORTED_MODULE_2__.Section({\n            title: 'Essence',\n            width: this.size.width,\n            height: this.size.height,\n            bodyBorderWidth: 0,\n            headerBorderWidth: 0,\n        });\n        this.add(section);\n        const knownTypes = ESSENCE_LIST.filter((resourceType) => {\n            return (resourceType === 'dummium' || gameStore.isKnownResource(resourceType));\n        });\n        const resources = knownTypes.map((resourceType) => {\n            return new _game__WEBPACK_IMPORTED_MODULE_1__.Resource({\n                type: resourceType,\n                amount: resourceType === 'dummium'\n                    ? Infinity\n                    : gameStore.getResourceAmount(resourceType),\n            });\n        });\n        const selector = new _ui__WEBPACK_IMPORTED_MODULE_2__.ResourceSelector(resources, {\n            defaultValue: this.defaultValue,\n            getRequiredAmount: () => 1,\n        });\n        selector.position.set(0, 36);\n        selector.changed.addListener((essence) => {\n            gameState.setEssence(essence);\n        });\n        this.add(selector);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/EssenceSelector.ts?");

/***/ }),

/***/ "./src/objects/Inventory.ts":
/*!**********************************!*\
  !*** ./src/objects/Inventory.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Inventory\": () => (/* binding */ Inventory)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n\n\nclass Inventory extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor() {\n        super(266, 200);\n        this.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.RectPainter({\n            fillColor: '#306082',\n            borderColor: '#489880',\n            borderWidth: 3,\n        });\n    }\n    setup({ gameStore }) {\n        const section = new _ui__WEBPACK_IMPORTED_MODULE_1__.Section({\n            width: this.size.width,\n            height: this.size.height,\n            title: 'Inventory',\n        });\n        this.add(section);\n        const resources = gameStore.getResources();\n        const list = new _ui__WEBPACK_IMPORTED_MODULE_1__.ResourceList(resources);\n        list.position.set(16, 40);\n        this.add(list);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/Inventory.ts?");

/***/ }),

/***/ "./src/objects/MainMenuOverlay.ts":
/*!****************************************!*\
  !*** ./src/objects/MainMenuOverlay.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MainMenuOverlay\": () => (/* binding */ MainMenuOverlay)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n\n\nclass MainMenuOverlay extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor() {\n        super(_config__WEBPACK_IMPORTED_MODULE_1__.config.CANVAS_WIDTH, _config__WEBPACK_IMPORTED_MODULE_1__.config.CANVAS_HEIGHT);\n    }\n    setup({ spriteLoader }) {\n        const title = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(512, 128);\n        title.position.set(256, 64);\n        title.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter(spriteLoader.load('main.title.1'));\n        this.add(title);\n        const version = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(128, 32);\n        version.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text: `Version ${_config__WEBPACK_IMPORTED_MODULE_1__.config.VERSION}`,\n            color: '#999',\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter.Alignment.MiddleCenter,\n            size: 14,\n        });\n        version.position.set(870, 720);\n        this.add(version);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/MainMenuOverlay.ts?");

/***/ }),

/***/ "./src/objects/ModifierSelector.ts":
/*!*****************************************!*\
  !*** ./src/objects/ModifierSelector.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ModifierSelector\": () => (/* binding */ ModifierSelector)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game */ \"./src/game/index.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n\n\n\nconst MODIFIER_LIST = [\n    'techium',\n    'liquium',\n    'sandium',\n    'windium',\n    'flamium',\n];\nclass ModifierSelector extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(defaultValue = undefined) {\n        super(256, 78);\n        this.defaultValue = defaultValue;\n    }\n    setup({ gameState, gameStore }) {\n        const section = new _ui__WEBPACK_IMPORTED_MODULE_2__.Section({\n            title: 'Modifier',\n            width: this.size.width,\n            height: this.size.height,\n            bodyBorderWidth: 0,\n            headerBorderWidth: 0,\n        });\n        this.add(section);\n        const knownTypes = MODIFIER_LIST.filter((resourceType) => {\n            return (resourceType === 'techium' || gameStore.isKnownResource(resourceType));\n        });\n        const resources = knownTypes.map((resourceType) => {\n            return new _game__WEBPACK_IMPORTED_MODULE_1__.Resource({\n                type: resourceType,\n                amount: resourceType === 'techium'\n                    ? 0\n                    : gameStore.getResourceAmount(resourceType),\n            });\n        });\n        const selector = new _ui__WEBPACK_IMPORTED_MODULE_2__.ResourceSelector(resources, {\n            defaultValue: this.defaultValue,\n        });\n        selector.position.set(0, 36);\n        selector.changed.addListener((modifier) => {\n            gameState.setModifier(modifier);\n        });\n        this.add(selector);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/ModifierSelector.ts?");

/***/ }),

/***/ "./src/objects/Sidebar.ts":
/*!********************************!*\
  !*** ./src/objects/Sidebar.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Sidebar\": () => (/* binding */ Sidebar)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n\nclass Sidebar extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor() {\n        super(200, 600);\n    }\n    setup({ gameStore }) {\n        // const storyStep = gameStore.getStoryStep();\n        // if (storyStep !== 'dummy_summon_live') {\n        //   const inventory = new Inventory();\n        //   inventory.position.set(0, 64);\n        //   this.add(inventory);\n        // }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/Sidebar.ts?");

/***/ }),

/***/ "./src/objects/SimulateButton.ts":
/*!***************************************!*\
  !*** ./src/objects/SimulateButton.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SimulateButton\": () => (/* binding */ SimulateButton)\n/* harmony export */ });\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n\nclass SimulateButton extends _ui__WEBPACK_IMPORTED_MODULE_0__.Button {\n    constructor() {\n        super('Simulate');\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/SimulateButton.ts?");

/***/ }),

/***/ "./src/objects/Simulation.ts":
/*!***********************************!*\
  !*** ./src/objects/Simulation.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Simulation\": () => (/* binding */ Simulation)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n\n\nconst SCAN_STEP = _config__WEBPACK_IMPORTED_MODULE_1__.config.IS_DEV ? 5 : 4;\nconst SCAN_DESINATION_Y = 360;\nclass Scan extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor() {\n        super(512, 128);\n        this.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter();\n        this.zIndex = 90;\n    }\n    setup({ spriteLoader }) {\n        this.animation = new _core__WEBPACK_IMPORTED_MODULE_0__.Animation([\n            spriteLoader.load('scan.1', new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 512, 128)),\n            spriteLoader.load('scan.2', new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 512, 128)),\n            spriteLoader.load('scan.3', new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 512, 128)),\n        ], { loop: true, delay: 0.08 });\n    }\n    update(updateArgs) {\n        this.animation.update(updateArgs.deltaTime);\n        this.painter.sprite = this.animation.getCurrentFrame();\n    }\n}\nclass Simulation extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor() {\n        super(512, 512);\n        this.completed = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.state = 'scan';\n    }\n    setup() {\n        this.scan = new Scan();\n        this.scan.position.set(0, -10);\n        this.add(this.scan);\n    }\n    update() {\n        if (this.state === 'done') {\n            return;\n        }\n        if (this.scan.position.y >= SCAN_DESINATION_Y) {\n            this.completed.notify(null);\n            this.state = 'done';\n            return;\n        }\n        this.scan.translateY(-SCAN_STEP);\n        this.scan.updateMatrix();\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/Simulation.ts?");

/***/ }),

/***/ "./src/objects/SpiritResources.ts":
/*!****************************************!*\
  !*** ./src/objects/SpiritResources.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SpiritResources\": () => (/* binding */ SpiritResources)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game */ \"./src/game/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n\n\n\nclass SpiritResources extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor() {\n        super(96, 32);\n    }\n    setup({ gameStore, spriteLoader }) {\n        const creature = _game__WEBPACK_IMPORTED_MODULE_1__.Creature.fromConfig(_config__WEBPACK_IMPORTED_MODULE_2__.config.CREATURES.spirit);\n        const resources = creature.requiredResourceGroups\n            .filter((group) => {\n            return group.some((res) => {\n                return res.type === 'soulium';\n            });\n        })\n            .map((group) => {\n            return group.find((res) => {\n                return res.type !== 'soulium';\n            });\n        });\n        for (const [index, resource] of resources.entries()) {\n            const icon = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(32, 32);\n            const type = gameStore.isKnownReqPairForCreature(creature.type, 'soulium', resource.type)\n                ? resource.type\n                : 'unknown';\n            icon.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter(spriteLoader.load(`resource.${type}`, new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 32, 32)));\n            icon.position.set(index * 40, 0);\n            this.add(icon);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/SpiritResources.ts?");

/***/ }),

/***/ "./src/objects/SummonButton.ts":
/*!*************************************!*\
  !*** ./src/objects/SummonButton.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SummonButton\": () => (/* binding */ SummonButton)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n\n\nclass SummonButton extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor() {\n        super(176, 48);\n        this.clicked = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n    }\n    setup({ gameState, gameStore }) {\n        const resources = gameStore.getResources();\n        this.button = new _ui__WEBPACK_IMPORTED_MODULE_1__.Button('Summon');\n        this.add(this.button);\n        this.button.clicked.addListener(() => {\n            this.clicked.notify(null);\n        });\n        gameState.essenceChanged.addListener((essence) => {\n            // const canSummon = SummonHelper.canSummon(creature, resources);\n            // this.button.setDisabled(!canSummon);\n        });\n        gameState.modifierChanged.addListener((modifier) => { });\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/SummonButton.ts?");

/***/ }),

/***/ "./src/objects/SummonPanel.ts":
/*!************************************!*\
  !*** ./src/objects/SummonPanel.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SummonPanel\": () => (/* binding */ SummonPanel)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n/* harmony import */ var _EssenceSelector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./EssenceSelector */ \"./src/objects/EssenceSelector.ts\");\n/* harmony import */ var _ModifierSelector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ModifierSelector */ \"./src/objects/ModifierSelector.ts\");\n/* harmony import */ var _SummonButton__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SummonButton */ \"./src/objects/SummonButton.ts\");\n\n\n\n\n\nclass SummonPanel extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(preselectedCreature) {\n        super(266, 270);\n        this.preselectedCreature = preselectedCreature;\n        this.summoned = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n    }\n    setup({ gameStore }) {\n        const section = new _ui__WEBPACK_IMPORTED_MODULE_1__.Section({\n            height: this.size.height,\n            width: this.size.width,\n            title: 'Reactor',\n            titleHeight: 48,\n            titleTextSize: 22,\n        });\n        this.add(section);\n        const description = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(266, 32);\n        description.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text: 'Select elements to summon a creature',\n            color: '#aaa',\n            size: 14,\n        });\n        description.position.set(12, 62);\n        this.add(description);\n        const essenceSelector = new _EssenceSelector__WEBPACK_IMPORTED_MODULE_2__.EssenceSelector(gameStore.getLastActiveEssence());\n        essenceSelector.position.set(5, 90);\n        this.add(essenceSelector);\n        const modifierSelector = new _ModifierSelector__WEBPACK_IMPORTED_MODULE_3__.ModifierSelector(gameStore.getLastActiveModifier());\n        modifierSelector.position.set(5, 180);\n        this.add(modifierSelector);\n        const summonButton = new _SummonButton__WEBPACK_IMPORTED_MODULE_4__.SummonButton();\n        summonButton.position.set(0, 300);\n        summonButton.clicked.addListener(() => {\n            this.summoned.notify(null);\n        });\n        this.add(summonButton);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/SummonPanel.ts?");

/***/ }),

/***/ "./src/objects/Summoning.ts":
/*!**********************************!*\
  !*** ./src/objects/Summoning.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Summoning\": () => (/* binding */ Summoning)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n\n\nconst SUMMON_ANIMATION_DELAY = _config__WEBPACK_IMPORTED_MODULE_1__.config.IS_DEV ? 0 : 0.03;\nconst OPACITY_STEP = _config__WEBPACK_IMPORTED_MODULE_1__.config.IS_DEV ? 1 : 0.1;\nconst OPACITY_DELAY = 0.05;\nclass Summoning extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor() {\n        super(512, 512);\n        this.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter();\n        this.fadeInCompleted = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.fadeOutCompleted = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.completed = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.zIndex = 10;\n        this.fadeOutTimer = null;\n    }\n    setup({ spriteLoader }) {\n        this.animation = new _core__WEBPACK_IMPORTED_MODULE_0__.Animation(spriteLoader.loadList([\n            'summoning.1',\n            'summoning.2',\n            'summoning.3',\n            'summoning.4',\n            'summoning.5',\n            'summoning.6',\n            'summoning.7',\n            'summoning.8',\n            'summoning.9',\n            'summoning.10',\n            'summoning.11',\n            'summoning.12',\n            'summoning.13',\n            'summoning.14',\n            'summoning.15',\n        ], new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 512, 512)), {\n            delay: SUMMON_ANIMATION_DELAY,\n        });\n    }\n    update(updateArgs) {\n        if (!this.animation.isComplete()) {\n            this.animation.update(updateArgs.deltaTime);\n            this.painter.sprite = this.animation.getCurrentFrame();\n            return;\n        }\n        if (this.painter.opacity === 0) {\n            return;\n        }\n        if (this.fadeOutTimer === null) {\n            this.fadeInCompleted.notify(null);\n            this.fadeOutTimer = new _core__WEBPACK_IMPORTED_MODULE_0__.Timer(OPACITY_DELAY);\n            return;\n        }\n        if (this.fadeOutTimer.isDone()) {\n            this.painter.opacity = Math.max(0, this.painter.opacity - OPACITY_STEP);\n            this.fadeOutTimer.reset(OPACITY_DELAY);\n            if (this.painter.opacity === 0) {\n                this.fadeOutTimer.stop();\n                this.fadeOutCompleted.notify(null);\n                this.completed.notify(null);\n            }\n        }\n        this.fadeOutTimer.update(updateArgs.deltaTime);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/Summoning.ts?");

/***/ }),

/***/ "./src/objects/TalkModal.ts":
/*!**********************************!*\
  !*** ./src/objects/TalkModal.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TalkModal\": () => (/* binding */ TalkModal)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n\n\nclass TalkModal extends _ui__WEBPACK_IMPORTED_MODULE_1__.Modal {\n    constructor(messages, avatar = 'doctor', mode = 'full') {\n        super({\n            height: mode === 'full' ? 280 : 190,\n            width: 768,\n            autoCloseOnAccept: false,\n            acceptText: messages.length > 1 ? 'Next' : 'Done',\n            showAcceptButton: false,\n        });\n        this.messages = messages;\n        this.avatar = avatar;\n        this.mode = mode;\n        this.messageIndex = 0;\n    }\n    setup(updateArgs) {\n        super.setup(updateArgs);\n        const avatar = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(128, 128);\n        avatar.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter(updateArgs.spriteLoader.load(`avatar.${this.avatar}`, new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 128, 128)));\n        avatar.position.set(32, 32);\n        this.add(avatar);\n        this.text = new _ui__WEBPACK_IMPORTED_MODULE_1__.MultilineText({\n            lines: this.getMessageLines(),\n            size: 22,\n            color: '#000',\n            lineInterval: 10,\n        });\n        this.text.position.set(200, 42);\n        this.add(this.text);\n        this.prevButton = new _ui__WEBPACK_IMPORTED_MODULE_1__.IconTextButton({\n            iconType: 'arrow.left',\n            text: 'Back',\n            hoverTextColor: '#7daa9d',\n        });\n        this.prevButton.position.set(32, 220);\n        if (this.mode === 'compact') {\n            this.prevButton.position.set(200, 128);\n        }\n        this.prevButton.clicked.addListener(() => {\n            this.prev();\n        });\n        this.add(this.prevButton);\n        this.nextButton = new _ui__WEBPACK_IMPORTED_MODULE_1__.IconTextButton({\n            iconType: 'arrow.right',\n            iconPosition: 'right',\n            text: this.messages.length > 1 ? 'Next' : 'Done',\n            hoverTextColor: '#7daa9d',\n        });\n        this.nextButton.position.set(608, 220);\n        if (this.mode === 'compact') {\n            this.nextButton.position.set(608, 128);\n        }\n        this.nextButton.clicked.addListener(() => {\n            this.next();\n        });\n        this.add(this.nextButton);\n        this.counter = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(16, 16);\n        this.counter.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            color: '#777',\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter.Alignment.MiddleCenter,\n        });\n        if (this.mode === 'compact') {\n            this.counter.position.set(460, 138);\n        }\n        else {\n            this.counter.updateMatrix();\n            this.counter.setCenter(this.getSelfCenter());\n            this.counter.position.setY(226);\n        }\n        this.add(this.counter);\n        this.accepted.addListener(() => {\n            this.next();\n        });\n        this.updateElements();\n    }\n    hasNextMessage() {\n        return this.messageIndex < this.messages.length - 1;\n    }\n    hasPrevMessage() {\n        return this.messageIndex > 0 && this.messages.length > 1;\n    }\n    getMessageLines() {\n        return this.messages[this.messageIndex];\n    }\n    prev() {\n        if (!this.hasPrevMessage()) {\n            return;\n        }\n        this.messageIndex -= 1;\n        this.updateElements();\n    }\n    next() {\n        if (!this.hasNextMessage()) {\n            this.close();\n            return;\n        }\n        this.messageIndex += 1;\n        this.updateElements();\n    }\n    updateElements() {\n        this.counter.painter.setOptions({\n            text: `${this.messageIndex + 1}/${this.messages.length}`,\n        });\n        this.nextButton.setText(this.hasNextMessage() ? 'Next' : 'Done');\n        this.text.setLines(this.getMessageLines());\n        this.prevButton.setDisabled(!this.hasPrevMessage());\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/TalkModal.ts?");

/***/ }),

/***/ "./src/objects/TempSelector.ts":
/*!*************************************!*\
  !*** ./src/objects/TempSelector.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TempSelector\": () => (/* binding */ TempSelector)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game */ \"./src/game/index.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n\n\n\nconst choices = [\n    { value: -30, label: '-30' },\n    // { value: -25, label: '-25' },\n    // { value: -20, label: '-20' },\n    { value: -15, label: '-15' },\n    // { value: -10, label: '-10' },\n    // { value: -5, label: '-5' },\n    { value: 0, label: '0' },\n    // { value: 5, label: '+5' },\n    // { value: 10, label: '+10' },\n    { value: 15, label: '+15' },\n    // { value: 20, label: '+20' },\n    // { value: 25, label: '+25' },\n    { value: 30, label: '+30' },\n];\nclass TempSelector extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(locked = false) {\n        super(256, 78);\n        this.locked = locked;\n        this.changed = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n    }\n    setDisabled(disabled) {\n        this.selector.setDisabled(disabled);\n    }\n    setup() {\n        const section = new _ui__WEBPACK_IMPORTED_MODULE_2__.Section({\n            width: this.size.width,\n            height: this.size.height,\n            title: 'Temperature',\n        });\n        this.add(section);\n        this.selector = new _ui__WEBPACK_IMPORTED_MODULE_2__.Selector(choices, {\n            defaultValue: _game__WEBPACK_IMPORTED_MODULE_1__.Selection.DEFAULT_TEMP,\n            locked: this.locked,\n        });\n        this.selector.position.set(0, 36);\n        this.selector.changed.addListener((temp) => {\n            this.changed.notify(temp);\n        });\n        this.add(this.selector);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/TempSelector.ts?");

/***/ }),

/***/ "./src/objects/creatures/CreatureObject.ts":
/*!*************************************************!*\
  !*** ./src/objects/creatures/CreatureObject.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CreatureObject\": () => (/* binding */ CreatureObject)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core */ \"./src/core/index.ts\");\n\nconst STEP_OFFSETS = [-1, -1, +1, +1];\nconst STEP_DELAY = 0.32;\nclass CreatureObject extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(type, mode = 'creature') {\n        super(512, 512);\n        this.type = type;\n        this.mode = mode;\n        this.zIndex = 4;\n        this.stepIndex = 0;\n        this.timer = new _core__WEBPACK_IMPORTED_MODULE_0__.Timer(STEP_DELAY);\n    }\n    setup({ spriteLoader }) {\n        this.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter(spriteLoader.load(`creature.${this.type}`, new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 512, 512)));\n        if (this.mode === 'shadow') {\n            this.painter.contrast = 0;\n            this.painter.opacity = 0.2;\n        }\n        if (this.mode === 'creature') {\n            const shadow = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(128, 32);\n            shadow.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter(spriteLoader.load('shadow', new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 128, 32)));\n            shadow.updateMatrix();\n            shadow.setCenter(this.getSelfCenter());\n            shadow.position.setY(400);\n            this.add(shadow);\n        }\n    }\n    update(updateArgs) {\n        if (this.mode === 'shadow') {\n            return;\n        }\n        if (this.timer.isDone()) {\n            this.stepIndex += 1;\n            if (this.stepIndex > STEP_OFFSETS.length - 1) {\n                this.stepIndex = 0;\n            }\n            this.translateY(STEP_OFFSETS[this.stepIndex]);\n            this.updateMatrix();\n            this.timer.reset(STEP_DELAY);\n            return;\n        }\n        this.timer.update(updateArgs.deltaTime);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/creatures/CreatureObject.ts?");

/***/ }),

/***/ "./src/objects/creatures/Fish.ts":
/*!***************************************!*\
  !*** ./src/objects/creatures/Fish.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Fish\": () => (/* binding */ Fish)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core */ \"./src/core/index.ts\");\n\nclass Fish extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor() {\n        super(512, 512);\n        this.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter();\n        this.zIndex = 4;\n    }\n    setup({ spriteLoader }) {\n        this.animation = new _core__WEBPACK_IMPORTED_MODULE_0__.Animation([\n            spriteLoader.load('fish.1', new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 512, 512)),\n            spriteLoader.load('fish.2', new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 512, 512)),\n            spriteLoader.load('fish.3', new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 512, 512)),\n            spriteLoader.load('fish.2', new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 512, 512)),\n        ], { loop: true, delay: 0.32 });\n    }\n    update(updateArgs) {\n        this.animation.update(updateArgs.deltaTime);\n        this.painter.sprite = this.animation.getCurrentFrame();\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/creatures/Fish.ts?");

/***/ }),

/***/ "./src/objects/creatures/index.ts":
/*!****************************************!*\
  !*** ./src/objects/creatures/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CreatureObject\": () => (/* reexport safe */ _CreatureObject__WEBPACK_IMPORTED_MODULE_0__.CreatureObject),\n/* harmony export */   \"Fish\": () => (/* reexport safe */ _Fish__WEBPACK_IMPORTED_MODULE_1__.Fish)\n/* harmony export */ });\n/* harmony import */ var _CreatureObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CreatureObject */ \"./src/objects/creatures/CreatureObject.ts\");\n/* harmony import */ var _Fish__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Fish */ \"./src/objects/creatures/Fish.ts\");\n\n\n\n\n//# sourceURL=webpack:///./src/objects/creatures/index.ts?");

/***/ }),

/***/ "./src/objects/index.ts":
/*!******************************!*\
  !*** ./src/objects/index.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CreatureObject\": () => (/* reexport safe */ _creatures__WEBPACK_IMPORTED_MODULE_0__.CreatureObject),\n/* harmony export */   \"Fish\": () => (/* reexport safe */ _creatures__WEBPACK_IMPORTED_MODULE_0__.Fish),\n/* harmony export */   \"ArrowButton\": () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_1__.ArrowButton),\n/* harmony export */   \"Button\": () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_1__.Button),\n/* harmony export */   \"ConfirmModal\": () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_1__.ConfirmModal),\n/* harmony export */   \"IconTextButton\": () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_1__.IconTextButton),\n/* harmony export */   \"MainMenuItem\": () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_1__.MainMenuItem),\n/* harmony export */   \"Modal\": () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_1__.Modal),\n/* harmony export */   \"MultilineText\": () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_1__.MultilineText),\n/* harmony export */   \"ResourceIconPair\": () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_1__.ResourceIconPair),\n/* harmony export */   \"ResourceItem\": () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_1__.ResourceItem),\n/* harmony export */   \"ResourceList\": () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_1__.ResourceList),\n/* harmony export */   \"ResourceSelector\": () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_1__.ResourceSelector),\n/* harmony export */   \"Section\": () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_1__.Section),\n/* harmony export */   \"Selector\": () => (/* reexport safe */ _ui__WEBPACK_IMPORTED_MODULE_1__.Selector),\n/* harmony export */   \"AliveModal\": () => (/* reexport safe */ _AliveModal__WEBPACK_IMPORTED_MODULE_2__.AliveModal),\n/* harmony export */   \"Cage\": () => (/* reexport safe */ _Cage__WEBPACK_IMPORTED_MODULE_3__.Cage),\n/* harmony export */   \"ControlPanel\": () => (/* reexport safe */ _ControlPanel__WEBPACK_IMPORTED_MODULE_4__.ControlPanel),\n/* harmony export */   \"CreaturePanel\": () => (/* reexport safe */ _CreaturePanel__WEBPACK_IMPORTED_MODULE_5__.CreaturePanel),\n/* harmony export */   \"CreatureSelector\": () => (/* reexport safe */ _CreatureSelector__WEBPACK_IMPORTED_MODULE_6__.CreatureSelector),\n/* harmony export */   \"DeathModal\": () => (/* reexport safe */ _DeathModal__WEBPACK_IMPORTED_MODULE_7__.DeathModal),\n/* harmony export */   \"Inventory\": () => (/* reexport safe */ _Inventory__WEBPACK_IMPORTED_MODULE_8__.Inventory),\n/* harmony export */   \"MainMenuOverlay\": () => (/* reexport safe */ _MainMenuOverlay__WEBPACK_IMPORTED_MODULE_9__.MainMenuOverlay),\n/* harmony export */   \"Sidebar\": () => (/* reexport safe */ _Sidebar__WEBPACK_IMPORTED_MODULE_10__.Sidebar),\n/* harmony export */   \"Simulation\": () => (/* reexport safe */ _Simulation__WEBPACK_IMPORTED_MODULE_11__.Simulation),\n/* harmony export */   \"SimulateButton\": () => (/* reexport safe */ _SimulateButton__WEBPACK_IMPORTED_MODULE_12__.SimulateButton),\n/* harmony export */   \"SpiritResources\": () => (/* reexport safe */ _SpiritResources__WEBPACK_IMPORTED_MODULE_13__.SpiritResources),\n/* harmony export */   \"SummonPanel\": () => (/* reexport safe */ _SummonPanel__WEBPACK_IMPORTED_MODULE_14__.SummonPanel),\n/* harmony export */   \"Summoning\": () => (/* reexport safe */ _Summoning__WEBPACK_IMPORTED_MODULE_15__.Summoning),\n/* harmony export */   \"TalkModal\": () => (/* reexport safe */ _TalkModal__WEBPACK_IMPORTED_MODULE_16__.TalkModal)\n/* harmony export */ });\n/* harmony import */ var _creatures__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./creatures */ \"./src/objects/creatures/index.ts\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ui */ \"./src/objects/ui/index.ts\");\n/* harmony import */ var _AliveModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AliveModal */ \"./src/objects/AliveModal.ts\");\n/* harmony import */ var _Cage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Cage */ \"./src/objects/Cage.ts\");\n/* harmony import */ var _ControlPanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ControlPanel */ \"./src/objects/ControlPanel.ts\");\n/* harmony import */ var _CreaturePanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./CreaturePanel */ \"./src/objects/CreaturePanel.ts\");\n/* harmony import */ var _CreatureSelector__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./CreatureSelector */ \"./src/objects/CreatureSelector.ts\");\n/* harmony import */ var _DeathModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./DeathModal */ \"./src/objects/DeathModal.ts\");\n/* harmony import */ var _Inventory__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Inventory */ \"./src/objects/Inventory.ts\");\n/* harmony import */ var _MainMenuOverlay__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./MainMenuOverlay */ \"./src/objects/MainMenuOverlay.ts\");\n/* harmony import */ var _Sidebar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Sidebar */ \"./src/objects/Sidebar.ts\");\n/* harmony import */ var _Simulation__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Simulation */ \"./src/objects/Simulation.ts\");\n/* harmony import */ var _SimulateButton__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./SimulateButton */ \"./src/objects/SimulateButton.ts\");\n/* harmony import */ var _SpiritResources__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./SpiritResources */ \"./src/objects/SpiritResources.ts\");\n/* harmony import */ var _SummonPanel__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./SummonPanel */ \"./src/objects/SummonPanel.ts\");\n/* harmony import */ var _Summoning__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./Summoning */ \"./src/objects/Summoning.ts\");\n/* harmony import */ var _TalkModal__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./TalkModal */ \"./src/objects/TalkModal.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack:///./src/objects/index.ts?");

/***/ }),

/***/ "./src/objects/ui/ArrowButton.ts":
/*!***************************************!*\
  !*** ./src/objects/ui/ArrowButton.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ArrowButton\": () => (/* binding */ ArrowButton)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core */ \"./src/core/index.ts\");\n\nconst BLINK_DELAY = 0.32;\nclass ArrowButton extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(direction, blinking = false) {\n        super(32, 32);\n        this.direction = direction;\n        this.blinking = blinking;\n        this.clicked = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter();\n        this.state = 'active';\n        this.spriteMap = new Map();\n        this.blinkTimer = new _core__WEBPACK_IMPORTED_MODULE_0__.Timer(BLINK_DELAY);\n        this.wasBlinkingBeforeHover = false;\n    }\n    setDisabled(disabled) {\n        if (disabled) {\n            this.state = 'disabled';\n        }\n        else {\n            if (this.state === 'disabled') {\n                this.state = 'active';\n            }\n        }\n        this.painter.sprite = this.spriteMap.get(this.state);\n    }\n    setBlinking(blinking) {\n        this.blinking = blinking;\n    }\n    setup({ mouseIntersector, spriteLoader }) {\n        this.spriteMap.set('active', spriteLoader.load(`arrow.${this.direction}.active`));\n        this.spriteMap.set('hover', spriteLoader.load(`arrow.${this.direction}.hover`));\n        this.spriteMap.set('disabled', spriteLoader.load(`arrow.${this.direction}.disabled`));\n        this.spriteMap.set('blink', spriteLoader.load(`arrow.${this.direction}.blink`));\n        this.painter.sprite = this.spriteMap.get(this.state);\n        mouseIntersector.listenEnter(this);\n    }\n    update({ deltaTime, mouseIntersector }) {\n        if (this.state === 'disabled') {\n            return;\n        }\n        if (mouseIntersector.isEnterAt(this)) {\n            this.state = 'hover';\n            this.painter.sprite = this.spriteMap.get(this.state);\n        }\n        if (mouseIntersector.isLeaveAt(this)) {\n            this.state = 'active';\n            this.painter.sprite = this.spriteMap.get(this.state);\n        }\n        if (mouseIntersector.isDownAt(_core__WEBPACK_IMPORTED_MODULE_0__.MouseCode.LeftClick, this)) {\n            this.clicked.notify(null);\n        }\n        if (this.blinking) {\n            if (this.blinkTimer.isDone()) {\n                if (this.state === 'active') {\n                    this.state = 'blink';\n                }\n                else if (!mouseIntersector.isInAt(this)) {\n                    this.state = 'active';\n                }\n                this.painter.sprite = this.spriteMap.get(this.state);\n                this.blinkTimer.reset(BLINK_DELAY);\n                return;\n            }\n            this.blinkTimer.update(deltaTime);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/ui/ArrowButton.ts?");

/***/ }),

/***/ "./src/objects/ui/Button.ts":
/*!**********************************!*\
  !*** ./src/objects/ui/Button.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Button\": () => (/* binding */ Button)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core */ \"./src/core/index.ts\");\n\nclass Button extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(text = '? no text ?', kind = 'default', state = 'active') {\n        super(176, 48);\n        this.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter();\n        this.clicked = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.spriteMap = new Map();\n        this.textColorMap = new Map();\n        this.text = text;\n        this.kind = kind;\n        this.state = state;\n    }\n    setDisabled(disabled) {\n        if (disabled) {\n            this.state = 'disabled';\n        }\n        else {\n            this.state = 'active';\n        }\n        this.painter.sprite = this.spriteMap.get(this.state);\n        this.label.painter.setOptions({\n            color: this.textColorMap.get(this.state),\n        });\n    }\n    setText(text) {\n        this.label.painter.setOptions({ text });\n    }\n    setup({ mouseIntersector, spriteLoader }) {\n        this.spriteMap.set('active', spriteLoader.load(`button.${this.kind}.active`));\n        this.spriteMap.set('hover', spriteLoader.load(`button.${this.kind}.hover`));\n        this.spriteMap.set('disabled', spriteLoader.load(`button.${this.kind}.disabled`));\n        this.textColorMap.set('active', '#323c39');\n        this.textColorMap.set('hover', '#69a190');\n        this.textColorMap.set('disabled', '#676767');\n        this.label = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(176, 48);\n        this.label.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text: this.text,\n            color: '#323c39',\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextAlignment.MiddleCenter,\n        });\n        this.add(this.label);\n        this.painter.sprite = this.spriteMap.get(this.state);\n        this.label.painter.setOptions({\n            color: this.textColorMap.get(this.state),\n        });\n        mouseIntersector.listenEnter(this);\n    }\n    update({ mouseIntersector }) {\n        if (this.state !== 'disabled') {\n            if (mouseIntersector.isEnterAt(this)) {\n                this.painter.sprite = this.spriteMap.get('hover');\n            }\n            if (mouseIntersector.isLeaveAt(this)) {\n                this.painter.sprite = this.spriteMap.get('active');\n            }\n            if (mouseIntersector.isDownAt(_core__WEBPACK_IMPORTED_MODULE_0__.MouseCode.LeftClick, this)) {\n                this.clicked.notify(null);\n            }\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/ui/Button.ts?");

/***/ }),

/***/ "./src/objects/ui/ConfirmModal.ts":
/*!****************************************!*\
  !*** ./src/objects/ui/ConfirmModal.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ConfirmModal\": () => (/* binding */ ConfirmModal)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core */ \"./src/core/index.ts\");\n/* harmony import */ var _IconTextButton__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./IconTextButton */ \"./src/objects/ui/IconTextButton.ts\");\n/* harmony import */ var _Modal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Modal */ \"./src/objects/ui/Modal.ts\");\n\n\n\nconst DEFAULT_OPTIONS = {\n    title: 'Override save',\n    text: 'Are you sure?',\n};\nclass ConfirmModal extends _Modal__WEBPACK_IMPORTED_MODULE_2__.Modal {\n    constructor(options) {\n        super({\n            title: options.title || DEFAULT_OPTIONS.title,\n            showAcceptButton: false,\n        });\n        this.accepted = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.declined = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n    }\n    setup(updateArgs) {\n        super.setup(updateArgs);\n        const title = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(400, 32);\n        title.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text: 'There is already a game in progress. This will remove the progress.',\n            color: '#333',\n            size: 16,\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextAlignment.MiddleCenter,\n        });\n        title.updateMatrix();\n        title.setCenter(this.getSelfCenter());\n        title.position.setY(100);\n        this.add(title);\n        const description = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(70, 32);\n        description.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text: 'Are you sure you want to start a new game?',\n            color: '#333',\n            size: 20,\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextAlignment.MiddleCenter,\n        });\n        description.updateMatrix();\n        description.setCenter(this.getSelfCenter());\n        description.position.setY(150);\n        this.add(description);\n        const declineButton = new _IconTextButton__WEBPACK_IMPORTED_MODULE_1__.IconTextButton({\n            iconType: 'arrow.left',\n            iconPosition: 'left',\n            text: 'Cancel',\n        });\n        declineButton.position.set(56, 310);\n        declineButton.clicked.addListener(() => {\n            this.declined.notify(null);\n            this.close();\n        });\n        this.add(declineButton);\n        const acceptButton = new _IconTextButton__WEBPACK_IMPORTED_MODULE_1__.IconTextButton({\n            iconType: 'arrow.right',\n            iconPosition: 'right',\n            text: 'Confirm',\n        });\n        acceptButton.position.set(350, 310);\n        acceptButton.clicked.addListener(() => {\n            this.accepted.notify(null);\n            this.close();\n        });\n        this.add(acceptButton);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/ui/ConfirmModal.ts?");

/***/ }),

/***/ "./src/objects/ui/IconTextButton.ts":
/*!******************************************!*\
  !*** ./src/objects/ui/IconTextButton.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"IconTextButton\": () => (/* binding */ IconTextButton)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core */ \"./src/core/index.ts\");\n\nclass IconTextButton extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(options) {\n        super(128, 32);\n        this.clicked = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.state = 'active';\n        this.iconSpriteMap = new Map();\n        this.labelColorMap = new Map();\n        this.options = Object.assign({}, {\n            iconPosition: 'left',\n            activeTextColor: '#489880',\n            hoverTextColor: '#84d74b',\n        }, options);\n    }\n    setDisabled(disabled) {\n        if (disabled) {\n            this.state = 'disabled';\n        }\n        else {\n            if (this.state === 'disabled') {\n                this.state = 'active';\n            }\n        }\n        this.updateElements();\n    }\n    setText(text) {\n        if (this.label) {\n            this.label.painter.setOptions({ text });\n        }\n    }\n    setup({ mouseIntersector, spriteLoader }) {\n        this.iconSpriteMap.set('active', spriteLoader.load(`${this.options.iconType}.active`));\n        this.iconSpriteMap.set('hover', spriteLoader.load(`${this.options.iconType}.hover`));\n        this.iconSpriteMap.set('disabled', spriteLoader.load(`${this.options.iconType}.disabled`));\n        this.labelColorMap.set('active', this.options.activeTextColor);\n        this.labelColorMap.set('hover', this.options.hoverTextColor);\n        this.labelColorMap.set('disabled', '#aaa');\n        this.arrow = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(32, 32);\n        this.arrow.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter();\n        if (this.options.iconPosition === 'right') {\n            this.arrow.position.setX(this.size.width - 32);\n        }\n        this.add(this.arrow);\n        this.label = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(88, 32);\n        this.label.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text: this.options.text,\n            color: '#323c39',\n            alignment: this.options.iconPosition === 'left'\n                ? _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter.Alignment.MiddleLeft\n                : _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter.Alignment.MiddleRight,\n        });\n        if (this.options.iconPosition === 'left') {\n            this.label.position.set(38, 0);\n        }\n        else {\n            this.label.position.set(0, 0);\n        }\n        this.add(this.label);\n        this.updateElements();\n        mouseIntersector.listenEnter(this);\n    }\n    update({ mouseIntersector }) {\n        if (this.state !== 'disabled') {\n            if (mouseIntersector.isEnterAt(this)) {\n                this.state = 'hover';\n                this.updateElements();\n            }\n            if (mouseIntersector.isLeaveAt(this)) {\n                this.state = 'active';\n                this.updateElements();\n            }\n            if (mouseIntersector.isDownAt(_core__WEBPACK_IMPORTED_MODULE_0__.MouseCode.LeftClick, this)) {\n                this.clicked.notify(null);\n            }\n        }\n    }\n    updateElements() {\n        if (this.label) {\n            this.label.painter.setOptions({\n                color: this.labelColorMap.get(this.state),\n            });\n        }\n        if (this.arrow) {\n            this.arrow.painter.sprite = this.iconSpriteMap.get(this.state);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/ui/IconTextButton.ts?");

/***/ }),

/***/ "./src/objects/ui/MainMenuItem.ts":
/*!****************************************!*\
  !*** ./src/objects/ui/MainMenuItem.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MainMenuItem\": () => (/* binding */ MainMenuItem)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core */ \"./src/core/index.ts\");\n\nclass MainMenuItem extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(title) {\n        super(256, 48);\n        this.title = title;\n        this.clicked = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n    }\n    setup({ mouseIntersector }) {\n        this.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text: this.title,\n            color: '#fff',\n            size: 36,\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter.Alignment.MiddleCenter,\n        });\n        mouseIntersector.listenEnter(this);\n    }\n    update({ mouseIntersector }) {\n        if (mouseIntersector.isEnterAt(this)) {\n            this.painter.setOptions({ color: '#e9e6ab' });\n        }\n        if (mouseIntersector.isLeaveAt(this)) {\n            this.painter.setOptions({ color: '#fff' });\n        }\n        if (mouseIntersector.isDownAt(_core__WEBPACK_IMPORTED_MODULE_0__.MouseCode.LeftClick, this)) {\n            this.clicked.notify(null);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/ui/MainMenuItem.ts?");

/***/ }),

/***/ "./src/objects/ui/Modal.ts":
/*!*********************************!*\
  !*** ./src/objects/ui/Modal.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Modal\": () => (/* binding */ Modal)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core */ \"./src/core/index.ts\");\n/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Button */ \"./src/objects/ui/Button.ts\");\n\n\nconst DEFAULT_OPTIONS = {\n    titleBackground: '#b38400',\n    acceptText: 'Continue',\n    width: 532,\n    height: 384,\n    autoCloseOnAccept: true,\n    showAcceptButton: true,\n};\nclass Modal extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(options = {}) {\n        super();\n        this.accepted = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.closed = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.RectPainter({\n            fillColor: '#f2d78c',\n            borderColor: '#b38400',\n            borderWidth: 3,\n        });\n        this.zIndex = 100;\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n        this.size.set(this.options.width, this.options.height);\n    }\n    setup({ mouseIntersector }) {\n        mouseIntersector.trap(this);\n        if (this.options.title) {\n            const header = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(this.size.width, 58);\n            header.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.RectPainter({\n                fillColor: this.options.titleBackground,\n                borderColor: '#b38400',\n                borderWidth: 3,\n            });\n            this.add(header);\n            const title = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(this.size.width, 58);\n            title.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n                text: this.options.title,\n                color: '#fff',\n                size: 30,\n                alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextAlignment.MiddleCenter,\n            });\n            this.add(title);\n        }\n        if (this.options.showAcceptButton) {\n            this.acceptButton = new _Button__WEBPACK_IMPORTED_MODULE_1__.Button(this.options.acceptText);\n            this.acceptButton.updateMatrix();\n            this.acceptButton.setCenter(this.getSelfCenter());\n            this.acceptButton.position.setY(this.size.height - 80);\n            this.acceptButton.clicked.addListener(() => {\n                this.accepted.notify(null);\n                if (this.options.autoCloseOnAccept) {\n                    this.close();\n                }\n            });\n            this.add(this.acceptButton);\n        }\n        this.untrapOnClose = () => {\n            mouseIntersector.untrap(this);\n        };\n    }\n    close() {\n        this.untrapOnClose();\n        this.closed.notify(null);\n        this.removeSelf();\n    }\n    setAcceptText(acceptText) {\n        this.options.acceptText = acceptText;\n        this.acceptButton.setText(acceptText);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/ui/Modal.ts?");

/***/ }),

/***/ "./src/objects/ui/MultilineText.ts":
/*!*****************************************!*\
  !*** ./src/objects/ui/MultilineText.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MultilineText\": () => (/* binding */ MultilineText)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core */ \"./src/core/index.ts\");\n\nconst DEFAULT_OPTIONS = {\n    color: 'red',\n    size: 18,\n    lines: [],\n    lineInterval: 0,\n};\nclass MultilineText extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(options = {}) {\n        super();\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    }\n    setLines(lines) {\n        this.options.lines = lines;\n        this.drawLines();\n    }\n    setup() {\n        this.drawLines();\n    }\n    drawLines() {\n        this.removeAllChildren();\n        for (const [index, line] of this.options.lines.entries()) {\n            const text = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(0, this.options.size);\n            text.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n                text: line,\n                color: this.options.color,\n                size: this.options.size,\n            });\n            text.position.set(0, this.options.size * index + this.options.lineInterval * index);\n            this.add(text);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/ui/MultilineText.ts?");

/***/ }),

/***/ "./src/objects/ui/ResourceIconPair.ts":
/*!********************************************!*\
  !*** ./src/objects/ui/ResourceIconPair.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ResourceIconPair\": () => (/* binding */ ResourceIconPair)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core */ \"./src/core/index.ts\");\n\nclass ResourceIconPair extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(type1, type2) {\n        super(96, 32);\n        this.type1 = type1;\n        this.type2 = type2;\n    }\n    setup({ spriteLoader }) {\n        const icon1 = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(32, 32);\n        icon1.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter(spriteLoader.load(`resource.${this.type1}`, new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 32, 32)));\n        this.add(icon1);\n        const icon2 = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(32, 32);\n        icon2.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter(spriteLoader.load(`resource.${this.type2}`, new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 32, 32)));\n        icon2.position.set(54, 0);\n        this.add(icon2);\n        const plus = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(32, 32);\n        plus.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text: '+',\n            color: '#fff',\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter.Alignment.MiddleCenter,\n        });\n        plus.position.set(27, 0);\n        this.add(plus);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/ui/ResourceIconPair.ts?");

/***/ }),

/***/ "./src/objects/ui/ResourceItem.ts":
/*!****************************************!*\
  !*** ./src/objects/ui/ResourceItem.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ResourceItem\": () => (/* binding */ ResourceItem)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core */ \"./src/core/index.ts\");\n\nconst config = {\n    none: { title: 'No modifier', spriteId: null },\n    techium: { title: 'Techium', spriteId: 'resource.techium' },\n    soulium: { title: 'Soulium', spriteId: 'resource.soulium' },\n    dummium: { title: 'Dummium', spriteId: 'resource.dummium' },\n    liquium: { title: 'Liquium', spriteId: 'resource.liquium' },\n    sandium: { title: 'Sandium', spriteId: 'resource.sandium' },\n    fishium: { title: 'Fishium', spriteId: 'resource.fishium' },\n    arachium: { title: 'Arachium', spriteId: 'resource.arachium' },\n    windium: { title: 'Windium', spriteId: 'resource.windium' },\n    flamium: { title: 'Flamium', spriteId: 'resource.flamium' },\n    reptilium: { title: 'Reptilium', spriteId: 'resource.reptilium' },\n    wendsdium: { title: 'Wendsdium', spriteId: 'resource.wendsdium' },\n    unknown: { title: 'Undiscovered', spriteId: 'resource.unknown' },\n};\nconst DEFAULT_OPTIONS = {\n    amount: undefined,\n    requiredAmount: undefined,\n    defaultColor: '#fff',\n    requiredColor: '#f25555',\n    sufficientColor: '#28fb28',\n    isNew: false,\n    iconRect: new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 32, 32),\n};\nclass ResourceItem extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(options) {\n        super(182, 32);\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    }\n    setup({ spriteLoader }) {\n        const { type, amount, requiredAmount, defaultColor, requiredColor, sufficientColor, isNew, } = this.options;\n        const resource = config[type];\n        const icon = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(this.options.iconRect.width, this.options.iconRect.height);\n        icon.position.setY((this.size.height - this.options.iconRect.height) / 2);\n        if (resource.spriteId) {\n            icon.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter(spriteLoader.load(resource.spriteId, this.options.iconRect));\n        }\n        this.add(icon);\n        let text = resource.title;\n        let color = defaultColor;\n        if (type === 'unknown') {\n            color = '#aeaeae';\n        }\n        else if (type === 'none') {\n        }\n        else if (isNew) {\n            text += ' (new)';\n        }\n        else if (amount !== undefined) {\n            if (requiredAmount === undefined) {\n                if (amount === Infinity) {\n                    text += ' ()';\n                }\n                else {\n                    text += ` (${amount})`;\n                    if (amount === 0) {\n                        color = requiredColor;\n                    }\n                }\n            }\n            else {\n                // text += ` (${amount}/${requiredAmount})`;\n                // if (requiredAmount > amount) {\n                if (amount === Infinity) {\n                    text += ` (/${requiredAmount})`;\n                    color = sufficientColor;\n                }\n                else if (amount === 0) {\n                    text += ` (${amount}/${requiredAmount})`;\n                    color = requiredColor;\n                }\n                else {\n                    text += ` (${amount}/${requiredAmount})`;\n                    color = sufficientColor;\n                }\n            }\n        }\n        const title = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(128, 32);\n        title.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text,\n            color,\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextAlignment.MiddleLeft,\n        });\n        title.position.set(this.options.iconRect.width + 12, 0);\n        this.add(title);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/ui/ResourceItem.ts?");

/***/ }),

/***/ "./src/objects/ui/ResourceList.ts":
/*!****************************************!*\
  !*** ./src/objects/ui/ResourceList.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ResourceList\": () => (/* binding */ ResourceList)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core */ \"./src/core/index.ts\");\n/* harmony import */ var _ResourceItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ResourceItem */ \"./src/objects/ui/ResourceItem.ts\");\n\n\nconst DEFAULT_OPTIONS = {\n    defaultColor: '#fff',\n    checkNew: false,\n    showAmount: true,\n    getRequiredAmount: undefined,\n};\nclass ResourceList extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(resources, options = {}) {\n        super(182, resources.length * 40);\n        this.resources = resources;\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    }\n    setup({ gameStore }) {\n        for (const [index, resource] of this.resources.entries()) {\n            let isNew = false;\n            if (this.options.checkNew) {\n                isNew = !gameStore.isKnownResource(resource.type);\n            }\n            const requiredAmount = this.options.getRequiredAmount\n                ? this.options.getRequiredAmount(resource)\n                : undefined;\n            const resourceItem = new _ResourceItem__WEBPACK_IMPORTED_MODULE_1__.ResourceItem({\n                type: resource.type,\n                amount: this.options.showAmount ? resource.amount : undefined,\n                requiredAmount: this.options.showAmount ? requiredAmount : undefined,\n                defaultColor: this.options.defaultColor,\n                isNew,\n            });\n            resourceItem.position.set(0, 40 * index);\n            this.add(resourceItem);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/ui/ResourceList.ts?");

/***/ }),

/***/ "./src/objects/ui/ResourceSelector.ts":
/*!********************************************!*\
  !*** ./src/objects/ui/ResourceSelector.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ResourceSelector\": () => (/* binding */ ResourceSelector)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core */ \"./src/core/index.ts\");\n/* harmony import */ var _ArrowButton__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ArrowButton */ \"./src/objects/ui/ArrowButton.ts\");\n/* harmony import */ var _ResourceItem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ResourceItem */ \"./src/objects/ui/ResourceItem.ts\");\n\n\n\nclass ResourceSelector extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    // private label: GameObject;\n    constructor(resources, options = {}) {\n        super(256, 32);\n        this.resources = resources;\n        this.changed = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.options = Object.assign({}, {\n            defaultValue: undefined,\n            locked: false,\n            blinkNext: false,\n            getRequiredAmount: undefined,\n        }, options);\n    }\n    // setDisabled() {\n    //   this.arrowLeft.setDisabled(true);\n    //   this.arrowRight.setDisabled(true);\n    // }\n    setup() {\n        this.arrowLeft = new _ArrowButton__WEBPACK_IMPORTED_MODULE_1__.ArrowButton('left');\n        this.arrowLeft.position.set(8, 0);\n        this.arrowLeft.clicked.addListener(() => {\n            this.selectPrev();\n        });\n        if (this.options.locked) {\n            this.arrowLeft.setDisabled(true);\n        }\n        this.add(this.arrowLeft);\n        this.arrowRight = new _ArrowButton__WEBPACK_IMPORTED_MODULE_1__.ArrowButton('right', this.options.blinkNext);\n        this.arrowRight.position.set(216, 0);\n        this.arrowRight.clicked.addListener(() => {\n            this.selectNext();\n        });\n        if (this.options.locked) {\n            this.arrowRight.setDisabled(true);\n        }\n        this.add(this.arrowRight);\n        const defaultIndex = this.resources.findIndex((resource) => resource.type === this.options.defaultValue);\n        const selectedIndex = defaultIndex >= 0 ? defaultIndex : 0;\n        this.selectIndex(selectedIndex);\n    }\n    getSelectedChoice() {\n        return this.resources[this.selectedIndex];\n    }\n    hasNext() {\n        return this.selectedIndex < this.resources.length - 1;\n    }\n    hasPrev() {\n        return this.selectedIndex > 0;\n    }\n    selectPrev() {\n        const nextIndex = Math.max(this.selectedIndex - 1, 0);\n        this.selectIndex(nextIndex);\n    }\n    selectNext() {\n        const nextIndex = Math.min(this.selectedIndex + 1, this.resources.length - 1);\n        this.selectIndex(nextIndex);\n    }\n    selectIndex(nextIndex) {\n        if (this.resources.length === 0) {\n            return;\n        }\n        if (this.selectedIndex === nextIndex) {\n            return;\n        }\n        this.selectedIndex = nextIndex;\n        const resource = this.resources[this.selectedIndex];\n        let requiredAmount = undefined;\n        // if (this.options.getRequiredAmount) {\n        //   requiredAmount = this.options.getRequiredAmount(resource);\n        // }\n        this.remove(this.item);\n        this.item = new _ResourceItem__WEBPACK_IMPORTED_MODULE_2__.ResourceItem({\n            type: resource.type,\n            // amount: resource.amount,\n            iconRect: new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 16, 16),\n            requiredAmount,\n        });\n        this.item.position.set(70, 0);\n        this.add(this.item);\n        this.arrowLeft.setDisabled(!this.hasPrev());\n        this.arrowRight.setDisabled(!this.hasNext());\n        this.changed.notify(this.getSelectedChoice().type);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/ui/ResourceSelector.ts?");

/***/ }),

/***/ "./src/objects/ui/Section.ts":
/*!***********************************!*\
  !*** ./src/objects/ui/Section.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Section\": () => (/* binding */ Section)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core */ \"./src/core/index.ts\");\n\nconst DEFAULT_OPTIONS = {\n    height: 32,\n    width: 256,\n    titleColor: '#489880',\n    titleHeight: 32,\n    titleTextSize: 16,\n    theme: 'blue',\n    bodyBorderWidth: 3,\n    headerBorderWidth: 3,\n};\nclass Section extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(argOptions = {}) {\n        const options = Object.assign({}, DEFAULT_OPTIONS, argOptions);\n        super(options.width, options.height);\n        this.options = options;\n        this.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.RectPainter({\n            fillColor: '#306082',\n            borderColor: '#489880',\n            borderWidth: this.options.bodyBorderWidth,\n        });\n    }\n    setup() {\n        const header = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(this.options.width, this.options.titleHeight);\n        header.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.RectPainter({\n            fillColor: '#133c59',\n            borderColor: '#489880',\n            borderWidth: this.options.headerBorderWidth,\n        });\n        this.add(header);\n        const title = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(this.options.width, this.options.titleHeight);\n        title.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            text: this.options.title,\n            color: this.options.titleColor,\n            size: this.options.titleTextSize,\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter.Alignment.MiddleCenter,\n        });\n        this.add(title);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/ui/Section.ts?");

/***/ }),

/***/ "./src/objects/ui/Selector.ts":
/*!************************************!*\
  !*** ./src/objects/ui/Selector.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Selector\": () => (/* binding */ Selector)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core */ \"./src/core/index.ts\");\n/* harmony import */ var _ArrowButton__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ArrowButton */ \"./src/objects/ui/ArrowButton.ts\");\n\n\nclass Selector extends _core__WEBPACK_IMPORTED_MODULE_0__.GameObject {\n    constructor(choices = [], options = {}) {\n        super(256, 32);\n        this.choices = choices;\n        this.changed = new _core__WEBPACK_IMPORTED_MODULE_0__.Subject();\n        this.options = Object.assign({}, {\n            defaultValue: undefined,\n            locked: false,\n            blinkNext: false,\n        }, options);\n    }\n    setChoices(choices) {\n        this.choices = choices;\n        this.updateLabelText();\n    }\n    setDisabled(disabled) {\n        this.arrowLeft.setDisabled(disabled);\n        this.arrowRight.setDisabled(disabled);\n    }\n    select(value) {\n        const index = this.choices.findIndex((choice) => choice.value === value);\n        if (index !== -1) {\n            this.selectIndex(index);\n        }\n    }\n    getValue() {\n        const choice = this.getSelectedChoice();\n        return choice ? choice.value : undefined;\n    }\n    setup() {\n        this.arrowLeft = new _ArrowButton__WEBPACK_IMPORTED_MODULE_1__.ArrowButton('left');\n        this.arrowLeft.position.set(8, 0);\n        this.arrowLeft.clicked.addListener(() => {\n            this.selectPrev();\n        });\n        if (this.options.locked) {\n            this.arrowLeft.setDisabled(true);\n        }\n        this.add(this.arrowLeft);\n        this.arrowRight = new _ArrowButton__WEBPACK_IMPORTED_MODULE_1__.ArrowButton('right', this.options.blinkNext);\n        this.arrowRight.position.set(216, 0);\n        this.arrowRight.clicked.addListener(() => {\n            this.selectNext();\n        });\n        if (this.options.locked) {\n            this.arrowRight.setDisabled(true);\n        }\n        this.add(this.arrowRight);\n        this.label = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(176, 32);\n        this.label.position.set(40, 0);\n        this.label.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n            color: '#fff',\n            size: 24,\n            alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextAlignment.MiddleCenter,\n        });\n        this.add(this.label);\n        const defaultIndex = this.choices.findIndex((choice) => choice.value === this.options.defaultValue);\n        const selectedIndex = defaultIndex >= 0 ? defaultIndex : 0;\n        this.selectIndex(selectedIndex);\n    }\n    getSelectedChoice() {\n        return this.choices[this.selectedIndex];\n    }\n    hasNext() {\n        return this.selectedIndex < this.choices.length - 1;\n    }\n    hasPrev() {\n        return this.selectedIndex > 0;\n    }\n    selectPrev() {\n        const nextIndex = Math.max(this.selectedIndex - 1, 0);\n        this.selectIndex(nextIndex);\n    }\n    selectNext() {\n        const nextIndex = Math.min(this.selectedIndex + 1, this.choices.length - 1);\n        this.selectIndex(nextIndex);\n    }\n    selectIndex(nextIndex) {\n        if (this.selectedIndex === nextIndex) {\n            return;\n        }\n        this.selectedIndex = nextIndex;\n        this.updateLabelText();\n        this.changed.notify(this.getSelectedChoice().value);\n    }\n    updateLabelText() {\n        if (this.label) {\n            const painter = this.label.painter;\n            painter.setOptions({ text: this.getSelectedChoice().label });\n        }\n        if (!this.options.locked) {\n            if (this.arrowLeft) {\n                this.arrowLeft.setDisabled(!this.hasPrev());\n            }\n            if (this.arrowRight) {\n                this.arrowRight.setDisabled(!this.hasNext());\n            }\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/objects/ui/Selector.ts?");

/***/ }),

/***/ "./src/objects/ui/index.ts":
/*!*********************************!*\
  !*** ./src/objects/ui/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ArrowButton\": () => (/* reexport safe */ _ArrowButton__WEBPACK_IMPORTED_MODULE_0__.ArrowButton),\n/* harmony export */   \"Button\": () => (/* reexport safe */ _Button__WEBPACK_IMPORTED_MODULE_1__.Button),\n/* harmony export */   \"ConfirmModal\": () => (/* reexport safe */ _ConfirmModal__WEBPACK_IMPORTED_MODULE_2__.ConfirmModal),\n/* harmony export */   \"IconTextButton\": () => (/* reexport safe */ _IconTextButton__WEBPACK_IMPORTED_MODULE_3__.IconTextButton),\n/* harmony export */   \"MainMenuItem\": () => (/* reexport safe */ _MainMenuItem__WEBPACK_IMPORTED_MODULE_4__.MainMenuItem),\n/* harmony export */   \"Modal\": () => (/* reexport safe */ _Modal__WEBPACK_IMPORTED_MODULE_5__.Modal),\n/* harmony export */   \"MultilineText\": () => (/* reexport safe */ _MultilineText__WEBPACK_IMPORTED_MODULE_6__.MultilineText),\n/* harmony export */   \"Section\": () => (/* reexport safe */ _Section__WEBPACK_IMPORTED_MODULE_7__.Section),\n/* harmony export */   \"Selector\": () => (/* reexport safe */ _Selector__WEBPACK_IMPORTED_MODULE_8__.Selector),\n/* harmony export */   \"ResourceIconPair\": () => (/* reexport safe */ _ResourceIconPair__WEBPACK_IMPORTED_MODULE_9__.ResourceIconPair),\n/* harmony export */   \"ResourceItem\": () => (/* reexport safe */ _ResourceItem__WEBPACK_IMPORTED_MODULE_10__.ResourceItem),\n/* harmony export */   \"ResourceList\": () => (/* reexport safe */ _ResourceList__WEBPACK_IMPORTED_MODULE_11__.ResourceList),\n/* harmony export */   \"ResourceSelector\": () => (/* reexport safe */ _ResourceSelector__WEBPACK_IMPORTED_MODULE_12__.ResourceSelector)\n/* harmony export */ });\n/* harmony import */ var _ArrowButton__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ArrowButton */ \"./src/objects/ui/ArrowButton.ts\");\n/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Button */ \"./src/objects/ui/Button.ts\");\n/* harmony import */ var _ConfirmModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConfirmModal */ \"./src/objects/ui/ConfirmModal.ts\");\n/* harmony import */ var _IconTextButton__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./IconTextButton */ \"./src/objects/ui/IconTextButton.ts\");\n/* harmony import */ var _MainMenuItem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MainMenuItem */ \"./src/objects/ui/MainMenuItem.ts\");\n/* harmony import */ var _Modal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Modal */ \"./src/objects/ui/Modal.ts\");\n/* harmony import */ var _MultilineText__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./MultilineText */ \"./src/objects/ui/MultilineText.ts\");\n/* harmony import */ var _Section__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Section */ \"./src/objects/ui/Section.ts\");\n/* harmony import */ var _Selector__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Selector */ \"./src/objects/ui/Selector.ts\");\n/* harmony import */ var _ResourceIconPair__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ResourceIconPair */ \"./src/objects/ui/ResourceIconPair.ts\");\n/* harmony import */ var _ResourceItem__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./ResourceItem */ \"./src/objects/ui/ResourceItem.ts\");\n/* harmony import */ var _ResourceList__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./ResourceList */ \"./src/objects/ui/ResourceList.ts\");\n/* harmony import */ var _ResourceSelector__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./ResourceSelector */ \"./src/objects/ui/ResourceSelector.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack:///./src/objects/ui/index.ts?");

/***/ }),

/***/ "./src/scenes/AboutScene.ts":
/*!**********************************!*\
  !*** ./src/scenes/AboutScene.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AboutScene\": () => (/* binding */ AboutScene)\n/* harmony export */ });\n/* harmony import */ var _objects__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../objects */ \"./src/objects/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n/* harmony import */ var _GameSceneType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GameSceneType */ \"./src/scenes/GameSceneType.ts\");\n/* harmony import */ var _GameScene__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./GameScene */ \"./src/scenes/GameScene.ts\");\n\n\n\n\nclass AboutScene extends _GameScene__WEBPACK_IMPORTED_MODULE_3__.GameScene {\n    setup() {\n        const overlay = new _objects__WEBPACK_IMPORTED_MODULE_0__.MainMenuOverlay();\n        this.root.add(overlay);\n        const backItem = new _objects__WEBPACK_IMPORTED_MODULE_0__.MainMenuItem('< BACK');\n        backItem.position.set(384, 256);\n        backItem.clicked.addListener(() => {\n            this.navigator.push(_GameSceneType__WEBPACK_IMPORTED_MODULE_2__.GameSceneType.MainMenu);\n        });\n        this.root.add(backItem);\n        const githubItem = new _objects__WEBPACK_IMPORTED_MODULE_0__.MainMenuItem('GITHUB');\n        githubItem.position.set(384, 312);\n        githubItem.clicked.addListener(() => {\n            window.open(_config__WEBPACK_IMPORTED_MODULE_1__.config.GITHUB_LINK);\n        });\n        this.root.add(githubItem);\n    }\n    update(updateArgs) {\n        super.update(updateArgs);\n    }\n    startGame(storyStep) {\n        if (storyStep === 'intro') {\n            this.navigator.push(_GameSceneType__WEBPACK_IMPORTED_MODULE_2__.GameSceneType.Intro);\n        }\n        else {\n            this.navigator.push(_GameSceneType__WEBPACK_IMPORTED_MODULE_2__.GameSceneType.Level);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/scenes/AboutScene.ts?");

/***/ }),

/***/ "./src/scenes/FinalScene.ts":
/*!**********************************!*\
  !*** ./src/scenes/FinalScene.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"FinalScene\": () => (/* binding */ FinalScene)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _objects__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../objects */ \"./src/objects/index.ts\");\n/* harmony import */ var _GameSceneType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GameSceneType */ \"./src/scenes/GameSceneType.ts\");\n/* harmony import */ var _GameScene__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./GameScene */ \"./src/scenes/GameScene.ts\");\n\n\n\n\nconst messages = [];\nmessages.push(['BOO!'], ['(you died)']);\nclass FinalScene extends _GameScene__WEBPACK_IMPORTED_MODULE_3__.GameScene {\n    setup({ gameStore, spriteLoader }) {\n        const bigSpirit = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(3000, 3000);\n        bigSpirit.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.SpritePainter(spriteLoader.load('creature.spirit', new _core__WEBPACK_IMPORTED_MODULE_0__.Rect(0, 0, 3000, 3000)));\n        bigSpirit.position.set(-1100, -800);\n        this.root.add(bigSpirit);\n        const spiritModal = new _objects__WEBPACK_IMPORTED_MODULE_1__.TalkModal(messages, 'spirit', 'compact');\n        spiritModal.updateMatrix();\n        spiritModal.setCenter(this.root.getSelfCenter());\n        spiritModal.position.setY(512);\n        spiritModal.closed.addListener(() => {\n            bigSpirit.removeSelf();\n            spiritModal.removeSelf();\n            gameStore.setStoryStep('finished');\n            gameStore.save();\n            const endModal = new _objects__WEBPACK_IMPORTED_MODULE_1__.Modal({\n                title: 'Story complete',\n                acceptText: 'Main menu',\n            });\n            endModal.updateMatrix();\n            endModal.setCenter(this.root.getSelfCenter());\n            endModal.updateMatrix();\n            endModal.closed.addListener(() => {\n                this.navigator.push(_GameSceneType__WEBPACK_IMPORTED_MODULE_2__.GameSceneType.MainMenu);\n            });\n            const endText = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject(128, 32);\n            endText.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n                text: 'You can continue the game to discover the rest :)',\n                color: '#333',\n                alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter.Alignment.MiddleCenter,\n            });\n            endText.updateMatrix();\n            endText.setCenter(endModal.getSelfCenter());\n            endText.updateMatrix();\n            endModal.add(endText);\n            this.root.add(endModal);\n        });\n        this.root.add(spiritModal);\n    }\n    update(updateArgs) {\n        super.update(updateArgs);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/scenes/FinalScene.ts?");

/***/ }),

/***/ "./src/scenes/GameScene.ts":
/*!*********************************!*\
  !*** ./src/scenes/GameScene.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameScene\": () => (/* binding */ GameScene)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n\n\nclass GameScene extends _core__WEBPACK_IMPORTED_MODULE_0__.Scene {\n    constructor() {\n        super(...arguments);\n        this.needsSetup = true;\n    }\n    getRoot() {\n        return this.root;\n    }\n    invokeUpdate(updateArgs) {\n        if (this.needsSetup === true) {\n            this.needsSetup = false;\n            this.root = this.createRoot();\n            this.root.invokeUpdate(updateArgs);\n            this.setup(updateArgs);\n        }\n        this.update(updateArgs);\n    }\n    // Calls update on all children of the scene root\n    update(updateArgs) {\n        this.root.traverseDescedants((child) => {\n            child.invokeUpdate(updateArgs);\n        });\n    }\n    createRoot() {\n        const root = new _core__WEBPACK_IMPORTED_MODULE_0__.GameObject();\n        root.size.set(_config__WEBPACK_IMPORTED_MODULE_1__.config.CANVAS_WIDTH, _config__WEBPACK_IMPORTED_MODULE_1__.config.CANVAS_HEIGHT);\n        root.updateMatrix();\n        return root;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/scenes/GameScene.ts?");

/***/ }),

/***/ "./src/scenes/GameSceneRouter.ts":
/*!***************************************!*\
  !*** ./src/scenes/GameSceneRouter.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameSceneRouter\": () => (/* binding */ GameSceneRouter)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _AboutScene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AboutScene */ \"./src/scenes/AboutScene.ts\");\n/* harmony import */ var _FinalScene__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FinalScene */ \"./src/scenes/FinalScene.ts\");\n/* harmony import */ var _IntroScene__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./IntroScene */ \"./src/scenes/IntroScene.ts\");\n/* harmony import */ var _LevelScene__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./LevelScene */ \"./src/scenes/LevelScene.ts\");\n/* harmony import */ var _MainMenuScene__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./MainMenuScene */ \"./src/scenes/MainMenuScene.ts\");\n/* harmony import */ var _GameSceneType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./GameSceneType */ \"./src/scenes/GameSceneType.ts\");\n\n\n\n\n\n\n\n// Composition root for game scenes\nclass GameSceneRouter extends _core__WEBPACK_IMPORTED_MODULE_0__.SceneRouter {\n    constructor() {\n        super();\n        this.register(_GameSceneType__WEBPACK_IMPORTED_MODULE_6__.GameSceneType.About, _AboutScene__WEBPACK_IMPORTED_MODULE_1__.AboutScene);\n        this.register(_GameSceneType__WEBPACK_IMPORTED_MODULE_6__.GameSceneType.Final, _FinalScene__WEBPACK_IMPORTED_MODULE_2__.FinalScene);\n        this.register(_GameSceneType__WEBPACK_IMPORTED_MODULE_6__.GameSceneType.Intro, _IntroScene__WEBPACK_IMPORTED_MODULE_3__.IntroScene);\n        this.register(_GameSceneType__WEBPACK_IMPORTED_MODULE_6__.GameSceneType.Level, _LevelScene__WEBPACK_IMPORTED_MODULE_4__.LevelScene);\n        this.register(_GameSceneType__WEBPACK_IMPORTED_MODULE_6__.GameSceneType.MainMenu, _MainMenuScene__WEBPACK_IMPORTED_MODULE_5__.MainMenuScene);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/scenes/GameSceneRouter.ts?");

/***/ }),

/***/ "./src/scenes/GameSceneType.ts":
/*!*************************************!*\
  !*** ./src/scenes/GameSceneType.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameSceneType\": () => (/* binding */ GameSceneType)\n/* harmony export */ });\nvar GameSceneType;\n(function (GameSceneType) {\n    GameSceneType[GameSceneType[\"About\"] = 0] = \"About\";\n    GameSceneType[GameSceneType[\"Final\"] = 1] = \"Final\";\n    GameSceneType[GameSceneType[\"Intro\"] = 2] = \"Intro\";\n    GameSceneType[GameSceneType[\"Level\"] = 3] = \"Level\";\n    GameSceneType[GameSceneType[\"MainMenu\"] = 4] = \"MainMenu\";\n})(GameSceneType || (GameSceneType = {}));\n\n\n//# sourceURL=webpack:///./src/scenes/GameSceneType.ts?");

/***/ }),

/***/ "./src/scenes/IntroScene.ts":
/*!**********************************!*\
  !*** ./src/scenes/IntroScene.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"IntroScene\": () => (/* binding */ IntroScene)\n/* harmony export */ });\n/* harmony import */ var _objects__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../objects */ \"./src/objects/index.ts\");\n/* harmony import */ var _GameSceneType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GameSceneType */ \"./src/scenes/GameSceneType.ts\");\n/* harmony import */ var _GameScene__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GameScene */ \"./src/scenes/GameScene.ts\");\n\n\n\nconst messages = [];\nmessages.push([\n    'Greetings, fellow intern!',\n    'Welcome to the Synth Labs!',\n    '',\n    'My name is Peter Dogson and I will be your mentor.',\n]);\nmessages.push([\n    'As you might know, our lab specializes in the research',\n    'of new elements. We do this with the help of a unique',\n    'device that we have developed in our lab.',\n]);\nmessages.push([\n    'We use the device to summon the creatures from the',\n    'outer worlds. By simulating the environment for these',\n    'creatures we are able to extract new elements that',\n    \"don't exist in our world.\",\n]);\nmessages.push([\n    \"This is completely harmless, because we don't really\",\n    'interact with real living organizms, but just their',\n    'simulations... ahem...',\n]);\nmessages.push([\"... Enough of this boring talk, let's try this in action!\"]);\nclass IntroScene extends _GameScene__WEBPACK_IMPORTED_MODULE_2__.GameScene {\n    setup({ gameStore }) {\n        const doctorModal = new _objects__WEBPACK_IMPORTED_MODULE_0__.TalkModal(messages);\n        doctorModal.updateMatrix();\n        doctorModal.setCenter(this.root.getSelfCenter());\n        doctorModal.closed.addListener(() => {\n            gameStore.setStoryStep('dummy_summon_live');\n            gameStore.save();\n            this.navigator.push(_GameSceneType__WEBPACK_IMPORTED_MODULE_1__.GameSceneType.Level);\n        });\n        this.root.add(doctorModal);\n    }\n    update(updateArgs) {\n        super.update(updateArgs);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/scenes/IntroScene.ts?");

/***/ }),

/***/ "./src/scenes/LevelScene.ts":
/*!**********************************!*\
  !*** ./src/scenes/LevelScene.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LevelScene\": () => (/* binding */ LevelScene)\n/* harmony export */ });\n/* harmony import */ var _objects__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../objects */ \"./src/objects/index.ts\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game */ \"./src/game/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n/* harmony import */ var _GameScene__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./GameScene */ \"./src/scenes/GameScene.ts\");\n/* harmony import */ var _GameSceneType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./GameSceneType */ \"./src/scenes/GameSceneType.ts\");\n\n\n\n\n\nclass LevelScene extends _GameScene__WEBPACK_IMPORTED_MODULE_3__.GameScene {\n    constructor() {\n        super(...arguments);\n        this.handleSummonClick = () => {\n            const summoning = new _objects__WEBPACK_IMPORTED_MODULE_0__.Summoning();\n            summoning.position.set(256, 64);\n            summoning.fadeInCompleted.addListener(() => {\n                this.summon();\n            });\n            summoning.completed.addListener(() => {\n                this.handleSummoned();\n            });\n            this.root.add(summoning);\n        };\n        this.handleSummoned = () => {\n            this.gameStore.setLastActiveEssence(this.gameState.essence);\n            this.gameStore.setLastActiveModifier(this.gameState.modifier);\n            this.gameStore.setLastActiveCreature(this.gameState.creature);\n            this.gameStore.save();\n            const storyStep = this.gameStore.getStoryStep();\n            if (!['dummy_summon_live', 'dummy_lived'].includes(storyStep)) {\n                this.backButton = new _objects__WEBPACK_IMPORTED_MODULE_0__.IconTextButton({\n                    iconType: 'arrow.left',\n                    text: 'Back to summon',\n                    activeTextColor: '#489880',\n                    hoverTextColor: '#84d74b',\n                });\n                this.backButton.position.set(760, 74);\n                this.backButton.clicked.addListenerOnce(() => {\n                    this.gameState.resetSelection();\n                    this.root.remove(this.spiritResources);\n                    this.navigator.replace(_GameSceneType__WEBPACK_IMPORTED_MODULE_4__.GameSceneType.Level);\n                });\n                this.root.add(this.backButton);\n            }\n            this.controlPanel = new _objects__WEBPACK_IMPORTED_MODULE_0__.ControlPanel();\n            this.controlPanel.position.set(756, 64);\n            this.controlPanel.simulated.addListener(() => {\n                if (!this.showSpiritEncounter()) {\n                    return;\n                }\n                this.root.remove(this.spiritResources);\n                this.simulate();\n            });\n            this.root.add(this.controlPanel);\n            if (this.gameStore.getStoryStep() === 'dummy_summon_live') {\n                this.showDoctorDummySimulateToLive();\n            }\n        };\n        this.handleSimulated = (selection) => {\n            const creatureConfig = _config__WEBPACK_IMPORTED_MODULE_2__.config.CREATURES[selection.creature];\n            const creature = _game__WEBPACK_IMPORTED_MODULE_1__.Creature.fromConfig(creatureConfig);\n            // this.gameStore.removeResources(creature.requiredResources);\n            const outcome = _game__WEBPACK_IMPORTED_MODULE_1__.SimDecider.decide(selection);\n            if (outcome.status === 'alive') {\n                this.handleAlive(outcome);\n            }\n            else {\n                this.handleDeath(outcome);\n            }\n        };\n        this.handleAlive = (outcome) => {\n            this.gameStore.addKnownResources(outcome.resources);\n            this.gameStore.addKnownDropsForCreature(outcome.selection.creature, outcome.resources);\n            const modal = new _objects__WEBPACK_IMPORTED_MODULE_0__.AliveModal(outcome);\n            modal.updateMatrix();\n            modal.setCenter(this.root.getSelfCenter());\n            modal.updateMatrix();\n            modal.accepted.addListener(() => {\n                this.gameState.resetSelection();\n                this.gameStore.addResources(outcome.resources);\n                if (this.gameStore.getStoryStep() === 'dummy_summon_live') {\n                    this.gameStore.setStoryStep('dummy_lived');\n                }\n                this.gameStore.save();\n                this.navigator.replace(_GameSceneType__WEBPACK_IMPORTED_MODULE_4__.GameSceneType.Level);\n            });\n            modal.backed.addListener(() => {\n                this.gameState.resetSelection();\n                this.gameStore.addResources(outcome.resources);\n                this.gameStore.save();\n                this.navigator.replace(_GameSceneType__WEBPACK_IMPORTED_MODULE_4__.GameSceneType.Level);\n            });\n            modal.retried.addListener(() => {\n                this.controlPanel.setDisabled(false);\n                this.backButton.setDisabled(false);\n                this.gameStore.addResources(outcome.resources);\n                this.gameStore.save();\n            });\n            this.root.add(modal);\n        };\n        this.handleDeath = (outcome) => {\n            this.gameStore.addKnownResources(outcome.resources);\n            this.gameStore.addKnownDropsForCreature(outcome.selection.creature, outcome.resources);\n            const modal = new _objects__WEBPACK_IMPORTED_MODULE_0__.DeathModal(outcome);\n            modal.updateMatrix();\n            modal.setCenter(this.root.getSelfCenter());\n            modal.updateMatrix();\n            modal.accepted.addListener(() => {\n                this.gameState.resetSelection();\n                this.gameStore.addResources(outcome.resources);\n                if (this.gameStore.getStoryStep() === 'dummy_lived') {\n                    this.gameStore.setStoryStep('dummy_died');\n                }\n                this.gameStore.save();\n                this.navigator.replace(_GameSceneType__WEBPACK_IMPORTED_MODULE_4__.GameSceneType.Level);\n            });\n            modal.backed.addListener(() => {\n                this.gameState.resetSelection();\n                this.gameStore.addResources(outcome.resources);\n                this.gameStore.save();\n                this.navigator.replace(_GameSceneType__WEBPACK_IMPORTED_MODULE_4__.GameSceneType.Level);\n            });\n            modal.retried.addListener(() => {\n                this.controlPanel.setDisabled(false);\n                this.backButton.setDisabled(false);\n                this.gameStore.addResources(outcome.resources);\n                this.gameStore.save();\n            });\n            this.root.add(modal);\n        };\n    }\n    setup({ gameState, gameStore }) {\n        this.gameState = gameState;\n        this.gameStore = gameStore;\n        const storyStep = gameStore.getStoryStep();\n        const cage = new _objects__WEBPACK_IMPORTED_MODULE_0__.Cage();\n        cage.position.set(256, 64);\n        this.root.add(cage);\n        if (!['dummy_summon_live', 'dummy_lived', 'dummy_died'].includes(storyStep)) {\n            const creaturePanel = new _objects__WEBPACK_IMPORTED_MODULE_0__.CreaturePanel(gameStore.getLastActiveCreature());\n            creaturePanel.position.set(0, 64);\n            this.root.add(creaturePanel);\n        }\n        const summonPanel = new _objects__WEBPACK_IMPORTED_MODULE_0__.SummonPanel(gameStore.getLastActiveCreature());\n        summonPanel.position.set(756, 64);\n        summonPanel.summoned.addListener(() => {\n            summonPanel.removeSelf();\n            this.handleSummonClick();\n        });\n        this.root.add(summonPanel);\n        if (storyStep === 'dummy_summon_live') {\n            this.showDoctorDummySummonToLive();\n        }\n        else if (storyStep === 'dummy_lived') {\n            this.showDoctorDummyLivedAndSummonToDie();\n        }\n        else if (storyStep === 'dummy_died') {\n            this.showDoctorDummyDied();\n        }\n        gameState.essenceChanged.addListener(() => {\n            this.updateShadow();\n        });\n        gameState.modifierChanged.addListener(() => {\n            this.updateShadow();\n        });\n    }\n    updateShadow() {\n        if (!this.gameState.essence || !this.gameState.modifier) {\n            return;\n        }\n        const creatureType = _game__WEBPACK_IMPORTED_MODULE_1__.SummonHelper.decideCreature(this.gameState.essence, this.gameState.modifier);\n        this.root.remove(this.shadow);\n        this.shadow = new _objects__WEBPACK_IMPORTED_MODULE_0__.CreatureObject(creatureType, 'shadow');\n        this.shadow.position.set(256, 64);\n        this.root.add(this.shadow);\n    }\n    summon() {\n        const creatureType = _game__WEBPACK_IMPORTED_MODULE_1__.SummonHelper.decideCreature(this.gameState.essence, this.gameState.modifier);\n        this.gameState.setDatabaseCreature(creatureType);\n        this.gameState.setCreature(creatureType);\n        this.gameStore.setCreatureKnown(creatureType);\n        this.gameStore.addKnownReqPairForCreature(creatureType, this.gameState.essence, this.gameState.modifier);\n        this.gameStore.save();\n        const creatureObject = new _objects__WEBPACK_IMPORTED_MODULE_0__.CreatureObject(creatureType);\n        creatureObject.position.set(256, 64);\n        this.root.add(creatureObject);\n        if (creatureType === 'spirit') {\n            const storyStep = this.gameStore.getStoryStep();\n            if (storyStep === 'spirit_fourth_encounter') {\n                this.spiritResources = new _objects__WEBPACK_IMPORTED_MODULE_0__.SpiritResources();\n                this.spiritResources.position.set(420, 150);\n                this.root.add(this.spiritResources);\n                const resLeft = _game__WEBPACK_IMPORTED_MODULE_1__.SummonHelper.getSpiritLeft(this.gameStore);\n                if (resLeft === 0) {\n                    this.showTalkModal('spirit', _game__WEBPACK_IMPORTED_MODULE_1__.TalkLines.spiritEnd(), () => {\n                        this.navigator.push(_GameSceneType__WEBPACK_IMPORTED_MODULE_4__.GameSceneType.Final);\n                    });\n                }\n                else {\n                    this.showTalkModal('spirit', _game__WEBPACK_IMPORTED_MODULE_1__.TalkLines.spiritFourth(resLeft));\n                }\n            }\n            this.showSpiritEncounter();\n        }\n    }\n    simulate() {\n        var _a;\n        const selection = new _game__WEBPACK_IMPORTED_MODULE_1__.Selection({\n            creature: this.gameState.creature,\n            env: this.gameState.env,\n            temp: this.gameState.temp,\n        });\n        if (this.gameStore.getStoryStep() === 'dummy_lived') {\n            if (selection.isDefault()) {\n                this.showDoctorDummyShouldNotDefault();\n                return;\n            }\n        }\n        this.controlPanel.setDisabled(true);\n        (_a = this.backButton) === null || _a === void 0 ? void 0 : _a.setDisabled(true);\n        const simulation = new _objects__WEBPACK_IMPORTED_MODULE_0__.Simulation();\n        simulation.position.set(256, 64);\n        simulation.completed.addListener(() => {\n            simulation.removeSelf();\n            this.handleSimulated(selection);\n        });\n        this.root.add(simulation);\n    }\n    showDoctorDummySummonToLive() {\n        this.showTalkModal('doctor', _game__WEBPACK_IMPORTED_MODULE_1__.TalkLines.dummySummonToLive());\n    }\n    showDoctorDummySimulateToLive() {\n        this.showTalkModal('doctor', _game__WEBPACK_IMPORTED_MODULE_1__.TalkLines.dummySimulateToLive());\n    }\n    showDoctorDummyLivedAndSummonToDie() {\n        this.showTalkModal('doctor', _game__WEBPACK_IMPORTED_MODULE_1__.TalkLines.dummyLivedAndSummonToDie());\n    }\n    showDoctorDummyDied() {\n        this.showTalkModal('doctor', _game__WEBPACK_IMPORTED_MODULE_1__.TalkLines.dummyDied(), () => {\n            this.gameStore.setStoryStep('spirit_first_encounter');\n            this.gameStore.save();\n            this.navigator.push(_GameSceneType__WEBPACK_IMPORTED_MODULE_4__.GameSceneType.Level);\n        });\n    }\n    showDoctorDummyShouldNotDefault() {\n        this.showTalkModal('doctor', _game__WEBPACK_IMPORTED_MODULE_1__.TalkLines.dummyShouldNotDefault());\n    }\n    showSpiritEncounter() {\n        if (this.gameState.creature !== 'spirit') {\n            return true;\n        }\n        const storyStep = this.gameStore.getStoryStep();\n        if (storyStep === 'spirit_first_encounter') {\n            this.showTalkModal('spirit', _game__WEBPACK_IMPORTED_MODULE_1__.TalkLines.spiritFirst(), () => {\n                this.gameStore.setStoryStep('spirit_second_encounter');\n                this.gameStore.save();\n            });\n            return false;\n        }\n        else if (storyStep === 'spirit_second_encounter') {\n            this.showTalkModal('spirit', _game__WEBPACK_IMPORTED_MODULE_1__.TalkLines.spiritSecond(), () => {\n                this.gameStore.setStoryStep('spirit_third_encounter');\n                this.gameStore.save();\n            });\n            return false;\n        }\n        else if (storyStep === 'spirit_third_encounter') {\n            this.showTalkModal('spirit', _game__WEBPACK_IMPORTED_MODULE_1__.TalkLines.spiritThird(), () => {\n                this.gameStore.setStoryStep('spirit_fourth_encounter');\n                this.gameStore.save();\n            });\n            return false;\n        }\n        return true;\n    }\n    showTalkModal(avatar, messages, onClose) {\n        const doctorModal = new _objects__WEBPACK_IMPORTED_MODULE_0__.TalkModal(messages, avatar, 'compact');\n        doctorModal.updateMatrix();\n        doctorModal.setCenter(this.root.getSelfCenter());\n        doctorModal.position.setY(512);\n        doctorModal.closed.addListener(() => {\n            onClose === null || onClose === void 0 ? void 0 : onClose();\n        });\n        this.root.add(doctorModal);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/scenes/LevelScene.ts?");

/***/ }),

/***/ "./src/scenes/MainMenuScene.ts":
/*!*************************************!*\
  !*** ./src/scenes/MainMenuScene.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MainMenuScene\": () => (/* binding */ MainMenuScene)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./src/core/index.ts\");\n/* harmony import */ var _objects__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../objects */ \"./src/objects/index.ts\");\n/* harmony import */ var _GameSceneType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GameSceneType */ \"./src/scenes/GameSceneType.ts\");\n/* harmony import */ var _GameScene__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./GameScene */ \"./src/scenes/GameScene.ts\");\n\n\n\n\nclass MainMenuScene extends _GameScene__WEBPACK_IMPORTED_MODULE_3__.GameScene {\n    setup({ gameStore }) {\n        const canContinue = gameStore.hasSavedGame();\n        const overlay = new _objects__WEBPACK_IMPORTED_MODULE_1__.MainMenuOverlay();\n        this.root.add(overlay);\n        if (canContinue) {\n            const continueGameItem = new _objects__WEBPACK_IMPORTED_MODULE_1__.MainMenuItem('CONTINUE');\n            continueGameItem.painter = new _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter({\n                text: 'NEW GAME',\n                color: '#fff',\n                size: 36,\n                alignment: _core__WEBPACK_IMPORTED_MODULE_0__.TextPainter.Alignment.MiddleCenter,\n            });\n            continueGameItem.position.set(384, 256);\n            continueGameItem.clicked.addListener(() => {\n                this.startGame(gameStore.getStoryStep());\n            });\n            this.root.add(continueGameItem);\n        }\n        const continueAddHeight = canContinue ? 56 : 0;\n        const newGameItem = new _objects__WEBPACK_IMPORTED_MODULE_1__.MainMenuItem('NEW GAME');\n        newGameItem.position.set(384, 256 + continueAddHeight);\n        newGameItem.clicked.addListener(() => {\n            if (canContinue) {\n                const modal = new _objects__WEBPACK_IMPORTED_MODULE_1__.ConfirmModal({});\n                modal.updateMatrix();\n                modal.setCenter(this.root.getSelfCenter());\n                modal.updateMatrix();\n                modal.accepted.addListener(() => {\n                    gameStore.reset();\n                    gameStore.save();\n                    this.startGame(gameStore.getStoryStep());\n                });\n                modal.declined.addListener(() => {\n                    modal.removeSelf();\n                });\n                this.root.add(modal);\n            }\n            else {\n                this.startGame(gameStore.getStoryStep());\n            }\n        });\n        this.root.add(newGameItem);\n        const aboutItem = new _objects__WEBPACK_IMPORTED_MODULE_1__.MainMenuItem('ABOUT');\n        aboutItem.position.set(384, 312 + continueAddHeight);\n        aboutItem.clicked.addListener(() => {\n            this.navigator.push(_GameSceneType__WEBPACK_IMPORTED_MODULE_2__.GameSceneType.About);\n        });\n        this.root.add(aboutItem);\n    }\n    update(updateArgs) {\n        super.update(updateArgs);\n    }\n    startGame(storyStep) {\n        if (storyStep === 'intro') {\n            this.navigator.push(_GameSceneType__WEBPACK_IMPORTED_MODULE_2__.GameSceneType.Intro);\n        }\n        else {\n            this.navigator.push(_GameSceneType__WEBPACK_IMPORTED_MODULE_2__.GameSceneType.Level);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/scenes/MainMenuScene.ts?");

/***/ }),

/***/ "./src/scenes/index.ts":
/*!*****************************!*\
  !*** ./src/scenes/index.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameSceneRouter\": () => (/* reexport safe */ _GameSceneRouter__WEBPACK_IMPORTED_MODULE_0__.GameSceneRouter),\n/* harmony export */   \"GameSceneType\": () => (/* reexport safe */ _GameSceneType__WEBPACK_IMPORTED_MODULE_1__.GameSceneType)\n/* harmony export */ });\n/* harmony import */ var _GameSceneRouter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GameSceneRouter */ \"./src/scenes/GameSceneRouter.ts\");\n/* harmony import */ var _GameSceneType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GameSceneType */ \"./src/scenes/GameSceneType.ts\");\n\n\n\n\n//# sourceURL=webpack:///./src/scenes/index.ts?");

/***/ }),

/***/ "./data/sprite.manifest.json":
/*!***********************************!*\
  !*** ./data/sprite.manifest.json ***!
  \***********************************/
/***/ ((module) => {

eval("module.exports = JSON.parse('{\"creature.dummy\":{\"file\":\"data/graphics/dummy.png\",\"rect\":[0,0,256,256]},\"creature.fishy\":{\"file\":\"data/graphics/fishy.png\",\"rect\":[0,0,256,256]},\"creature.dummyfish\":{\"file\":\"data/graphics/dummyfish.png\",\"rect\":[0,0,256,256]},\"creature.scorporate\":{\"file\":\"data/graphics/scorporate.png\",\"rect\":[0,0,256,256]},\"creature.wasp\":{\"file\":\"data/graphics/wasp.png\",\"rect\":[0,0,256,256]},\"creature.spirit\":{\"file\":\"data/graphics/spirit.png\",\"rect\":[0,0,256,256]},\"creature.drone\":{\"file\":\"data/graphics/drone.png\",\"rect\":[0,0,256,256]},\"creature.bat\":{\"file\":\"data/graphics/bat.png\",\"rect\":[0,0,256,256]},\"creature.eaglefish\":{\"file\":\"data/graphics/eaglefish.png\",\"rect\":[0,0,256,256]},\"creature.dragon\":{\"file\":\"data/graphics/dragon.png\",\"rect\":[0,0,256,256]},\"creature.fishsteak\":{\"file\":\"data/graphics/fish-steak.png\",\"rect\":[0,0,256,256]},\"creature.lighter\":{\"file\":\"data/graphics/lighter.png\",\"rect\":[0,0,256,256]},\"creature.firebug\":{\"file\":\"data/graphics/firebug.png\",\"rect\":[0,0,256,256]},\"creature.snake\":{\"file\":\"data/graphics/snake.png\",\"rect\":[0,0,256,256]},\"creature.firesnail\":{\"file\":\"data/graphics/firesnail.png\",\"rect\":[0,0,256,256]},\"creature.turtle\":{\"file\":\"data/graphics/turtle.png\",\"rect\":[0,0,256,256]},\"creature.muaddib\":{\"file\":\"data/graphics/muaddib.png\",\"rect\":[0,0,256,256]},\"creature.dude\":{\"file\":\"data/graphics/dude.png\",\"rect\":[0,0,256,256]},\"dummy.1\":{\"file\":\"data/graphics/dummy-sheet.png\",\"rect\":[0,0,256,256]},\"dummy.2\":{\"file\":\"data/graphics/dummy-sheet.png\",\"rect\":[256,0,256,256]},\"dummy.3\":{\"file\":\"data/graphics/dummy-sheet.png\",\"rect\":[512,0,256,256]},\"shadow\":{\"file\":\"data/graphics/shadow.png\",\"rect\":[0,0,64,16]},\"cage\":{\"file\":\"data/graphics/cage.png\",\"rect\":[0,0,256,256]},\"arrow.left.active\":{\"file\":\"data/graphics/ui.png\",\"rect\":[0,0,32,32]},\"arrow.left.hover\":{\"file\":\"data/graphics/ui.png\",\"rect\":[32,0,32,32]},\"arrow.left.disabled\":{\"file\":\"data/graphics/ui.png\",\"rect\":[64,0,32,32]},\"arrow.left.blink\":{\"file\":\"data/graphics/ui.png\",\"rect\":[192,0,32,32]},\"arrow.right.active\":{\"file\":\"data/graphics/ui.png\",\"rect\":[96,0,32,32]},\"arrow.right.hover\":{\"file\":\"data/graphics/ui.png\",\"rect\":[128,0,32,32]},\"arrow.right.disabled\":{\"file\":\"data/graphics/ui.png\",\"rect\":[160,0,32,32]},\"arrow.right.blink\":{\"file\":\"data/graphics/ui.png\",\"rect\":[224,0,32,32]},\"reload.active\":{\"file\":\"data/graphics/ui.png\",\"rect\":[256,0,32,32]},\"reload.hover\":{\"file\":\"data/graphics/ui.png\",\"rect\":[288,0,32,32]},\"reload.disabled\":{\"file\":\"data/graphics/ui.png\",\"rect\":[320,0,32,32]},\"heat.low.1\":{\"file\":\"data/graphics/heat-sheet.png\",\"rect\":[1024,0,256,256]},\"heat.low.2\":{\"file\":\"data/graphics/heat-sheet.png\",\"rect\":[1280,0,256,256]},\"heat.medium.1\":{\"file\":\"data/graphics/heat-sheet.png\",\"rect\":[512,0,256,256]},\"heat.medium.2\":{\"file\":\"data/graphics/heat-sheet.png\",\"rect\":[768,0,256,256]},\"heat.high.1\":{\"file\":\"data/graphics/heat-sheet.png\",\"rect\":[0,0,256,256]},\"heat.high.2\":{\"file\":\"data/graphics/heat-sheet.png\",\"rect\":[256,0,256,256]},\"cold.low.1\":{\"file\":\"data/graphics/cold-sheet.png\",\"rect\":[1024,0,256,256]},\"cold.low.2\":{\"file\":\"data/graphics/cold-sheet.png\",\"rect\":[1280,0,256,256]},\"cold.medium.1\":{\"file\":\"data/graphics/cold-sheet.png\",\"rect\":[512,0,256,256]},\"cold.medium.2\":{\"file\":\"data/graphics/cold-sheet.png\",\"rect\":[768,0,256,256]},\"cold.high.1\":{\"file\":\"data/graphics/cold-sheet.png\",\"rect\":[0,0,256,256]},\"cold.high.2\":{\"file\":\"data/graphics/cold-sheet.png\",\"rect\":[256,0,256,256]},\"resource.soulium\":{\"file\":\"data/graphics/resources.png\",\"rect\":[0,0,16,16]},\"resource.dummium\":{\"file\":\"data/graphics/resources.png\",\"rect\":[16,0,16,16]},\"resource.fishium\":{\"file\":\"data/graphics/resources.png\",\"rect\":[32,0,16,16]},\"resource.unknown\":{\"file\":\"data/graphics/resources.png\",\"rect\":[48,0,16,16]},\"resource.liquium\":{\"file\":\"data/graphics/resources.png\",\"rect\":[64,0,16,16]},\"resource.sandium\":{\"file\":\"data/graphics/resources.png\",\"rect\":[80,0,16,16]},\"resource.techium\":{\"file\":\"data/graphics/resources.png\",\"rect\":[96,0,16,16]},\"resource.arachium\":{\"file\":\"data/graphics/resources.png\",\"rect\":[112,0,16,16]},\"resource.windium\":{\"file\":\"data/graphics/resources.png\",\"rect\":[0,16,16,16]},\"resource.flamium\":{\"file\":\"data/graphics/resources.png\",\"rect\":[16,16,16,16]},\"resource.reptilium\":{\"file\":\"data/graphics/resources.png\",\"rect\":[32,16,16,16]},\"resource.wendsdium\":{\"file\":\"data/graphics/resources.png\",\"rect\":[48,16,16,16]},\"env.desert\":{\"file\":\"data/graphics/env-sheet.png\",\"rect\":[0,0,256,256]},\"env.underwater\":{\"file\":\"data/graphics/env-sheet.png\",\"rect\":[256,0,256,256]},\"env.air\":{\"file\":\"data/graphics/env-sheet.png\",\"rect\":[512,0,256,256]},\"main.title.1\":{\"file\":\"data/graphics/main-title-sheet.png\",\"rect\":[0,0,512,96]},\"main.title.2\":{\"file\":\"data/graphics/main-title-sheet.png\",\"rect\":[0,96,512,96]},\"button.default.active\":{\"file\":\"data/graphics/ui.png\",\"rect\":[0,32,176,48]},\"button.default.hover\":{\"file\":\"data/graphics/ui.png\",\"rect\":[0,80,176,48]},\"button.default.disabled\":{\"file\":\"data/graphics/ui.png\",\"rect\":[0,128,176,48]},\"button.primary.active\":{\"file\":\"data/graphics/ui.png\",\"rect\":[176,32,176,48]},\"button.primary.hover\":{\"file\":\"data/graphics/ui.png\",\"rect\":[176,80,176,48]},\"button.primary.disabled\":{\"file\":\"data/graphics/ui.png\",\"rect\":[176,128,176,48]},\"summoning.1\":{\"file\":\"data/graphics/summon-sheet.png\",\"rect\":[0,0,256,256]},\"summoning.2\":{\"file\":\"data/graphics/summon-sheet.png\",\"rect\":[256,0,256,256]},\"summoning.3\":{\"file\":\"data/graphics/summon-sheet.png\",\"rect\":[512,0,256,256]},\"summoning.4\":{\"file\":\"data/graphics/summon-sheet.png\",\"rect\":[768,0,256,256]},\"summoning.5\":{\"file\":\"data/graphics/summon-sheet.png\",\"rect\":[1024,0,256,256]},\"summoning.6\":{\"file\":\"data/graphics/summon-sheet.png\",\"rect\":[1280,0,256,256]},\"summoning.7\":{\"file\":\"data/graphics/summon-sheet.png\",\"rect\":[1536,0,256,256]},\"summoning.8\":{\"file\":\"data/graphics/summon-sheet.png\",\"rect\":[1792,0,256,256]},\"summoning.9\":{\"file\":\"data/graphics/summon-sheet.png\",\"rect\":[2048,0,256,256]},\"summoning.10\":{\"file\":\"data/graphics/summon-sheet.png\",\"rect\":[2304,0,256,256]},\"summoning.11\":{\"file\":\"data/graphics/summon-sheet.png\",\"rect\":[2560,0,256,256]},\"summoning.12\":{\"file\":\"data/graphics/summon-sheet.png\",\"rect\":[2816,0,256,256]},\"summoning.13\":{\"file\":\"data/graphics/summon-sheet.png\",\"rect\":[3072,0,256,256]},\"summoning.14\":{\"file\":\"data/graphics/summon-sheet.png\",\"rect\":[3328,0,256,256]},\"summoning.15\":{\"file\":\"data/graphics/summon-sheet.png\",\"rect\":[3584,0,256,256]},\"avatar.doctor\":{\"file\":\"data/graphics/doctor.png\",\"rect\":[0,0,64,64]},\"avatar.spirit\":{\"file\":\"data/graphics/spirit-avatar.png\",\"rect\":[0,0,64,64]},\"scan.1\":{\"file\":\"data/graphics/scan-sheet.png\",\"rect\":[0,0,256,64]},\"scan.2\":{\"file\":\"data/graphics/scan-sheet.png\",\"rect\":[0,64,256,64]},\"scan.3\":{\"file\":\"data/graphics/scan-sheet.png\",\"rect\":[0,128,256,64]}}');\n\n//# sourceURL=webpack:///./data/sprite.manifest.json?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.ts");
/******/ 	
/******/ })()
;